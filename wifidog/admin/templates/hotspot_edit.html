{include file="templates/header.html" title="Hotspot administration"}

{node->GetID assign="node_id"}
{node->GetDeploymentStatus assign="deployment_status"}

<h3>{$title} {$smarty.const.HOTSPOT_NETWORK_NAME}</h3>

<b style="position: absolute;top: 10px;right: 10px;">({$user_id})</b> <!-- DEBUG -->

<form method="post" name="auth">

<table id="node_list"> <!-- Refaire le formattage sans la table -->
  <tr>
    <td>ID:</td>
<!-- Tmp work around to disable the hotspot ID -->
{if $node_id == "new"}
    <td><input type="text" name="new_node_id" value="{node->GetID}">&nbsp;{* $javascript *}</td><tr>
{else}
    <td><input type="text" value="{node->GetID}" DISABLED><input type="hidden" name="new_node_id" value="{node->GetID}"></td><tr>
{/if}
  <tr>
    <td>{"Name"|_}:</td>
    <td><input type="text" name="name" value="{node->GetName}"></td>
  </tr>
  <tr>
    <td>{"RSS URL"|_}:</td>
    <td><input type="text" name="rss_url" value="{node->GetRSSURL}"></td>
  </tr>
  <tr>
    <td>{"Homepage URL"|_}</td>
    <td><input type="text" name="home_page_url" value="{node->GetHomeURL}"></td>
  </tr>
  <tr>
    <td>{"Description"|_}</td>
    <td><input type="text" name="description" value="{node->GetDescription}"></td>
  </tr>
  <tr>
    <td>{"Map URL"|_}</td>
    <td><input type="text" name="map_url" value="{node->GetMapURL}"></td>
  </tr>
  <tr>
    <td>{"Street address"|_}</td>
    <td><input type="text" name="street_address" value="{node->GetStreetAddress}"></td>
  </tr>
  <tr>
    <td>{"Public phone number"|_}</td>
    <td><input type="text" name="public_phone_number" value="{node->GetPhoneNumber}"></td>
  </tr>
  <tr>
    <td>{"Public email"|_}</td>
    <td><input type="text" name="public_email" value="{node->GetEmail}"></td>
  </tr>
  <tr>
    <td>{"Mass transit info"|_}</td>
    <td><input type="text" name="mass_transit_info" value="{node->GetPublicTransit}"></td>
  </tr>
  <tr>
    <td>{"Node deployment status"|_}</td>
    <td>
    <select name="node_deployment_status">
    {html_options values=$node_deployment_status output=$node_deployment_status selected=$deployment_status}
    </select>
    </td>
  </tr>
</table>

{if $node_id == "new"}
<input type="hidden" name="action" value="add_new_node">
{else}
<input type="hidden" name="action" value="update_node">
{/if}

<input type="submit">
</form>

<br>
<p>Work in progress note: Better DB integrity testing is needed before allowing the hotspot ID modification.</p>

{include file="templates/footer.html"}

