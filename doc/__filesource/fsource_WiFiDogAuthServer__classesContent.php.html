<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>File Source for Content.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						
<h1>Source for file Content.php</h1>
<p>Documentation is available at <a href="../WiFiDogAuthServer/_wifidog_classes_Content_php.html">Content.php</a></p>
<div class="src-code">
<pre><ol><li><a name="a1"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a2"></a>&nbsp;</li>
<li><a name="a4"></a><span class="src-comm">/* vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4: */</span></li>
<li><a name="a5"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a6"></a><span class="src-comm">// | WiFiDog Authentication Server                                     |</span></li>
<li><a name="a7"></a><span class="src-comm">// | =============================                                     |</span></li>
<li><a name="a8"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a9"></a><span class="src-comm">// | The WiFiDog Authentication Server is part of the WiFiDog captive  |</span></li>
<li><a name="a10"></a><span class="src-comm">// | portal suite.                                                     |</span></li>
<li><a name="a11"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a12"></a><span class="src-comm">// | PHP version 5 required.                                           |</span></li>
<li><a name="a13"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a14"></a><span class="src-comm">// | Homepage:     http://www.wifidog.org/                             |</span></li>
<li><a name="a15"></a><span class="src-comm">// | Source Forge: http://sourceforge.net/projects/wifidog/            |</span></li>
<li><a name="a16"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a17"></a><span class="src-comm">// | This program is free software; you can redistribute it and/or     |</span></li>
<li><a name="a18"></a><span class="src-comm">// | modify it under the terms of the GNU General Public License as    |</span></li>
<li><a name="a19"></a><span class="src-comm">// | published by the Free Software Foundation; either version 2 of    |</span></li>
<li><a name="a20"></a><span class="src-comm">// | the License, or (at your option) any later version.               |</span></li>
<li><a name="a21"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a22"></a><span class="src-comm">// | This program is distributed in the hope that it will be useful,   |</span></li>
<li><a name="a23"></a><span class="src-comm">// | but WITHOUT ANY WARRANTY; without even the implied warranty of    |</span></li>
<li><a name="a24"></a><span class="src-comm">// | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the     |</span></li>
<li><a name="a25"></a><span class="src-comm">// | GNU General Public License for more details.                      |</span></li>
<li><a name="a26"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a27"></a><span class="src-comm">// | You should have received a copy of the GNU General Public License |</span></li>
<li><a name="a28"></a><span class="src-comm">// | along with this program; if not, contact:                         |</span></li>
<li><a name="a29"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a30"></a><span class="src-comm">// | Free Software Foundation           Voice:  +1-617-542-5942        |</span></li>
<li><a name="a31"></a><span class="src-comm">// | 59 Temple Place - Suite 330        Fax:    +1-617-542-2652        |</span></li>
<li><a name="a32"></a><span class="src-comm">// | Boston, MA  02111-1307,  USA       gnu@gnu.org                    |</span></li>
<li><a name="a33"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a34"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a35"></a>&nbsp;</li>
<li><a name="a36"></a><span class="src-doc">/**</span></li>
<li><a name="a37"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@package</span><span class="src-doc">    WiFiDogAuthServer</span></li>
<li><a name="a38"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@author</span><span class="src-doc">     Benoit Gregoire &lt;bock@step.polymtl.ca&gt;</span></li>
<li><a name="a39"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@copyright</span><span class="src-doc">  2005 Benoit Gregoire &lt;bock@step.polymtl.ca&gt; - Technologies Coeus</span></li>
<li><a name="a40"></a><span class="src-doc"> *  inc.</span></li>
<li><a name="a41"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@version</span><span class="src-doc">    CVS: $Id: Content.php,v 1.32 2005/12/26 10:41:29 max-horvath Exp $</span></li>
<li><a name="a42"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@link</span><span class="src-doc">       http://sourceforge.net/projects/wifidog/</span></li>
<li><a name="a43"></a><span class="src-doc"> */</span></li>
<li><a name="a44"></a>&nbsp;</li>
<li><a name="a45"></a><span class="src-inc">require_once </span><span class="src-id">BASEPATH</span>.<span class="src-str">'include/common.php'</span><span class="src-sym">;</span></li>
<li><a name="a46"></a><span class="src-inc">require_once </span><span class="src-id">BASEPATH</span>.<span class="src-str">'classes/FormSelectGenerator.php'</span><span class="src-sym">;</span></li>
<li><a name="a47"></a><span class="src-inc">require_once </span><span class="src-id">BASEPATH</span>.<span class="src-str">'classes/GenericObject.php'</span><span class="src-sym">;</span></li>
<li><a name="a48"></a>&nbsp;</li>
<li><a name="a49"></a><span class="src-doc">/** Any type of content */</span></li>
<li><a name="a49"></a>&nbsp;</li>
<li><a name="a50"></a><span class="src-key">class </span><a href="../WiFiDogAuthServer/Content.html">Content</a> <span class="src-key">implements </span><span class="src-id">GenericObject </span><span class="src-sym">{</span></li>
<li><a name="a51"></a>    <span class="src-key">protected </span><a href="../WiFiDogAuthServer/Content.html#var$id">$id</a><span class="src-sym">;</span></li>
<li><a name="a52"></a>    <span class="src-key">protected </span><a href="../WiFiDogAuthServer/Content.html#var$content_row">$content_row</a><span class="src-sym">;</span></li>
<li><a name="a53"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/Content.html#var$content_type">$content_type</a><span class="src-sym">;</span></li>
<li><a name="a54"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/Content.html#var$is_trivial_content">$is_trivial_content</a><span class="src-sym">;</span></li>
<li><a name="a55"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/Content.html#var$is_logging_enabled">$is_logging_enabled</a><span class="src-sym">;</span></li>
<li><a name="a56"></a>&nbsp;</li>
<li><a name="a57"></a>    <span class="src-doc">/**</span></li>
<li><a name="a58"></a><span class="src-doc">     * Create a new Content object in the database</span></li>
<li><a name="a59"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$content_type </span><span class="src-doc">Optionnal, the content type to be given to the new object</span></li>
<li><a name="a60"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$id </span><span class="src-doc">Optionnal, the id to be given to the new Content.  If null, a new id will be assigned</span></li>
<li><a name="a61"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">the </span><span class="src-doc">newly created Content object, or null if there was an error (an exception is also trown</span></li>
<li><a name="a62"></a><span class="src-doc">     */</span></li>
<li><a name="a63"></a>    <span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodcreateNewObject">createNewObject</a><span class="src-sym">(</span><span class="src-var">$content_type </span>= <span class="src-str">'Content'</span><span class="src-sym">, </span><span class="src-var">$id </span>= <span class="src-id">null</span><span class="src-sym">) </span><span class="src-sym">{</span></li>
<li><a name="a64"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a65"></a>&nbsp;</li>
<li><a name="a66"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$id</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a67"></a>            <span class="src-var">$content_id </span>= <a href="../WiFiDogAuthServer/_wifidog_include_common_php.html#functionget_guid">get_guid</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a68"></a>        <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a69"></a>            <span class="src-var">$content_id </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a70"></a>        <span class="src-sym">}</span></li>
<li><a name="a71"></a>&nbsp;</li>
<li><a name="a72"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a73"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">'Content type is optionnal, but cannot be empty!'</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a74"></a>        <span class="src-sym">} </span><span class="src-key">else </span><span class="src-sym">{</span></li>
<li><a name="a75"></a>            <span class="src-var">$content_type </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a76"></a>        <span class="src-sym">}</span></li>
<li><a name="a77"></a>&nbsp;</li>
<li><a name="a78"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">INSERT</span> <span class="src-id">INTO</span> <span class="src-id">content</span> (<span class="src-id">content_id</span>, <span class="src-id">content_type</span>) <span class="src-id">VALUES</span> ('<span class="src-var">$content_id</span>', '<span class="src-var">$content_type</span>')</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a79"></a>&nbsp;</li>
<li><a name="a80"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)) </span><span class="src-sym">{</span></li>
<li><a name="a81"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">'Unable to insert new content into database!'</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a82"></a>        <span class="src-sym">}</span></li>
<li><a name="a83"></a>&nbsp;</li>
<li><a name="a84"></a>        <span class="src-var">$object </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a85"></a>        <span class="src-comm">/* At least add the current user as the default owner */</span></li>
<li><a name="a86"></a>        <span class="src-var">$object</span><span class="src-sym">-&gt;</span><span class="src-id">AddOwner</span><span class="src-sym">(</span><span class="src-id"><a href="../WiFiDogAuthServer/User.html">User</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/User.html#methodgetCurrentUser">getCurrentUser</a><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a87"></a>        <span class="src-comm">/* By default, make it persistent */</span></li>
<li><a name="a88"></a>        <span class="src-var">$object</span><span class="src-sym">-&gt;</span><span class="src-id">setIsPersistent</span><span class="src-sym">(</span><span class="src-id">true</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a89"></a>&nbsp;</li>
<li><a name="a90"></a>        <span class="src-key">return </span><span class="src-var">$object</span><span class="src-sym">;</span></li>
<li><a name="a91"></a>    <span class="src-sym">}</span></li>
<li><a name="a92"></a>&nbsp;</li>
<li><a name="a93"></a>    <span class="src-doc">/**</span></li>
<li><a name="a94"></a><span class="src-doc">     * Get an interface to create a new object.</span></li>
<li><a name="a95"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">html </span><span class="src-doc">markup</span></li>
<li><a name="a96"></a><span class="src-doc">     */</span></li>
<li><a name="a97"></a>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetCreateNewObjectUI">getCreateNewObjectUI</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a98"></a>    <span class="src-sym">{</span></li>
<li><a name="a99"></a>        <span class="src-var">$html </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a100"></a>        <span class="src-var">$i </span>= <span class="src-num">0</span><span class="src-sym">;</span></li>
<li><a name="a101"></a>        <span class="src-var">$tab </span>= <span class="src-key">array </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a102"></a>        <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getAvailableContentTypes</span><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-key">as </span><span class="src-var">$classname</span><span class="src-sym">)</span></li>
<li><a name="a103"></a>        <span class="src-sym">{</span></li>
<li><a name="a104"></a>            <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">] </span>= <span class="src-var">$classname</span><span class="src-sym">;</span></li>
<li><a name="a105"></a>            <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">] </span>= <span class="src-var">$classname</span><span class="src-sym">;</span></li>
<li><a name="a106"></a>            <span class="src-var">$i </span>++<span class="src-sym">;</span></li>
<li><a name="a107"></a>        <span class="src-sym">}</span></li>
<li><a name="a108"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;new_content_content_type&quot;</span><span class="src-sym">;</span></li>
<li><a name="a109"></a>        <span class="src-var">$default </span>= <span class="src-str">'TrivialLangstring'</span><span class="src-sym">;</span></li>
<li><a name="a110"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$tab</span><span class="src-sym">))</span></li>
<li><a name="a111"></a>            <span class="src-var">$html </span>.= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;It appears that you have not installed any Content plugin !&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a112"></a>        <span class="src-key">else</span></li>
<li><a name="a113"></a>        <span class="src-sym">{</span></li>
<li><a name="a114"></a>            <span class="src-var">$html </span>.= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;You must select a content type: &quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a115"></a>            <span class="src-var">$html </span>.= <span class="src-id"><a href="../WiFiDogAuthServer/FormSelectGenerator.html">FormSelectGenerator</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/FormSelectGenerator.html#methodgenerateFromArray">generateFromArray</a><span class="src-sym">(</span><span class="src-var">$tab</span><span class="src-sym">, </span><span class="src-var">$default</span><span class="src-sym">, </span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-str">&quot;Content&quot;</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a116"></a>        <span class="src-sym">}</span></li>
<li><a name="a117"></a>        <span class="src-key">return </span><span class="src-var">$html</span><span class="src-sym">;</span></li>
<li><a name="a118"></a>    <span class="src-sym">}</span></li>
<li><a name="a119"></a>&nbsp;</li>
<li><a name="a120"></a>    <span class="src-doc">/** Process the new object interface.</span></li>
<li><a name="a121"></a><span class="src-doc">     *  Will       return the new object if the user has the credentials</span></li>
<li><a name="a122"></a><span class="src-doc">     * necessary (Else an exception is thrown) and and the form was fully</span></li>
<li><a name="a123"></a><span class="src-doc">     * filled (Else the object returns null).</span></li>
<li><a name="a124"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">the </span><span class="src-doc">node object or null if no new node was created.</span></li>
<li><a name="a125"></a><span class="src-doc">     */</span></li>
<li><a name="a126"></a>    <span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodprocessCreateNewObjectUI">processCreateNewObjectUI</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a127"></a>    <span class="src-sym">{</span></li>
<li><a name="a128"></a>        <span class="src-var">$retval </span>= <span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a129"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;new_content_content_type&quot;</span><span class="src-sym">;</span></li>
<li><a name="a130"></a>        <span class="src-var">$content_type </span>= <span class="src-id"><a href="../WiFiDogAuthServer/FormSelectGenerator.html">FormSelectGenerator</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/FormSelectGenerator.html#methodgetResult">getResult</a><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-str">&quot;Content&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a131"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)</span></li>
<li><a name="a132"></a>        <span class="src-sym">{</span></li>
<li><a name="a133"></a>            <span class="src-var">$retval </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">createNewObject</span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a134"></a>        <span class="src-sym">}</span></li>
<li><a name="a135"></a>&nbsp;</li>
<li><a name="a136"></a>        <span class="src-key">return </span><span class="src-var">$retval</span><span class="src-sym">;</span></li>
<li><a name="a137"></a>    <span class="src-sym">}</span></li>
<li><a name="a138"></a>&nbsp;</li>
<li><a name="a139"></a>    <span class="src-doc">/** Get the Content object, specific to it's content type</span></li>
<li><a name="a140"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$content_id </span><span class="src-doc">The content id</span></li>
<li><a name="a141"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">the </span><span class="src-doc">Content object, or null if there was an error (an exception is also thrown)</span></li>
<li><a name="a142"></a><span class="src-doc">     */</span></li>
<li><a name="a143"></a>    <span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetObject">getObject</a><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span></li>
<li><a name="a144"></a>    <span class="src-sym">{</span></li>
<li><a name="a145"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a146"></a>        <span class="src-var">$content_id </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a147"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> <span class="src-id">content_type</span> <span class="src-id">FROM</span> <span class="src-id">content</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$content_id</span>'</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a148"></a>        <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUniqueRes</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$row</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a149"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$row </span>== <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a150"></a>        <span class="src-sym">{</span></li>
<li><a name="a151"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;The content with the following id could not be found in the database: &quot;</span><span class="src-sym">)</span>.<span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a152"></a>        <span class="src-sym">}</span></li>
<li><a name="a153"></a>        <span class="src-var">$content_type </span>= <span class="src-var">$row</span><span class="src-sym">[</span><span class="src-str">'content_type'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a154"></a>        <span class="src-var">$object </span>= <span class="src-key">new </span><span class="src-var">$content_type </span><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a155"></a>        <span class="src-key">return </span><span class="src-var">$object</span><span class="src-sym">;</span></li>
<li><a name="a156"></a>    <span class="src-sym">}</span></li>
<li><a name="a157"></a>&nbsp;</li>
<li><a name="a158"></a>    <span class="src-doc">/** Get the list of available content type on the system</span></li>
<li><a name="a159"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">an </span><span class="src-doc">array of class names */</span></li>
<li><a name="a160"></a>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetAvailableContentTypes">getAvailableContentTypes</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a161"></a>    <span class="src-sym">{</span></li>
<li><a name="a162"></a>        <span class="src-var">$dir </span>= <span class="src-id"><a href="../WiFiDogAuthServer/_wifidog_install_php.html#defineBASEPATH">BASEPATH</a></span>.<span class="src-str">'classes/Content'</span><span class="src-sym">;</span></li>
<li><a name="a163"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$dir_handle </span>= <span class="src-sym">@</span><a href="http://www.php.net/opendir">opendir</a><span class="src-sym">(</span><span class="src-var">$dir</span><span class="src-sym">))</span></li>
<li><a name="a164"></a>        <span class="src-sym">{</span></li>
<li><a name="a165"></a>            <span class="src-var">$content_types </span>= <span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a166"></a>&nbsp;</li>
<li><a name="a167"></a>            <span class="src-comm">/* This is the correct way to loop over the directory. */</span></li>
<li><a name="a168"></a>            <span class="src-key">while </span><span class="src-sym">(</span><span class="src-id">false </span>!== <span class="src-sym">(</span><span class="src-var">$sub_dir </span>= <a href="http://www.php.net/readdir">readdir</a><span class="src-sym">(</span><span class="src-var">$dir_handle</span><span class="src-sym">)))</span></li>
<li><a name="a169"></a>            <span class="src-sym">{</span></li>
<li><a name="a170"></a>                <span class="src-comm">// Loop through sub-directories of Content</span></li>
<li><a name="a171"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$sub_dir </span>!= <span class="src-str">'.' </span>&amp;&amp; <span class="src-var">$sub_dir </span>!= <span class="src-str">'..' </span>&amp;&amp; <a href="http://www.php.net/is_dir">is_dir</a><span class="src-sym">(</span><span class="src-str">&quot;</span>{<span class="src-var">$dir</span><span class="src-str"></span><span class="src-sym">}</span>/{<span class="src-var">$sub_dir</span><span class="src-sym">}</span></span><span class="src-str">&quot;</span><span class="src-sym">))</span></li>
<li><a name="a172"></a>                <span class="src-sym">{</span></li>
<li><a name="a173"></a>                    <span class="src-comm">// Only add directories containing corresponding initial Content class</span></li>
<li><a name="a174"></a>                    <span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/is_file">is_file</a><span class="src-sym">(</span><span class="src-str">&quot;</span>{<span class="src-var">$dir</span><span class="src-str"></span><span class="src-sym">}</span>/{<span class="src-var">$sub_dir</span><span class="src-sym">}</span>/{<span class="src-var">$sub_dir</span><span class="src-sym">}</span>.<span class="src-id">php</span></span><span class="src-str">&quot;</span><span class="src-sym">))</span></li>
<li><a name="a175"></a>                        <span class="src-var">$content_types</span><span class="src-sym">[</span><span class="src-sym">] </span>= <span class="src-var">$sub_dir</span><span class="src-sym">;</span></li>
<li><a name="a176"></a>                <span class="src-sym">}</span></li>
<li><a name="a177"></a>            <span class="src-sym">}</span></li>
<li><a name="a178"></a>            <a href="http://www.php.net/closedir">closedir</a><span class="src-sym">(</span><span class="src-var">$dir_handle</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a179"></a>        <span class="src-sym">}</span></li>
<li><a name="a180"></a>        <span class="src-key">else</span></li>
<li><a name="a181"></a>        <span class="src-sym">{</span></li>
<li><a name="a182"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">'Unable to open directory '</span><span class="src-sym">)</span>.<span class="src-var">$dir</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a183"></a>        <span class="src-sym">}</span></li>
<li><a name="a184"></a>&nbsp;</li>
<li><a name="a185"></a>        <span class="src-comm">// Cleanup PHP file extensions and sort the result array</span></li>
<li><a name="a186"></a>        <span class="src-var">$content_types </span>= <a href="http://www.php.net/str_ireplace">str_ireplace</a><span class="src-sym">(</span><span class="src-str">'.php'</span><span class="src-sym">, </span><span class="src-str">''</span><span class="src-sym">, </span><span class="src-var">$content_types</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a187"></a>        <a href="http://www.php.net/sort">sort</a><span class="src-sym">(</span><span class="src-var">$content_types</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a188"></a>&nbsp;</li>
<li><a name="a189"></a>        <span class="src-key">return </span><span class="src-var">$content_types</span><span class="src-sym">;</span></li>
<li><a name="a190"></a>    <span class="src-sym">}</span></li>
<li><a name="a191"></a>&nbsp;</li>
<li><a name="a192"></a>    <span class="src-doc">/**</span></li>
<li><a name="a193"></a><span class="src-doc">     * Get all content, can be restricted to a given content type</span></li>
<li><a name="a194"></a><span class="src-doc">     */</span></li>
<li><a name="a195"></a>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetAllContent">getAllContent</a><span class="src-sym">(</span><span class="src-var">$content_type </span>= <span class="src-str">&quot;&quot;</span><span class="src-sym">)</span></li>
<li><a name="a196"></a>    <span class="src-sym">{</span></li>
<li><a name="a197"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a198"></a>        <span class="src-var">$where_clause </span>= <span class="src-str">&quot;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a199"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">))</span></li>
<li><a name="a200"></a>        <span class="src-sym">{</span></li>
<li><a name="a201"></a>            <span class="src-var">$content_type </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a202"></a>            <span class="src-var">$where_clause </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">WHERE</span> <span class="src-id">content_type</span> = '<span class="src-var">$content_type</span>'</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a203"></a>        <span class="src-sym">}</span></li>
<li><a name="a204"></a>        <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> <span class="src-id">content_id</span> <span class="src-id">FROM</span> <span class="src-id">content</span> <span class="src-var">$where_clause</span></span><span class="src-str">&quot;</span><span class="src-sym">, </span><span class="src-var">$rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a205"></a>        <span class="src-var">$objects </span>= <span class="src-key">array </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a206"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$rows</span><span class="src-sym">)</span></li>
<li><a name="a207"></a>            <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$rows </span><span class="src-key">as </span><span class="src-var">$row</span><span class="src-sym">)</span></li>
<li><a name="a208"></a>                <span class="src-var">$objects</span><span class="src-sym">[</span><span class="src-sym">] </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-str">'content_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a209"></a>        <span class="src-key">return </span><span class="src-var">$objects</span><span class="src-sym">;</span></li>
<li><a name="a210"></a>    <span class="src-sym">}</span></li>
<li><a name="a211"></a>&nbsp;</li>
<li><a name="a212"></a>    <span class="src-doc">/** Get a flexible interface to generate new content objects</span></li>
<li><a name="a213"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user_prefix </span><span class="src-doc">A identifier provided by the programmer to recognise it's generated html form</span></li>
<li><a name="a214"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$content_type </span><span class="src-doc">If set, the created content will be of this type, otherwise, the user will have to chose</span></li>
<li><a name="a215"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">html </span><span class="src-doc">markup</span></li>
<li><a name="a216"></a><span class="src-doc">     */</span></li>
<li><a name="a217"></a>    <span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetNewContentUI">getNewContentUI</a><span class="src-sym">(</span><span class="src-var">$user_prefix</span><span class="src-sym">, </span><span class="src-var">$content_type </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a218"></a>    <span class="src-sym">{</span></li>
<li><a name="a219"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a220"></a>        <span class="src-var">$html </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a221"></a>        <span class="src-var">$available_content_types </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getAvailableContentTypes</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a222"></a>&nbsp;</li>
<li><a name="a223"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">get_new_content_</span>{<span class="src-var">$user_prefix</span><span class="src-sym">}</span><span class="src-id">_content_type</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a224"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">))</span></li>
<li><a name="a225"></a>        <span class="src-sym">{</span></li>
<li><a name="a226"></a>            <span class="src-var">$html </span>.= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Content type: &quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a227"></a>            <span class="src-var">$i </span>= <span class="src-num">0</span><span class="src-sym">;</span></li>
<li><a name="a228"></a>            <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$available_content_types </span><span class="src-key">as </span><span class="src-var">$classname</span><span class="src-sym">)</span></li>
<li><a name="a229"></a>            <span class="src-sym">{</span></li>
<li><a name="a230"></a>                <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">] </span>= <span class="src-var">$classname</span><span class="src-sym">;</span></li>
<li><a name="a231"></a>                <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">] </span>= <span class="src-var">$classname</span><span class="src-sym">;</span></li>
<li><a name="a232"></a>                <span class="src-var">$i </span>++<span class="src-sym">;</span></li>
<li><a name="a233"></a>            <span class="src-sym">}</span></li>
<li><a name="a234"></a>            <span class="src-var">$html </span>.= <span class="src-id"><a href="../WiFiDogAuthServer/FormSelectGenerator.html">FormSelectGenerator</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/FormSelectGenerator.html#methodgenerateFromArray">generateFromArray</a><span class="src-sym">(</span><span class="src-var">$tab</span><span class="src-sym">, </span><span class="src-str">'TrivialLangstring'</span><span class="src-sym">, </span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a235"></a>        <span class="src-sym">}</span></li>
<li><a name="a236"></a>        <span class="src-key">else</span></li>
<li><a name="a237"></a>        <span class="src-sym">{</span></li>
<li><a name="a238"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-id">false </span>=== <a href="http://www.php.net/array_search">array_search</a><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">, </span><span class="src-var">$available_content_types</span><span class="src-sym">, </span><span class="src-id">true</span><span class="src-sym">))</span></li>
<li><a name="a239"></a>            <span class="src-sym">{</span></li>
<li><a name="a240"></a>                throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;The following content type isn't valid: &quot;</span><span class="src-sym">)</span>.<span class="src-var">$content_type</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a241"></a>            <span class="src-sym">}</span></li>
<li><a name="a242"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">hidden</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-var">$content_type</span>'&gt;</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a243"></a>        <span class="src-sym">}</span></li>
<li><a name="a244"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">get_new_content_</span>{<span class="src-var">$user_prefix</span><span class="src-sym">}</span><span class="src-id">_add</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a245"></a>&nbsp;</li>
<li><a name="a246"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)</span></li>
<li><a name="a247"></a>        <span class="src-sym">{</span></li>
<li><a name="a248"></a>            <span class="src-var">$value </span>= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Add a&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;</span><span class="src-str"> <span class="src-var">$content_type</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a249"></a>        <span class="src-sym">}</span></li>
<li><a name="a250"></a>        <span class="src-key">else</span></li>
<li><a name="a251"></a>        <span class="src-sym">{</span></li>
<li><a name="a252"></a>            <span class="src-var">$value </span>= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Add&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a253"></a>        <span class="src-sym">}</span></li>
<li><a name="a254"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-var">$value</span>'&gt;</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a255"></a>        <span class="src-key">return </span><span class="src-var">$html</span><span class="src-sym">;</span></li>
<li><a name="a256"></a>    <span class="src-sym">}</span></li>
<li><a name="a257"></a>&nbsp;</li>
<li><a name="a258"></a>    <span class="src-doc">/** Get the created Content object, IF one was created</span></li>
<li><a name="a259"></a><span class="src-doc">     * OR Get existing content ( depending on what the user clicked )</span></li>
<li><a name="a260"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user_prefix </span><span class="src-doc">A identifier provided by the programmer to recognise it's generated form</span></li>
<li><a name="a261"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$associate_existing_content </span><span class="src-doc">boolean if true allows to get existing</span></li>
<li><a name="a262"></a><span class="src-doc">     *  object</span></li>
<li><a name="a263"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">the </span><span class="src-doc">Content object, or null if the user didn't greate one</span></li>
<li><a name="a264"></a><span class="src-doc">     */</span></li>
<li><a name="a265"></a>    <span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodprocessNewContentUI">processNewContentUI</a><span class="src-sym">(</span><span class="src-var">$user_prefix</span><span class="src-sym">, </span><span class="src-var">$associate_existing_content </span>= <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a266"></a>    <span class="src-sym">{</span></li>
<li><a name="a267"></a>        <span class="src-var">$object </span>= <span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a268"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$associate_existing_content </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a269"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_add</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a270"></a>        <span class="src-key">else</span></li>
<li><a name="a271"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">get_new_content_</span>{<span class="src-var">$user_prefix</span><span class="src-sym">}</span><span class="src-id">_add</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a272"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">] </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a273"></a>        <span class="src-sym">{</span></li>
<li><a name="a274"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$associate_existing_content </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a275"></a>                <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a276"></a>            <span class="src-key">else</span></li>
<li><a name="a277"></a>                <span class="src-var">$name </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">get_new_content_</span>{<span class="src-var">$user_prefix</span><span class="src-sym">}</span><span class="src-id">_content_type</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a278"></a>&nbsp;</li>
<li><a name="a279"></a>            <span class="src-comm">// The result can be either a Content type or a Content ID depending on the form ( associate_existing_content or NOT )</span></li>
<li><a name="a280"></a>            <span class="src-var">$content_ui_result </span>= <span class="src-id"><a href="../WiFiDogAuthServer/FormSelectGenerator.html">FormSelectGenerator</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/FormSelectGenerator.html#methodgetResult">getResult</a><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a281"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$associate_existing_content </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a282"></a>                <span class="src-var">$object </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$content_ui_result</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a283"></a>            <span class="src-key">else</span></li>
<li><a name="a284"></a>                <span class="src-var">$object </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">createNewObject</span><span class="src-sym">(</span><span class="src-var">$content_ui_result</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a285"></a>        <span class="src-sym">}</span></li>
<li><a name="a286"></a>        <span class="src-key">return </span><span class="src-var">$object</span><span class="src-sym">;</span></li>
<li><a name="a287"></a>    <span class="src-sym">}</span></li>
<li><a name="a288"></a>&nbsp;</li>
<li><a name="a289"></a>    <span class="src-doc">/** Get a flexible interface to manage content linked to a node, a network or anything else</span></li>
<li><a name="a290"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user_prefix </span><span class="src-doc">A identifier provided by the programmer to recognise it's generated html form</span></li>
<li><a name="a291"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$content_type </span><span class="src-doc">If set, the created content will be of this type, otherwise, the user will have to chose</span></li>
<li><a name="a292"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">html </span><span class="src-doc">markup</span></li>
<li><a name="a293"></a><span class="src-doc">     */</span></li>
<li><a name="a294"></a>    <span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetLinkedContentUI">getLinkedContentUI</a><span class="src-sym">(</span><span class="src-var">$user_prefix</span><span class="src-sym">, </span><span class="src-var">$link_table</span><span class="src-sym">, </span><span class="src-var">$link_table_obj_key_col</span><span class="src-sym">, </span><span class="src-var">$link_table_obj_key</span><span class="src-sym">, </span><span class="src-var">$display_location</span><span class="src-sym">)</span></li>
<li><a name="a295"></a>    <span class="src-sym">{</span></li>
<li><a name="a296"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a297"></a>        <span class="src-var">$html </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a298"></a>        <span class="src-var">$link_table </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$link_table</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a299"></a>        <span class="src-var">$link_table_obj_key_col </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$link_table_obj_key_col</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a300"></a>        <span class="src-var">$link_table_obj_key </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$link_table_obj_key</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a301"></a>        <span class="src-var">$display_location </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$display_location</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a302"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_display_location</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a303"></a>&nbsp;</li>
<li><a name="a304"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">hidden</span>' <span class="src-id">name</span>='{<span class="src-var">$name</span><span class="src-sym">}</span>' <span class="src-id">value</span>='{<span class="src-var">$display_location</span><span class="src-sym">}</span>'&gt;\n</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a305"></a>        <span class="src-var">$current_content_sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-var">$link_table</span> <span class="src-id">WHERE</span> <span class="src-var">$link_table_obj_key_col</span>='<span class="src-var">$link_table_obj_key</span>' <span class="src-id">AND</span> <span class="src-id">display_location</span>='<span class="src-var">$display_location</span>' <span class="src-id">ORDER</span> <span class="src-id">BY</span> <span class="src-id">subscribe_timestamp</span> <span class="src-id">DESC</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a306"></a>        <span class="src-var">$rows </span>= <span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a307"></a>        <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$current_content_sql</span><span class="src-sym">, </span><span class="src-var">$rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a308"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;ul class='admin_section_list'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a309"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$rows</span><span class="src-sym">)</span></li>
<li><a name="a310"></a>            <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$rows </span><span class="src-key">as </span><span class="src-var">$row</span><span class="src-sym">)</span></li>
<li><a name="a311"></a>            <span class="src-sym">{</span></li>
<li><a name="a312"></a>                <span class="src-var">$content </span>= <span class="src-id"><a href="../WiFiDogAuthServer/Content.html">Content</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/Content.html#methodgetObject">getObject</a><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-str">'content_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a313"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;li class='admin_section_list_item'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a314"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a315"></a>                <span class="src-var">$html </span>.= <span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">getListUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a316"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a317"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a318"></a>                <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_</span></span><span class="src-str">&quot;</span>.<span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_edit&quot;</span><span class="src-sym">;</span></li>
<li><a name="a319"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">button</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='</span><span class="src-str">&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Edit&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;' onClick='window.location.href = \&quot;&quot;</span>.<span class="src-id"><a href="../WiFiDogAuthServer/_wifidog_include_common_php.html#defineGENERIC_OBJECT_ADMIN_ABS_HREF">GENERIC_OBJECT_ADMIN_ABS_HREF</a></span>.<span class="src-str">&quot;?object_class=Content&amp;action=edit&amp;object_id=&quot;</span>.<span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;\&quot;;'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a320"></a>                <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_</span></span><span class="src-str">&quot;</span>.<span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a321"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='</span><span class="src-str">&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Remove&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a322"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a323"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/li&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a324"></a>            <span class="src-sym">}</span></li>
<li><a name="a325"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;li class='admin_section_list_item'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a326"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_new_existing</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a327"></a>        <span class="src-var">$html </span>.= <span class="src-id"><a href="../WiFiDogAuthServer/Content.html">Content</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/Content.html#methodgetSelectContentUI">getSelectContentUI</a><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">AND</span> <span class="src-id">content_id</span> <span class="src-id">NOT</span> <span class="src-id">IN</span> (<span class="src-id">SELECT</span> <span class="src-id">content_id</span> <span class="src-id">FROM</span> <span class="src-var">$link_table</span> <span class="src-id">WHERE</span> <span class="src-var">$link_table_obj_key_col</span>='<span class="src-var">$link_table_obj_key</span>')</span><span class="src-str">&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a328"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_new_display_location</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a329"></a>&nbsp;</li>
<li><a name="a330"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">hidden</span>' <span class="src-id">name</span>='{<span class="src-var">$name</span><span class="src-sym">}</span>' <span class="src-id">value</span>='{<span class="src-var">$display_location</span><span class="src-sym">}</span>'&gt;\n</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a331"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_new_existing_submit</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a332"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='</span><span class="src-str">&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Add&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a333"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/li&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a334"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;li class='admin_section_list_item'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a335"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;Add new content: &quot;</span><span class="src-sym">;</span></li>
<li><a name="a336"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_new</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a337"></a>        <span class="src-var">$html </span>.= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getNewContentUI</span><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-var">$content_type </span>= <span class="src-id">null</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a338"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/li&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a339"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/ul&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a340"></a>&nbsp;</li>
<li><a name="a341"></a>        <span class="src-key">return </span><span class="src-var">$html</span><span class="src-sym">;</span></li>
<li><a name="a342"></a>    <span class="src-sym">}</span></li>
<li><a name="a343"></a>&nbsp;</li>
<li><a name="a344"></a>    <span class="src-doc">/** Get the created Content object, IF one was created</span></li>
<li><a name="a345"></a><span class="src-doc">     * OR Get existing content ( depending on what the user clicked )</span></li>
<li><a name="a346"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user_prefix </span><span class="src-doc">A identifier provided by the programmer to recognise it's generated form</span></li>
<li><a name="a347"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$associate_existing_content </span><span class="src-doc">boolean if true allows to get existing</span></li>
<li><a name="a348"></a><span class="src-doc">     *  object</span></li>
<li><a name="a349"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">the </span><span class="src-doc">Content object, or null if the user didn't greate one</span></li>
<li><a name="a350"></a><span class="src-doc">     */</span></li>
<li><a name="a351"></a>    <span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodprocessLinkedContentUI">processLinkedContentUI</a><span class="src-sym">(</span><span class="src-var">$user_prefix</span><span class="src-sym">, </span><span class="src-var">$link_table</span><span class="src-sym">, </span><span class="src-var">$link_table_obj_key_col</span><span class="src-sym">, </span><span class="src-var">$link_table_obj_key</span><span class="src-sym">)</span></li>
<li><a name="a352"></a>    <span class="src-sym">{</span></li>
<li><a name="a353"></a>&nbsp;</li>
<li><a name="a354"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a355"></a>        <span class="src-var">$link_table </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$link_table</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a356"></a>        <span class="src-var">$link_table_obj_key_col </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$link_table_obj_key_col</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a357"></a>        <span class="src-var">$link_table_obj_key </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$link_table_obj_key</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a358"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_display_location</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a359"></a>        <span class="src-var">$display_location </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a360"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_new_display_location</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a361"></a>        <span class="src-var">$display_location_new </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a362"></a>        <span class="src-var">$current_content_sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-var">$link_table</span> <span class="src-id">WHERE</span> <span class="src-var">$link_table_obj_key_col</span>='<span class="src-var">$link_table_obj_key</span>' <span class="src-id">AND</span> <span class="src-id">display_location</span>='<span class="src-var">$display_location</span>' <span class="src-id">ORDER</span> <span class="src-id">BY</span> <span class="src-id">subscribe_timestamp</span> <span class="src-id">DESC</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a363"></a>        <span class="src-var">$rows </span>= <span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a364"></a>        <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$current_content_sql</span><span class="src-sym">, </span><span class="src-var">$rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a365"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$rows</span><span class="src-sym">)</span></li>
<li><a name="a366"></a>            <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$rows </span><span class="src-key">as </span><span class="src-var">$row</span><span class="src-sym">)</span></li>
<li><a name="a367"></a>            <span class="src-sym">{</span></li>
<li><a name="a368"></a>                <span class="src-var">$content </span>= <span class="src-id"><a href="../WiFiDogAuthServer/Content.html">Content</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/Content.html#methodgetObject">getObject</a><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">[</span><span class="src-str">'content_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a369"></a>                <span class="src-var">$content_id </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a370"></a>                <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_</span></span><span class="src-str">&quot;</span>.<span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a371"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a372"></a>                <span class="src-sym">{</span></li>
<li><a name="a373"></a>                    <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">DELETE</span> <span class="src-id">FROM</span> <span class="src-var">$link_table</span> <span class="src-id">WHERE</span> <span class="src-var">$link_table_obj_key_col</span>='<span class="src-var">$link_table_obj_key</span>' <span class="src-id">AND</span> <span class="src-id">content_id</span> = '<span class="src-var">$content_id</span>'</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a374"></a>                    <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a375"></a>                <span class="src-sym">}</span></li>
<li><a name="a376"></a>            <span class="src-sym">}</span></li>
<li><a name="a377"></a>&nbsp;</li>
<li><a name="a378"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_new_existing_submit</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a379"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a380"></a>        <span class="src-sym">{</span></li>
<li><a name="a381"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_new_existing</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a382"></a>            <span class="src-var">$content </span>= <span class="src-id"><a href="../WiFiDogAuthServer/Content.html">Content</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/Content.html#methodprocessSelectContentUI">processSelectContentUI</a><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a383"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content</span><span class="src-sym">)</span></li>
<li><a name="a384"></a>            <span class="src-sym">{</span></li>
<li><a name="a385"></a>                <span class="src-var">$content_id </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a386"></a>                <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">INSERT</span> <span class="src-id">INTO</span> <span class="src-var">$link_table</span> (<span class="src-id">content_id</span>, <span class="src-var">$link_table_obj_key_col</span>, <span class="src-id">display_location</span>) <span class="src-id">VALUES</span> ('<span class="src-var">$content_id</span>', '<span class="src-var">$link_table_obj_key</span>', '<span class="src-var">$display_location_new</span>');\n</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a387"></a>                <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a388"></a>            <span class="src-sym">}</span></li>
<li><a name="a389"></a>        <span class="src-sym">}</span></li>
<li><a name="a390"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span><span class="src-id">_new</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a391"></a>        <span class="src-var">$content </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">processNewContentUI</span><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a392"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content</span><span class="src-sym">)</span></li>
<li><a name="a393"></a>        <span class="src-sym">{</span></li>
<li><a name="a394"></a>            <span class="src-var">$content_id </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a395"></a>            <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">INSERT</span> <span class="src-id">INTO</span> <span class="src-var">$link_table</span> (<span class="src-id">content_id</span>, <span class="src-var">$link_table_obj_key_col</span>, <span class="src-id">display_location</span>) <span class="src-id">VALUES</span> ('<span class="src-var">$content_id</span>', '<span class="src-var">$link_table_obj_key</span>', '<span class="src-var">$display_location_new</span>');\n</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a396"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a397"></a>        <span class="src-sym">}</span></li>
<li><a name="a398"></a>&nbsp;</li>
<li><a name="a399"></a>    <span class="src-sym">}</span></li>
<li><a name="a400"></a>&nbsp;</li>
<li><a name="a401"></a>    <span class="src-doc">/** Get an interface to pick content from all persistent content.</span></li>
<li><a name="a402"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user_prefix </span><span class="src-doc">A identifier provided by the programmer to recognise it's generated html form</span></li>
<li><a name="a403"></a><span class="src-doc">      @param $sql_additional_where Addidional where conditions to restrict the candidate objects</span></li>
<li><a name="a404"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">html </span><span class="src-doc">markup</span></li>
<li><a name="a405"></a><span class="src-doc">    */</span></li>
<li><a name="a406"></a>    <span class="src-key">public </span><span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetSelectContentUI">getSelectContentUI</a><span class="src-sym">(</span><span class="src-var">$user_prefix</span><span class="src-sym">, </span><span class="src-var">$sql_additional_where </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a407"></a>    <span class="src-sym">{</span></li>
<li><a name="a408"></a>        <span class="src-var">$html </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a409"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a410"></a>        <span class="src-var">$html </span>.= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Select existing Content : &quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a411"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a412"></a>        <span class="src-var">$retval </span>= <span class="src-key">array </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a413"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-id">content</span> <span class="src-id">WHERE</span> <span class="src-id">is_persistent</span>=<span class="src-id">TRUE</span> <span class="src-var">$sql_additional_where</span> <span class="src-id">ORDER</span> <span class="src-id">BY</span> <span class="src-id">creation_timestamp</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a414"></a>        <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$content_rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a415"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_rows </span>!= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a416"></a>        <span class="src-sym">{</span></li>
<li><a name="a417"></a>            <span class="src-var">$i </span>= <span class="src-num">0</span><span class="src-sym">;</span></li>
<li><a name="a418"></a>            <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$content_rows </span><span class="src-key">as </span><span class="src-var">$content_row</span><span class="src-sym">)</span></li>
<li><a name="a419"></a>            <span class="src-sym">{</span></li>
<li><a name="a420"></a>                <span class="src-var">$content </span>= <span class="src-id"><a href="../WiFiDogAuthServer/Content.html">Content</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/Content.html#methodgetObject">getObject</a><span class="src-sym">(</span><span class="src-var">$content_row</span><span class="src-sym">[</span><span class="src-str">'content_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a421"></a>                <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">] </span>= <span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a422"></a>                <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">] </span>= <span class="src-var">$content</span><span class="src-sym">-&gt;</span><span class="src-id">__toString</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot; (&quot;</span>.<a href="http://www.php.net/get_class">get_class</a><span class="src-sym">(</span><span class="src-var">$content</span><span class="src-sym">)</span>.<span class="src-str">&quot;)&quot;</span><span class="src-sym">;</span></li>
<li><a name="a423"></a>                <span class="src-var">$i </span>++<span class="src-sym">;</span></li>
<li><a name="a424"></a>            <span class="src-sym">}</span></li>
<li><a name="a425"></a>            <span class="src-var">$html </span>.= <span class="src-id"><a href="../WiFiDogAuthServer/FormSelectGenerator.html">FormSelectGenerator</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/FormSelectGenerator.html#methodgenerateFromArray">generateFromArray</a><span class="src-sym">(</span><span class="src-var">$tab</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">, </span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a426"></a>&nbsp;</li>
<li><a name="a427"></a>        <span class="src-sym">}</span></li>
<li><a name="a428"></a>        <span class="src-key">else</span></li>
<li><a name="a429"></a>        <span class="src-sym">{</span></li>
<li><a name="a430"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='warningmsg'&gt;&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Sorry, no content available in the database&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a431"></a>        <span class="src-sym">}</span></li>
<li><a name="a432"></a>        <span class="src-key">return </span><span class="src-var">$html</span><span class="src-sym">;</span></li>
<li><a name="a433"></a>    <span class="src-sym">}</span></li>
<li><a name="a434"></a>&nbsp;</li>
<li><a name="a435"></a>    <span class="src-doc">/** Get the selected Content object.</span></li>
<li><a name="a436"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user_prefix </span><span class="src-doc">A identifier provided by the programmer to recognise it's generated form</span></li>
<li><a name="a437"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">the </span><span class="src-doc">Content object</span></li>
<li><a name="a438"></a><span class="src-doc">     */</span></li>
<li><a name="a439"></a>    <span class="src-key">static </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodprocessSelectContentUI">processSelectContentUI</a><span class="src-sym">(</span><span class="src-var">$user_prefix</span><span class="src-sym">)</span></li>
<li><a name="a440"></a>    <span class="src-sym">{</span></li>
<li><a name="a441"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;</span>{<span class="src-var">$user_prefix</span><span class="src-str"></span><span class="src-sym">}</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a442"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a443"></a>            <span class="src-key">return </span><span class="src-id"><a href="../WiFiDogAuthServer/Content.html">Content</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/Content.html#methodgetObject">getObject</a><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a444"></a>        <span class="src-key">else</span></li>
<li><a name="a445"></a>            <span class="src-key">return </span><span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a446"></a>    <span class="src-sym">}</span></li>
<li><a name="a447"></a>&nbsp;</li>
<li><a name="a448"></a>    <span class="src-key">private </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#method__construct">__construct</a><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span></li>
<li><a name="a449"></a>    <span class="src-sym">{</span></li>
<li><a name="a450"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a451"></a>&nbsp;</li>
<li><a name="a452"></a>        <span class="src-var">$content_id </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a453"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-id">content</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$content_id</span>'</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a454"></a>        <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUniqueRes</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$row</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a455"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$row </span>== <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a456"></a>        <span class="src-sym">{</span></li>
<li><a name="a457"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;The content with the following id could not be found in the database: &quot;</span><span class="src-sym">)</span>.<span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a458"></a>        <span class="src-sym">}</span></li>
<li><a name="a459"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a> = <span class="src-var">$row</span><span class="src-sym">;</span></li>
<li><a name="a460"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a> = <span class="src-var">$row</span><span class="src-sym">[</span><span class="src-str">'content_id'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a461"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_type">content_type</a> = <span class="src-var">$row</span><span class="src-sym">[</span><span class="src-str">'content_type'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a462"></a>&nbsp;</li>
<li><a name="a463"></a>        <span class="src-comm">// By default Content display logging is enabled</span></li>
<li><a name="a464"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodsetLoggingStatus">setLoggingStatus</a><span class="src-sym">(</span><span class="src-id">true</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a465"></a>    <span class="src-sym">}</span></li>
<li><a name="a466"></a>&nbsp;</li>
<li><a name="a467"></a>    <span class="src-doc">/** A short string representation of the content */</span></li>
<li><a name="a467"></a>&nbsp;</li>
<li><a name="a468"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#method__toString">__toString</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a469"></a>    <span class="src-sym">{</span></li>
<li><a name="a470"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a471"></a>        <span class="src-sym">{</span></li>
<li><a name="a472"></a>            <span class="src-var">$string </span>= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Untitled content&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a473"></a>        <span class="src-sym">}</span></li>
<li><a name="a474"></a>        <span class="src-key">else</span></li>
<li><a name="a475"></a>        <span class="src-sym">{</span></li>
<li><a name="a476"></a>            <span class="src-var">$title </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a477"></a>            <span class="src-var">$string </span>= <span class="src-var">$title</span><span class="src-sym">-&gt;</span><span class="src-id">__toString</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a478"></a>        <span class="src-sym">}</span></li>
<li><a name="a479"></a>        <span class="src-key">return </span><span class="src-var">$string</span><span class="src-sym">;</span></li>
<li><a name="a480"></a>    <span class="src-sym">}</span></li>
<li><a name="a481"></a>&nbsp;</li>
<li><a name="a482"></a>    <span class="src-doc">/** Get the true object type represented by this isntance</span></li>
<li><a name="a483"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">an </span><span class="src-doc">array of class names */</span></li>
<li><a name="a484"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetObjectType">getObjectType</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a485"></a>    <span class="src-sym">{</span></li>
<li><a name="a486"></a>        <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_type">content_type</a><span class="src-sym">;</span></li>
<li><a name="a487"></a>    <span class="src-sym">}</span></li>
<li><a name="a488"></a>&nbsp;</li>
<li><a name="a489"></a>    <span class="src-doc">/**</span></li>
<li><a name="a490"></a><span class="src-doc">     * Get content title</span></li>
<li><a name="a491"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">content </span><span class="src-doc">a content sub-class</span></li>
<li><a name="a492"></a><span class="src-doc">     */</span></li>
<li><a name="a493"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetTitle">getTitle</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a494"></a>    <span class="src-sym">{</span></li>
<li><a name="a495"></a>        try</li>
<li><a name="a496"></a>        <span class="src-sym">{</span></li>
<li><a name="a497"></a>            <span class="src-key">return </span><span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a498"></a>        <span class="src-sym">}</span></li>
<li><a name="a499"></a>        catch <span class="src-sym">(</span><span class="src-id">Exception </span><span class="src-var">$e</span><span class="src-sym">)</span></li>
<li><a name="a500"></a>        <span class="src-sym">{</span></li>
<li><a name="a501"></a>            <span class="src-key">return </span><span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a502"></a>        <span class="src-sym">}</span></li>
<li><a name="a503"></a>    <span class="src-sym">}</span></li>
<li><a name="a504"></a>&nbsp;</li>
<li><a name="a505"></a>    <span class="src-doc">/**</span></li>
<li><a name="a506"></a><span class="src-doc">     * Get content description</span></li>
<li><a name="a507"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">content </span><span class="src-doc">a content sub-class</span></li>
<li><a name="a508"></a><span class="src-doc">     */</span></li>
<li><a name="a509"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetDescription">getDescription</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a510"></a>    <span class="src-sym">{</span></li>
<li><a name="a511"></a>        try</li>
<li><a name="a512"></a>        <span class="src-sym">{</span></li>
<li><a name="a513"></a>            <span class="src-key">return </span><span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'description'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a514"></a>        <span class="src-sym">}</span></li>
<li><a name="a515"></a>        catch <span class="src-sym">(</span><span class="src-id">Exception </span><span class="src-var">$e</span><span class="src-sym">)</span></li>
<li><a name="a516"></a>        <span class="src-sym">{</span></li>
<li><a name="a517"></a>            <span class="src-key">return </span><span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a518"></a>        <span class="src-sym">}</span></li>
<li><a name="a519"></a>    <span class="src-sym">}</span></li>
<li><a name="a520"></a>&nbsp;</li>
<li><a name="a521"></a>    <span class="src-doc">/**</span></li>
<li><a name="a522"></a><span class="src-doc">     * Get content long description</span></li>
<li><a name="a523"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">content </span><span class="src-doc">a content sub-class</span></li>
<li><a name="a524"></a><span class="src-doc">     */</span></li>
<li><a name="a525"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetLongDescription">getLongDescription</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a526"></a>    <span class="src-sym">{</span></li>
<li><a name="a527"></a>        try</li>
<li><a name="a528"></a>        <span class="src-sym">{</span></li>
<li><a name="a529"></a>            <span class="src-key">return </span><span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'long_description'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a530"></a>        <span class="src-sym">}</span></li>
<li><a name="a531"></a>        catch <span class="src-sym">(</span><span class="src-id">Exception </span><span class="src-var">$e</span><span class="src-sym">)</span></li>
<li><a name="a532"></a>        <span class="src-sym">{</span></li>
<li><a name="a533"></a>            <span class="src-key">return </span><span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a534"></a>        <span class="src-sym">}</span></li>
<li><a name="a535"></a>    <span class="src-sym">}</span></li>
<li><a name="a536"></a>&nbsp;</li>
<li><a name="a537"></a>    <span class="src-doc">/**</span></li>
<li><a name="a538"></a><span class="src-doc">     * Get content project info</span></li>
<li><a name="a539"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">content </span><span class="src-doc">a content sub-class</span></li>
<li><a name="a540"></a><span class="src-doc">     */</span></li>
<li><a name="a541"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetProjectInfo">getProjectInfo</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a542"></a>    <span class="src-sym">{</span></li>
<li><a name="a543"></a>        try</li>
<li><a name="a544"></a>        <span class="src-sym">{</span></li>
<li><a name="a545"></a>            <span class="src-key">return </span><span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'project_info'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a546"></a>        <span class="src-sym">}</span></li>
<li><a name="a547"></a>        catch <span class="src-sym">(</span><span class="src-id">Exception </span><span class="src-var">$e</span><span class="src-sym">)</span></li>
<li><a name="a548"></a>        <span class="src-sym">{</span></li>
<li><a name="a549"></a>            <span class="src-key">return </span><span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a550"></a>        <span class="src-sym">}</span></li>
<li><a name="a551"></a>    <span class="src-sym">}</span></li>
<li><a name="a552"></a>&nbsp;</li>
<li><a name="a553"></a>    <span class="src-doc">/**</span></li>
<li><a name="a554"></a><span class="src-doc">     * Get content sponsor info</span></li>
<li><a name="a555"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">content </span><span class="src-doc">a content sub-class</span></li>
<li><a name="a556"></a><span class="src-doc">     */</span></li>
<li><a name="a557"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetSponsorInfo">getSponsorInfo</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a558"></a>    <span class="src-sym">{</span></li>
<li><a name="a559"></a>        try</li>
<li><a name="a560"></a>        <span class="src-sym">{</span></li>
<li><a name="a561"></a>            <span class="src-key">return </span><span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'sponsor_info'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a562"></a>        <span class="src-sym">}</span></li>
<li><a name="a563"></a>        catch <span class="src-sym">(</span><span class="src-id">Exception </span><span class="src-var">$e</span><span class="src-sym">)</span></li>
<li><a name="a564"></a>        <span class="src-sym">{</span></li>
<li><a name="a565"></a>            <span class="src-key">return </span><span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a566"></a>        <span class="src-sym">}</span></li>
<li><a name="a567"></a>    <span class="src-sym">}</span></li>
<li><a name="a568"></a>&nbsp;</li>
<li><a name="a569"></a>    <span class="src-doc">/** Set the object type of this object</span></li>
<li><a name="a570"></a><span class="src-doc">     * Note that after using this, the object must be re-instanciated to have the right type</span></li>
<li><a name="a571"></a><span class="src-doc">     * */</span></li>
<li><a name="a571"></a>&nbsp;</li>
<li><a name="a572"></a>    <span class="src-key">private </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodsetContentType">setContentType</a><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)</span></li>
<li><a name="a573"></a>    <span class="src-sym">{</span></li>
<li><a name="a574"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a575"></a>        <span class="src-var">$content_type </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a576"></a>        <span class="src-var">$available_content_types </span>= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getAvailableContentTypes</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a577"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-id">false </span>=== <a href="http://www.php.net/array_search">array_search</a><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">, </span><span class="src-var">$available_content_types</span><span class="src-sym">, </span><span class="src-id">true</span><span class="src-sym">))</span></li>
<li><a name="a578"></a>        <span class="src-sym">{</span></li>
<li><a name="a579"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;The following content type isn't valid: &quot;</span><span class="src-sym">)</span>.<span class="src-var">$content_type</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a580"></a>        <span class="src-sym">}</span></li>
<li><a name="a581"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">content_type</span> = '<span class="src-var">$content_type</span>' <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a582"></a>&nbsp;</li>
<li><a name="a583"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">))</span></li>
<li><a name="a584"></a>        <span class="src-sym">{</span></li>
<li><a name="a585"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Update was unsuccessfull (database error)&quot;</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a586"></a>        <span class="src-sym">}</span></li>
<li><a name="a587"></a>&nbsp;</li>
<li><a name="a588"></a>    <span class="src-sym">}</span></li>
<li><a name="a589"></a>&nbsp;</li>
<li><a name="a590"></a>    <span class="src-doc">/** Check if a user is one of the owners of the object</span></li>
<li><a name="a591"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user </span><span class="src-doc">The user to be added to the owners list</span></li>
<li><a name="a592"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$is_author </span><span class="src-doc">Optionnal, true or false.  Set to true if the user is one of the actual authors of the Content</span></li>
<li><a name="a593"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">true </span><span class="src-doc">on success, false on failure */</span></li>
<li><a name="a594"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodaddOwner">addOwner</a><span class="src-sym">(</span><span class="src-id">User </span><span class="src-var">$user</span><span class="src-sym">, </span><span class="src-var">$is_author </span>= <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a595"></a>    <span class="src-sym">{</span></li>
<li><a name="a596"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a597"></a>        <span class="src-var">$content_id </span>= <span class="src-str">&quot;'&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;'&quot;</span><span class="src-sym">;</span></li>
<li><a name="a598"></a>        <span class="src-var">$user_id </span>= <span class="src-str">&quot;'&quot;</span>.<span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">))</span>.<span class="src-str">&quot;'&quot;</span><span class="src-sym">;</span></li>
<li><a name="a599"></a>        <span class="src-var">$is_author </span>? <span class="src-var">$is_author </span>= <span class="src-str">'TRUE' </span>: <span class="src-var">$is_author </span>= <span class="src-str">'FALSE'</span><span class="src-sym">;</span></li>
<li><a name="a600"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">INSERT</span> <span class="src-id">INTO</span> <span class="src-id">content_has_owners</span> (<span class="src-id">content_id</span>, <span class="src-id">user_id</span>, <span class="src-id">is_author</span>) <span class="src-id">VALUES</span> (<span class="src-var">$content_id</span>, <span class="src-var">$user_id</span>, <span class="src-var">$is_author</span>)</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a601"></a>&nbsp;</li>
<li><a name="a602"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">))</span></li>
<li><a name="a603"></a>        <span class="src-sym">{</span></li>
<li><a name="a604"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">'Unable to insert the new Owner into database.'</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a605"></a>        <span class="src-sym">}</span></li>
<li><a name="a606"></a>&nbsp;</li>
<li><a name="a607"></a>        <span class="src-key">return </span><span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a608"></a>    <span class="src-sym">}</span></li>
<li><a name="a609"></a>&nbsp;</li>
<li><a name="a610"></a>    <span class="src-doc">/** Remove an owner of the content</span></li>
<li><a name="a611"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user </span><span class="src-doc">The user to be removed from the owners list</span></li>
<li><a name="a612"></a><span class="src-doc">     */</span></li>
<li><a name="a613"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methoddeleteOwner">deleteOwner</a><span class="src-sym">(</span><span class="src-id">User </span><span class="src-var">$user</span><span class="src-sym">, </span><span class="src-var">$is_author </span>= <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a614"></a>    <span class="src-sym">{</span></li>
<li><a name="a615"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a616"></a>        <span class="src-var">$content_id </span>= <span class="src-str">&quot;'&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;'&quot;</span><span class="src-sym">;</span></li>
<li><a name="a617"></a>        <span class="src-var">$user_id </span>= <span class="src-str">&quot;'&quot;</span>.<span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">))</span>.<span class="src-str">&quot;'&quot;</span><span class="src-sym">;</span></li>
<li><a name="a618"></a>&nbsp;</li>
<li><a name="a619"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">DELETE</span> <span class="src-id">FROM</span> <span class="src-id">content_has_owners</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>=<span class="src-var">$content_id</span> <span class="src-id">AND</span> <span class="src-id">user_id</span>=<span class="src-var">$user_id</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a620"></a>&nbsp;</li>
<li><a name="a621"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">))</span></li>
<li><a name="a622"></a>        <span class="src-sym">{</span></li>
<li><a name="a623"></a>            throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">'Unable to remove the owner from the database.'</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a624"></a>        <span class="src-sym">}</span></li>
<li><a name="a625"></a>&nbsp;</li>
<li><a name="a626"></a>        <span class="src-key">return </span><span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a627"></a>    <span class="src-sym">}</span></li>
<li><a name="a628"></a>&nbsp;</li>
<li><a name="a629"></a>    <span class="src-doc">/**</span></li>
<li><a name="a630"></a><span class="src-doc">     * Indicates display logging status</span></li>
<li><a name="a631"></a><span class="src-doc">     */</span></li>
<li><a name="a632"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetLoggingStatus">getLoggingStatus</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a633"></a>    <span class="src-sym">{</span></li>
<li><a name="a634"></a>        <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$is_logging_enabled">is_logging_enabled</a><span class="src-sym">;</span></li>
<li><a name="a635"></a>    <span class="src-sym">}</span></li>
<li><a name="a636"></a>&nbsp;</li>
<li><a name="a637"></a>    <span class="src-doc">/**</span></li>
<li><a name="a638"></a><span class="src-doc">     * Sets display logging status</span></li>
<li><a name="a639"></a><span class="src-doc">     */</span></li>
<li><a name="a640"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodsetLoggingStatus">setLoggingStatus</a><span class="src-sym">(</span><span class="src-var">$status</span><span class="src-sym">)</span></li>
<li><a name="a641"></a>    <span class="src-sym">{</span></li>
<li><a name="a642"></a>        <span class="src-key">if </span><span class="src-sym">(</span><a href="http://www.php.net/is_bool">is_bool</a><span class="src-sym">(</span><span class="src-var">$status</span><span class="src-sym">))</span></li>
<li><a name="a643"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$is_logging_enabled">is_logging_enabled</a> = <span class="src-var">$status</span><span class="src-sym">;</span></li>
<li><a name="a644"></a>    <span class="src-sym">}</span></li>
<li><a name="a645"></a>&nbsp;</li>
<li><a name="a646"></a>    <span class="src-doc">/** Get the PHP timestamp of the last time this content was displayed</span></li>
<li><a name="a647"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$user </span><span class="src-doc">User, Optional, if present, restrict to the selected user</span></li>
<li><a name="a648"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$node </span><span class="src-doc">Node, Optional, if present, restrict to the selected node</span></li>
<li><a name="a649"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">PHP </span><span class="src-doc">timestamp (seconds since UNIX epoch) if the content has been</span></li>
<li><a name="a650"></a><span class="src-doc">     *  displayed before, an empty string otherwise.</span></li>
<li><a name="a651"></a><span class="src-doc">     */</span></li>
<li><a name="a652"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/Content.html#methodgetLastDisplayTimestamp">getLastDisplayTimestamp</a><span class="src-sym">(</span><span class="src-var">$user </span>= <span class="src-id">null</span><span class="src-sym">, </span><span class="src-var">$node </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a653"></a>    <span class="src-sym">{</span></li>
<li><a name="a654"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a655"></a>        <span class="src-var">$retval </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a656"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> <span class="src-id">EXTRACT</span>(<span class="src-id">EPOCH</span> <span class="src-id">FROM</span> <span class="src-id">last_display_timestamp</span>) <span class="src-id">as</span> <span class="src-id">last_display_unix_timestamp</span> <span class="src-id">FROM</span> <span class="src-id">content_display_log</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='{<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span>' \n</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a657"></a>&nbsp;</li>
<li><a name="a658"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">)</span></span></li>
<li><a name="a659"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a660"></a></span><span class="src-str">            <span class="src-var">$user_id</span> = <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a661"></a>            <span class="src-var">$sql </span>.= </span><span class="src-str"><span class="src-str">"</span> <span class="src-id">AND</span> <span class="src-id">user_id</span> = '</span>{<span class="src-var">$user_id</span><span class="src-str"></span><span class="src-sym">}</span>' \n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a662"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a663"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">)</span></span></li>
<li><a name="a664"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a665"></a></span><span class="src-str">            <span class="src-var">$node_id</span> = <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a666"></a>            <span class="src-var">$sql </span>.= </span><span class="src-str"><span class="src-str">"</span> <span class="src-id">AND</span> <span class="src-id">node_id</span> = '</span>{<span class="src-var">$node_id</span><span class="src-str"></span><span class="src-sym">}</span>' \n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a667"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a668"></a></span><span class="src-str">        <span class="src-var">$sql</span> .= <span class="src-str">&quot; ORDER BY last_display_timestamp DESC &quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a669"></a></span><span class="src-str">        <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$log_rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a670"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$log_rows</span><span class="src-sym">)</span></li>
<li><a name="a671"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a672"></a></span><span class="src-str">            <span class="src-var">$retval</span> = <span class="src-var">$log_rows</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'last_display_unix_timestamp'</span><span class="src-sym">]</span><span class="src-sym">;</span></span></li>
<li><a name="a673"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a674"></a>&nbsp;</li>
<li><a name="a675"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$retval</span><span class="src-sym">;</span></span></li>
<li><a name="a676"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a677"></a>&nbsp;</li>
<li><a name="a678"></a></span><span class="src-str">    /** Is this Content element displayable at this hotspot, many classer override this</span></li>
<li><a name="a679"></a></span><span class="src-str">     * @param $node Node, optionnal</span></li>
<li><a name="a680"></a></span><span class="src-str">     * @return true or false */</span></li>
<li><a name="a681"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">isDisplayableAt</span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">)</span></span></li>
<li><a name="a682"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a683"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-id">true</span><span class="src-sym">;</span></span></li>
<li><a name="a684"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a685"></a>&nbsp;</li>
<li><a name="a686"></a></span><span class="src-str">    /** Check if a user is one of the owners of the object</span></li>
<li><a name="a687"></a></span><span class="src-str">     * @param $user User object:  the user to be tested.</span></li>
<li><a name="a688"></a></span><span class="src-str">     * @return true if the user is a owner, false if he isn't of the user is null */</span></li>
<li><a name="a689"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">isOwner</span><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">)</span></span></li>
<li><a name="a690"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a691"></a></span><span class="src-str">        <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a692"></a></span><span class="src-str">        <span class="src-var">$retval</span> = <span class="src-id">false</span><span class="src-sym">;</span></span></li>
<li><a name="a693"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$user</span> != <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a694"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a695"></a></span><span class="src-str">            <span class="src-var">$user_id</span> = <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a696"></a>            <span class="src-var">$sql </span>= </span><span class="src-str"><span class="src-str">"</span><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-id">content_has_owners</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>' <span class="src-id">AND user_id</span>='<span class="src-var">$user_id</span>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a697"></a></span><span class="src-str">            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUniqueRes</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$content_owner_row</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a698"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_owner_row </span>!= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a699"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a700"></a></span><span class="src-str">                <span class="src-var">$retval</span> = <span class="src-id">true</span><span class="src-sym">;</span></span></li>
<li><a name="a701"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a702"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a703"></a>&nbsp;</li>
<li><a name="a704"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$retval</span><span class="src-sym">;</span></span></li>
<li><a name="a705"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a706"></a></span><span class="src-str">    /** Get the authors of the Content</span></li>
<li><a name="a707"></a></span><span class="src-str">     * @return null or array of User objects */</span></li>
<li><a name="a708"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">getAuthors</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a709"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a710"></a></span><span class="src-str">        <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a711"></a></span><span class="src-str">        <span class="src-var">$retval</span> = <span class="src-key">array</span> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a712"></a></span><span class="src-str">        <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">SELECT</span> <span class="src-id">user_id</span> <span class="src-id">FROM</span> <span class="src-id">content_has_owners</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>' <span class="src-id">AND is_author</span>=<span class="src-id">TRUE</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a713"></a></span><span class="src-str">        <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUniqueRes</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$content_owner_row</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a714"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_owner_row </span>!= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a715"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a716"></a></span><span class="src-str">            <span class="src-var">$user</span> = <span class="src-id">User</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$content_owner_row</span><span class="src-sym">[</span><span class="src-str">'user_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a717"></a></span><span class="src-str">            <span class="src-var">$retval</span><span class="src-sym">[</span><span class="src-sym">]</span> = <span class="src-var">$user</span><span class="src-sym">;</span></span></li>
<li><a name="a718"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a719"></a>&nbsp;</li>
<li><a name="a720"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$retval</span><span class="src-sym">;</span></span></li>
<li><a name="a721"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a722"></a></span><span class="src-str">    /** @see GenricObject</span></li>
<li><a name="a723"></a></span><span class="src-str">     * @return The id */</span></li>
<li><a name="a724"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a725"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a726"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">;</span></li>
<li><a name="a727"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a728"></a>&nbsp;</li>
<li><a name="a729"></a></span><span class="src-str">    /** When a content object is set as trivial, it means that is is used merely to contain it's own data.  No title, description or other data will be set or displayed, during display or administration</span></li>
<li><a name="a730"></a></span><span class="src-str">     * @param $is_trivial true or false */</span></li>
<li><a name="a731"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">setIsTrivialContent</span><span class="src-sym">(</span><span class="src-var">$is_trivial</span><span class="src-sym">)</span></span></li>
<li><a name="a732"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a733"></a></span><span class="src-str">        <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$is_trivial_content">is_trivial_content</a> = <span class="src-var">$is_trivial</span><span class="src-sym">;</span></li>
<li><a name="a734"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a735"></a>&nbsp;</li>
<li><a name="a736"></a></span><span class="src-str">    /** Retreives the user interface of this object.  Anything that overrides this method should call the parent method with it's output at the END of processing.</span></li>
<li><a name="a737"></a></span><span class="src-str">     * @param $subclass_admin_interface Html content of the interface element of a children</span></li>
<li><a name="a738"></a></span><span class="src-str">     * @return The HTML fragment for this interface */</span></li>
<li><a name="a739"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">getUserUI</span><span class="src-sym">(</span><span class="src-var">$subclass_user_interface</span> = <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a740"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a741"></a></span><span class="src-str">        <span class="src-var">$html</span> = <span class="src-str">''</span><span class="src-sym">;</span></span></li>
<li><a name="a742"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_main_outer'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a743"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_main_inner'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a744"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_object_class'&gt;Content (&quot;</span>.<span class="src-id">get_class</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">)</span>.<span class="src-str">&quot; instance)&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a745"></a>&nbsp;</li>
<li><a name="a746"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a747"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a748"></a></span><span class="src-str">            <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_title'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a749"></a></span><span class="src-str">            <span class="src-var">$title</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a750"></a>            <span class="src-comm">// If the content logging is disabled, all the children will inherit this property temporarly</span></li>
<li><a name="a751"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetLoggingStatus">getLoggingStatus</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a752"></a>                <span class="src-var">$title</span><span class="src-sym">-&gt;</span><span class="src-id">setLoggingStatus</span><span class="src-sym">(</span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a753"></a>            <span class="src-var">$html </span>.= <span class="src-var">$title</span><span class="src-sym">-&gt;</span><span class="src-id">getUserUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a754"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a755"></a>        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a756"></a>&nbsp;</li>
<li><a name="a757"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;table&gt;&lt;tr&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a758"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">"</span>&lt;<span class="src-id">td</span>&gt;\n<span class="src-var">$subclass_user_interface</span>&lt;/<span class="src-id">td</span>&gt;\n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a759"></a>&nbsp;</li>
<li><a name="a760"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;td&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a761"></a></span><span class="src-str">        <span class="src-var">$authors</span> = <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetAuthors">getAuthors</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a762"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-id">count</span><span class="src-sym">(</span><span class="src-var">$authors</span><span class="src-sym">) </span>&gt; <span class="src-num">0</span><span class="src-sym">)</span></li>
<li><a name="a763"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a764"></a></span><span class="src-str">            <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_authors'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a765"></a></span><span class="src-str">            <span class="src-var">$html</span> .= <span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Author(s):&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a766"></a></span><span class="src-str">            <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$authors</span> <span class="src-key">as</span> <span class="src-var">$user</span><span class="src-sym">)</span></span></li>
<li><a name="a767"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a768"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-var">$user</span></span><span class="src-sym">-&gt;</span><span class="src-id">getUsername</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot; &quot;</span><span class="src-sym">;</span></li>
<li><a name="a769"></a>            </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a770"></a></span><span class="src-str">            <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a771"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a772"></a>&nbsp;</li>
<li><a name="a773"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'description'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a774"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a775"></a></span><span class="src-str">            <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_description'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a776"></a></span><span class="src-str">            <span class="src-var">$description</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'description'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a777"></a>            <span class="src-comm">// If the content logging is disabled, all the children will inherit this property temporarly</span></li>
<li><a name="a778"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetLoggingStatus">getLoggingStatus</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a779"></a>                <span class="src-var">$description</span><span class="src-sym">-&gt;</span><span class="src-id">setLoggingStatus</span><span class="src-sym">(</span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a780"></a>            <span class="src-var">$html </span>.= <span class="src-var">$description</span><span class="src-sym">-&gt;</span><span class="src-id">getUserUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a781"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a782"></a>        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a783"></a>&nbsp;</li>
<li><a name="a784"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'project_info'</span><span class="src-sym">]</span><span class="src-sym">) </span>|| <span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'sponsor_info'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a785"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a786"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'project_info'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a787"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a788"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_projet_info'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a789"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;b&gt;&quot;</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Project information:&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/b&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a790"></a></span><span class="src-str">                <span class="src-var">$project_info</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'project_info'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a791"></a>                <span class="src-comm">// If the content logging is disabled, all the children will inherit this property temporarly</span></li>
<li><a name="a792"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetLoggingStatus">getLoggingStatus</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a793"></a>                    <span class="src-var">$project_info</span><span class="src-sym">-&gt;</span><span class="src-id">setLoggingStatus</span><span class="src-sym">(</span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a794"></a>                <span class="src-var">$html </span>.= <span class="src-var">$project_info</span><span class="src-sym">-&gt;</span><span class="src-id">getUserUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a795"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a796"></a>            </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a797"></a>&nbsp;</li>
<li><a name="a798"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'sponsor_info'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a799"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a800"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_sponsor_info'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a801"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;b&gt;&quot;</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Project sponsor:&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/b&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a802"></a></span><span class="src-str">                <span class="src-var">$sponsor_info</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'sponsor_info'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a803"></a>                <span class="src-comm">// If the content logging is disabled, all the children will inherit this property temporarly</span></li>
<li><a name="a804"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetLoggingStatus">getLoggingStatus</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a805"></a>                    <span class="src-var">$sponsor_info</span><span class="src-sym">-&gt;</span><span class="src-id">setLoggingStatus</span><span class="src-sym">(</span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a806"></a>                <span class="src-var">$html </span>.= <span class="src-var">$sponsor_info</span><span class="src-sym">-&gt;</span><span class="src-id">getUserUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a807"></a>                <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a808"></a>            </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a809"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a810"></a>&nbsp;</li>
<li><a name="a811"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/td&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a812"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/tr&gt;&lt;/table&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a813"></a>&nbsp;</li>
<li><a name="a814"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a815"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a816"></a></span><span class="src-str">        <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodlogContentDisplay">logContentDisplay</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a817"></a>        <span class="src-key">return </span><span class="src-var">$html</span><span class="src-sym">;</span></li>
<li><a name="a818"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a819"></a>&nbsp;</li>
<li><a name="a820"></a></span><span class="src-str">    /** Log that this content has just been displayed to the user.  Will only log if the user is logged in */</span></li>
<li><a name="a821"></a></span><span class="src-str">    <span class="src-key">private</span> <span class="src-key">function</span> <span class="src-id">logContentDisplay</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a822"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a823"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetLoggingStatus">getLoggingStatus</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a824"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a825"></a></span><span class="src-str">            <span class="src-comm">// DEBUG::</span></span></li>
<li><a name="a826"></a></span><span class="src-str"><span class="src-comm"></span>            <span class="src-comm">//echo &quot;Logging &quot;.get_class($this).&quot; :: &quot;.$this-&gt;__toString().&quot;&lt;br&gt;&quot;;</span></span></li>
<li><a name="a827"></a></span><span class="src-str"><span class="src-comm"></span>            <span class="src-var">$user</span> = <span class="src-id">User</span> <span class="src-sym">::</span> <span class="src-id">getCurrentUser</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a828"></a></span><span class="src-str">            <span class="src-var">$node</span> = <span class="src-id">Node</span> <span class="src-sym">::</span> <span class="src-id">getCurrentNode</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a829"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$user</span> != <span class="src-id">null</span> &amp;&amp; <span class="src-var">$node</span> != <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a830"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a831"></a></span><span class="src-str">                <span class="src-var">$user_id</span> = <span class="src-var">$user</span></span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a832"></a>                <span class="src-var">$node_id </span>= <span class="src-var">$node</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a833"></a>                <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a834"></a>&nbsp;</li>
<li><a name="a835"></a>                <span class="src-var">$sql </span>= </span><span class="src-str"><span class="src-str">"</span><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-id">content_display_log</span> <span class="src-id">WHERE</span> <span class="src-id">user_id</span>='<span class="src-var">$user_id</span>' <span class="src-id">AND</span> <span class="src-id">node_id</span>='<span class="src-var">$node_id</span>' <span class="src-id">AND</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a836"></a></span><span class="src-str">                <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$log_rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a837"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$log_rows </span>!= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a838"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a839"></a></span><span class="src-str">                    <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content_display_log</span> <span class="src-id">SET</span> <span class="src-id">last_display_timestamp</span> = <span class="src-id">NOW</span>() <span class="src-id">WHERE</span> <span class="src-id">user_id</span>='<span class="src-var">$user_id</span>' <span class="src-id">AND</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>' <span class="src-id">AND node_id</span>='<span class="src-var">$node_id</span>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a840"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a841"></a></span><span class="src-str">                <span class="src-key">else</span></span></li>
<li><a name="a842"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a843"></a></span><span class="src-str">                    <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">INSERT</span> <span class="src-id">INTO</span> <span class="src-id">content_display_log</span> (<span class="src-id">user_id</span>, <span class="src-id">content_id</span>, <span class="src-id">node_id</span>) <span class="src-id">VALUES</span> ('<span class="src-var">$user_id</span>', '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>', '<span class="src-var">$node_id</span>')</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a844"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a845"></a></span><span class="src-str">                <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a846"></a>            </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a847"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a848"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a849"></a>&nbsp;</li>
<li><a name="a850"></a></span><span class="src-str">    /** Retreives the list interface of this object.  Anything that overrides this method should call the parent method with it's output at the END of processing.</span></li>
<li><a name="a851"></a></span><span class="src-str">     * @param $subclass_admin_interface Html content of the interface element of a children</span></li>
<li><a name="a852"></a></span><span class="src-str">     * @return The HTML fragment for this interface */</span></li>
<li><a name="a853"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">getListUI</span><span class="src-sym">(</span><span class="src-var">$subclass_list_interface</span> = <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a854"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a855"></a></span><span class="src-str">        <span class="src-var">$html</span> = <span class="src-str">''</span><span class="src-sym">;</span></span></li>
<li><a name="a856"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='list_ui_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a857"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#method__toString">__toString</a><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot; (&quot;</span>.<span class="src-id">get_class</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">)</span>.<span class="src-str">&quot;)\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a858"></a>        <span class="src-var">$html </span>.= <span class="src-var">$subclass_list_interface</span><span class="src-sym">;</span></li>
<li><a name="a859"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a860"></a>        <span class="src-key">return </span><span class="src-var">$html</span><span class="src-sym">;</span></li>
<li><a name="a861"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a862"></a>&nbsp;</li>
<li><a name="a863"></a></span><span class="src-str">    /**</span></li>
<li><a name="a864"></a></span><span class="src-str">     * Retreives the admin interface of this object. Anything that overrides</span></li>
<li><a name="a865"></a></span><span class="src-str">     * this method should call the parent method with it's output at the END of</span></li>
<li><a name="a866"></a></span><span class="src-str">     * processing.</span></li>
<li><a name="a867"></a></span><span class="src-str">     * @param string $subclass_admin_interface HTML content of the interface</span></li>
<li><a name="a868"></a></span><span class="src-str">     * element of a children.</span></li>
<li><a name="a869"></a></span><span class="src-str">     * @return string The HTML fragment for this interface.</span></li>
<li><a name="a870"></a></span><span class="src-str">     */</span></li>
<li><a name="a871"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">getAdminUI</span><span class="src-sym">(</span><span class="src-var">$subclass_admin_interface</span> = <span class="src-id">null</span><span class="src-sym">)</span> <span class="src-sym">{</span></span></li>
<li><a name="a872"></a></span><span class="src-str">        <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a873"></a>&nbsp;</li>
<li><a name="a874"></a></span><span class="src-str">        <span class="src-var">$html</span> = <span class="src-str">''</span><span class="src-sym">;</span></span></li>
<li><a name="a875"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a876"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_class'&gt;Content (&quot;</span>.<span class="src-id">get_class</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">)</span>.<span class="src-str">&quot; instance)&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a877"></a>&nbsp;</li>
<li><a name="a878"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetObjectType">getObjectType</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-str">'Content'</span><span class="src-sym">) </span><span class="src-str"></span><span class="src-sym">{</span></span></li>
<li><a name="a879"></a></span><span class="src-str">            <span class="src-comm">// The object hasn't yet been typed.</span></span></li>
<li><a name="a880"></a></span><span class="src-str"><span class="src-comm"></span>            <span class="src-var">$html</span> .= <span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;You must select a content type: &quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a881"></a></span><span class="src-str">            <span class="src-var">$i</span> = <span class="src-num">0</span><span class="src-sym">;</span></span></li>
<li><a name="a882"></a>&nbsp;</li>
<li><a name="a883"></a></span><span class="src-str">            <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getAvailableContentTypes</span><span class="src-sym">(</span><span class="src-sym">)</span> <span class="src-key">as</span> <span class="src-var">$classname</span><span class="src-sym">)</span> <span class="src-sym">{</span></span></li>
<li><a name="a884"></a></span><span class="src-str">                <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span> = <span class="src-var">$classname</span><span class="src-sym">;</span></span></li>
<li><a name="a885"></a></span><span class="src-str">                <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span> = <span class="src-var">$classname</span><span class="src-sym">;</span></span></li>
<li><a name="a886"></a></span><span class="src-str">                <span class="src-var">$i</span> ++<span class="src-sym">;</span></span></li>
<li><a name="a887"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a888"></a>&nbsp;</li>
<li><a name="a889"></a></span><span class="src-str">            <span class="src-var">$html</span> .= <span class="src-id">FormSelectGenerator</span> <span class="src-sym">::</span> <span class="src-id">generateFromArray</span><span class="src-sym">(</span><span class="src-var">$tab</span><span class="src-sym">,</span> <span class="src-id">null</span><span class="src-sym">,</span> <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_content_type&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;Content&quot;</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a890"></a>        </span><span class="src-str"><span class="src-sym">}</span> <span class="src-key">else</span> <span class="src-sym">{</span></span></li>
<li><a name="a891"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$is_trivial_content">is_trivial_content</a> == <span class="src-id">false</span><span class="src-sym">) </span><span class="src-str"></span><span class="src-sym">{</span></span></li>
<li><a name="a892"></a></span><span class="src-str"><span class="src-comm">//                The next lines are a preview of a new suggested input mode</span></span></li>
<li><a name="a893"></a></span><span class="src-str"><span class="src-comm">//                ==========================================================</span></span></li>
<li><a name="a894"></a></span><span class="src-str"><span class="src-comm">//</span></span></li>
<li><a name="a895"></a></span><span class="src-str"><span class="src-comm">//                // title</span></span></li>
<li><a name="a896"></a></span><span class="src-str"><span class="src-comm">//                $html .= &quot;&lt;fieldset class='admin_section_container'&gt;\n&quot;;</span></span></li>
<li><a name="a897"></a></span><span class="src-str"><span class="src-comm">//                $html .= &quot;&lt;legend class='admin_section_title'&gt;&quot;._(&quot;Title:&quot;).&quot;&lt;/legend&gt;\n&quot;;</span></span></li>
<li><a name="a898"></a></span><span class="src-str"><span class="src-comm">//                $html .= &quot;&lt;div class='admin_section_data'&gt;\n&quot;;</span></span></li>
<li><a name="a899"></a></span><span class="src-str"><span class="src-comm">//</span></span></li>
<li><a name="a900"></a></span><span class="src-str"><span class="src-comm">//                if (empty ($this-&gt;content_row['title'])) {</span></span></li>
<li><a name="a901"></a></span><span class="src-str"><span class="src-comm">//                    $html .= self :: getNewContentUI(&quot;title_{$this-&gt;id}_new&quot;);</span></span></li>
<li><a name="a902"></a></span><span class="src-str"><span class="src-comm">//                    $html .= &quot;&lt;/div&gt;\n&quot;;</span></span></li>
<li><a name="a903"></a></span><span class="src-str"><span class="src-comm">//                } else {</span></span></li>
<li><a name="a904"></a></span><span class="src-str"><span class="src-comm">//                    $title = self :: getObject($this-&gt;content_row['title']);</span></span></li>
<li><a name="a905"></a></span><span class="src-str"><span class="src-comm">//                    $html .= $title-&gt;getAdminUI(&quot;SMALL&quot;);</span></span></li>
<li><a name="a906"></a></span><span class="src-str"><span class="src-comm">//                    $html .= &quot;&lt;/div&gt;\n&quot;;</span></span></li>
<li><a name="a907"></a></span><span class="src-str"><span class="src-comm">//                    $html .= &quot;&lt;div class='admin_section_tools'&gt;\n&quot;;</span></span></li>
<li><a name="a908"></a></span><span class="src-str"><span class="src-comm">//                    $name = &quot;content_&quot;.$this-&gt;id.&quot;_title_erase&quot;;</span></span></li>
<li><a name="a909"></a></span><span class="src-str"><span class="src-comm">//                    $html .= &quot;&lt;input type='submit' name='$name' value='&quot;._(&quot;Delete&quot;).&quot;'&gt;&quot;;</span></span></li>
<li><a name="a910"></a></span><span class="src-str"><span class="src-comm">//                    $html .= &quot;&lt;/div&gt;\n&quot;;</span></span></li>
<li><a name="a911"></a></span><span class="src-str"><span class="src-comm">//                }</span></span></li>
<li><a name="a912"></a></span><span class="src-str"><span class="src-comm">//</span></span></li>
<li><a name="a913"></a></span><span class="src-str"><span class="src-comm">//                $html .= &quot;&lt;/fieldset&gt;\n&quot;;</span></span></li>
<li><a name="a914"></a></span><span class="src-str"><span class="src-comm"></span></span></li>
<li><a name="a915"></a></span><span class="src-str">                <span class="src-comm">/* title */</span></span></li>
<li><a name="a916"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a917"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Title:&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a918"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a919"></a></span><span class="src-str">                <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a920"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a921"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">title_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a922"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a923"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a924"></a></span><span class="src-str">                <span class="src-key">else</span></span></li>
<li><a name="a925"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a926"></a></span><span class="src-str">                    <span class="src-var">$title</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a927"></a>                    <span class="src-var">$html </span>.= <span class="src-var">$title</span><span class="src-sym">-&gt;</span><span class="src-id">getAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a928"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a929"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a930"></a>                    <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_title_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a931"></a>                    <span class="src-var">$html </span>.= </span><span class="src-str"><span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-str">"</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Delete&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a932"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a933"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a934"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a935"></a>&nbsp;</li>
<li><a name="a936"></a></span><span class="src-str">                <span class="src-comm">/* is_persistent */</span></span></li>
<li><a name="a937"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a938"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;Is persistent (reusable and read-only)?: &lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a939"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a940"></a></span><span class="src-str">                <span class="src-var">$name</span> = <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_is_persistent&quot;</span><span class="src-sym">;</span></li>
<li><a name="a941"></a>                <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodisPersistent">isPersistent</a><span class="src-sym">(</span><span class="src-sym">) </span>? <span class="src-var">$checked </span>= <span class="src-str">'CHECKED' </span>: <span class="src-var">$checked </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a942"></a>                <span class="src-var">$html </span>.= </span><span class="src-str"><span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">checkbox</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-var">$checked</span>&gt;\n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a943"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a944"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a945"></a>&nbsp;</li>
<li><a name="a946"></a></span><span class="src-str">                <span class="src-comm">/* description */</span></span></li>
<li><a name="a947"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a948"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Description:&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a949"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a950"></a></span><span class="src-str">                <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'description'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a951"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a952"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">description_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a953"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a954"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a955"></a></span><span class="src-str">                <span class="src-key">else</span></span></li>
<li><a name="a956"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a957"></a></span><span class="src-str">                    <span class="src-var">$description</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'description'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a958"></a>                    <span class="src-var">$html </span>.= <span class="src-var">$description</span><span class="src-sym">-&gt;</span><span class="src-id">getAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a959"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a960"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a961"></a>                    <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_description_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a962"></a>                    <span class="src-var">$html </span>.= </span><span class="src-str"><span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-str">"</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Delete&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a963"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a964"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a965"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a966"></a>&nbsp;</li>
<li><a name="a967"></a></span><span class="src-str">                <span class="src-comm">/* long description */</span></span></li>
<li><a name="a968"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a969"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Long description:&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a970"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a971"></a></span><span class="src-str">                <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'long_description'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a972"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a973"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">long_description_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a974"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a975"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a976"></a></span><span class="src-str">                <span class="src-key">else</span></span></li>
<li><a name="a977"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a978"></a></span><span class="src-str">                    <span class="src-var">$description</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'long_description'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a979"></a>                    <span class="src-var">$html </span>.= <span class="src-var">$description</span><span class="src-sym">-&gt;</span><span class="src-id">getAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a980"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a981"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a982"></a>                    <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_long_description_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a983"></a>                    <span class="src-var">$html </span>.= </span><span class="src-str"><span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-str">"</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Delete&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a984"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a985"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a986"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a987"></a>&nbsp;</li>
<li><a name="a988"></a></span><span class="src-str">                <span class="src-comm">/* project_info */</span></span></li>
<li><a name="a989"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a990"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Information on this project:&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a991"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a992"></a></span><span class="src-str">                <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'project_info'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a993"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a994"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">project_info_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a995"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a996"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a997"></a></span><span class="src-str">                <span class="src-key">else</span></span></li>
<li><a name="a998"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a999"></a></span><span class="src-str">                    <span class="src-var">$project_info</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'project_info'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1000"></a>                    <span class="src-var">$html </span>.= <span class="src-var">$project_info</span><span class="src-sym">-&gt;</span><span class="src-id">getAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1001"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1002"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1003"></a>                    <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_project_info_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1004"></a>                    <span class="src-var">$html </span>.= </span><span class="src-str"><span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-str">"</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Delete&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1005"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1006"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a1007"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1008"></a>&nbsp;</li>
<li><a name="a1009"></a></span><span class="src-str">                <span class="src-comm">/* sponsor_info */</span></span></li>
<li><a name="a1010"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1011"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Sponsor of this project:&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1012"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1013"></a></span><span class="src-str">                <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'sponsor_info'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a1014"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1015"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">sponsor_info_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1016"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1017"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a1018"></a></span><span class="src-str">                <span class="src-key">else</span></span></li>
<li><a name="a1019"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a1020"></a></span><span class="src-str">                    <span class="src-var">$sponsor_info</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'sponsor_info'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1021"></a>                    <span class="src-var">$html </span>.= <span class="src-var">$sponsor_info</span><span class="src-sym">-&gt;</span><span class="src-id">getAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1022"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1023"></a>                    <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1024"></a>                    <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_sponsor_info_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1025"></a>                    <span class="src-var">$html </span>.= </span><span class="src-str"><span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-str">"</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Delete&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1026"></a></span><span class="src-str">                    <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1027"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a1028"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1029"></a>&nbsp;</li>
<li><a name="a1030"></a></span><span class="src-str">                <span class="src-comm">/* content_has_owners */</span></span></li>
<li><a name="a1031"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1032"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;span class='admin_section_title'&gt;&quot;</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Content owner list&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/span&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1033"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;ul class='admin_section_list'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1034"></a>&nbsp;</li>
<li><a name="a1035"></a></span><span class="src-str">                <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a1036"></a></span><span class="src-str">                <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-id">content_has_owners</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1037"></a></span><span class="src-str">                <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$content_owner_rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1038"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_owner_rows </span>!= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a1039"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1040"></a></span><span class="src-str">                    <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$content_owner_rows</span> <span class="src-key">as</span> <span class="src-var">$content_owner_row</span><span class="src-sym">)</span></span></li>
<li><a name="a1041"></a></span><span class="src-str">                    <span class="src-sym">{</span></span></li>
<li><a name="a1042"></a></span><span class="src-str">                        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;li class='admin_section_list_item'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1043"></a></span><span class="src-str">                        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1044"></a></span><span class="src-str">                        <span class="src-var">$user</span> = <span class="src-id">User</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$content_owner_row</span><span class="src-sym">[</span><span class="src-str">'user_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1045"></a>&nbsp;</li>
<li><a name="a1046"></a></span><span class="src-str">                        <span class="src-var">$html</span> .= <span class="src-var">$user</span></span><span class="src-sym">-&gt;</span><span class="src-id">getUserListUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1047"></a>                        <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_owner_&quot;</span>.<span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_is_author&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1048"></a>                        <span class="src-var">$html </span>.= <span class="src-str">&quot; Is content author? &quot;</span><span class="src-sym">;</span></li>
<li><a name="a1049"></a>&nbsp;</li>
<li><a name="a1050"></a>                        <span class="src-var">$content_owner_row</span><span class="src-sym">[</span><span class="src-str">'is_author'</span><span class="src-sym">] </span>== <span class="src-str">'t' </span>? <span class="src-var">$checked </span>= <span class="src-str">'CHECKED' </span>: <span class="src-var">$checked </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a1051"></a>                        <span class="src-var">$html </span>.= </span><span class="src-str"><span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">checkbox</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-var">$checked</span>&gt;\n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1052"></a></span><span class="src-str">                        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1053"></a></span><span class="src-str">                        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1054"></a></span><span class="src-str">                        <span class="src-var">$name</span> = <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_owner_&quot;</span>.<span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_remove&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1055"></a>                        <span class="src-var">$html </span>.= </span><span class="src-str"><span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-str">"</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Remove&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1056"></a></span><span class="src-str">                        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1057"></a></span><span class="src-str">                        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/li&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1058"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1059"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a1060"></a>&nbsp;</li>
<li><a name="a1061"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;li class='admin_section_list_item'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1062"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1063"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-id">User</span> <span class="src-sym">::</span> <span class="src-id">getSelectUserUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">content_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new_owner</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1064"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1065"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1066"></a></span><span class="src-str">                <span class="src-var">$name</span> = <span class="src-str">"</span><span class="src-id">content_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_add_owner_submit</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1067"></a></span><span class="src-str">                <span class="src-var">$value</span> = <span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Add owner&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1068"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='<span class="src-var">$value</span>'&gt;<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1069"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1070"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/li&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1071"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/ul&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1072"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1073"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a1074"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a1075"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-var">$subclass_admin_interface</span><span class="src-sym">;</span></span></li>
<li><a name="a1076"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a1077"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$html</span><span class="src-sym">;</span></span></li>
<li><a name="a1078"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a1079"></a></span><span class="src-str">    /** Process admin interface of this object.  When an object overrides this method, they should call the parent processAdminUI at the BEGINING of processing.</span></li>
<li><a name="a1080"></a>&nbsp;</li>
<li><a name="a1081"></a></span><span class="src-str">    */</span></li>
<li><a name="a1082"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a1083"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a1084"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodisOwner">isOwner</a><span class="src-sym">(</span><span class="src-id">User </span><span class="src-sym">:: </span><span class="src-id">getCurrentUser</span><span class="src-sym">(</span><span class="src-sym">)) </span>|| <span class="src-id">User </span><span class="src-sym">:: </span><span class="src-id">getCurrentUser</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">-&gt;</span><span class="src-id">isSuperAdmin</span><span class="src-sym">(</span><span class="src-sym">))</span></li>
<li><a name="a1085"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1086"></a></span><span class="src-str">            <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a1087"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetObjectType">getObjectType</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-str">'Content'</span><span class="src-sym">) </span><span class="src-comm">/* The object hasn't yet been typed */</span></li>
<li><a name="a1088"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1089"></a></span><span class="src-str">                <span class="src-var">$content_type</span> = <span class="src-id">FormSelectGenerator</span> <span class="src-sym">::</span> <span class="src-id">getResult</span><span class="src-sym">(</span><span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_content_type&quot;</span><span class="src-sym">, </span><span class="src-str">&quot;Content&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1090"></a>                <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodsetContentType">setContentType</a><span class="src-sym">(</span><span class="src-var">$content_type</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1091"></a>            </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1092"></a></span><span class="src-str">            <span class="src-key">else</span></span></li>
<li><a name="a1093"></a></span><span class="src-str">                <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$is_trivial_content">is_trivial_content</a> == <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a1094"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1095"></a></span><span class="src-str">                    <span class="src-comm">/* title */</span></span></li>
<li><a name="a1096"></a></span><span class="src-str">                    <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a1097"></a>                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1098"></a></span><span class="src-str">                        <span class="src-var">$title</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">processNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">title_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1099"></a></span><span class="src-str">                        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$title</span> != <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a1100"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1101"></a></span><span class="src-str">                            <span class="src-var">$title_id</span> = <span class="src-var">$title</span></span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1102"></a>                            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">title</span> = '<span class="src-var">$title_id</span>' <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1103"></a></span><span class="src-str">                        <span class="src-sym">}</span></span></li>
<li><a name="a1104"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1105"></a></span><span class="src-str">                    <span class="src-key">else</span></span></li>
<li><a name="a1106"></a></span><span class="src-str">                    <span class="src-sym">{</span></span></li>
<li><a name="a1107"></a></span><span class="src-str">                        <span class="src-var">$title</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'title'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1108"></a>                        <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_title_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1109"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">] </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a1110"></a>                        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1111"></a></span><span class="src-str">                            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">title</span> = <span class="src-id">NULL</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1112"></a></span><span class="src-str">                            <span class="src-var">$title</span></span><span class="src-sym">-&gt;</span><span class="src-id">delete</span><span class="src-sym">(</span><span class="src-var">$errmsg</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1113"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1114"></a></span><span class="src-str">                        <span class="src-key">else</span></span></li>
<li><a name="a1115"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1116"></a></span><span class="src-str">                            <span class="src-var">$title</span></span><span class="src-sym">-&gt;</span><span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1117"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1118"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1119"></a>&nbsp;</li>
<li><a name="a1120"></a></span><span class="src-str">                    <span class="src-comm">/* is_persistent */</span></span></li>
<li><a name="a1121"></a></span><span class="src-str">                    <span class="src-var">$name</span> = <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_is_persistent&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1122"></a>                    <span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>? <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodsetIsPersistent">setIsPersistent</a><span class="src-sym">(</span><span class="src-id">true</span><span class="src-sym">) </span>: <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodsetIsPersistent">setIsPersistent</a><span class="src-sym">(</span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1123"></a>&nbsp;</li>
<li><a name="a1124"></a>                    <span class="src-comm">/* description */</span></li>
<li><a name="a1125"></a>                    <span class="src-key">if </span><span class="src-sym">(</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'description'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a1126"></a>                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1127"></a></span><span class="src-str">                        <span class="src-var">$description</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">processNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">description_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1128"></a></span><span class="src-str">                        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$description</span> != <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a1129"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1130"></a></span><span class="src-str">                            <span class="src-var">$description_id</span> = <span class="src-var">$description</span></span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1131"></a>                            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">description</span> = '<span class="src-var">$description_id</span>' <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1132"></a></span><span class="src-str">                        <span class="src-sym">}</span></span></li>
<li><a name="a1133"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1134"></a></span><span class="src-str">                    <span class="src-key">else</span></span></li>
<li><a name="a1135"></a></span><span class="src-str">                    <span class="src-sym">{</span></span></li>
<li><a name="a1136"></a></span><span class="src-str">                        <span class="src-var">$description</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'description'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1137"></a>                        <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_description_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1138"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">] </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a1139"></a>                        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1140"></a></span><span class="src-str">                            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">description</span> = <span class="src-id">NULL</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1141"></a></span><span class="src-str">                            <span class="src-var">$description</span></span><span class="src-sym">-&gt;</span><span class="src-id">delete</span><span class="src-sym">(</span><span class="src-var">$errmsg</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1142"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1143"></a></span><span class="src-str">                        <span class="src-key">else</span></span></li>
<li><a name="a1144"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1145"></a></span><span class="src-str">                            <span class="src-var">$description</span></span><span class="src-sym">-&gt;</span><span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1146"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1147"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1148"></a>&nbsp;</li>
<li><a name="a1149"></a></span><span class="src-str">                    <span class="src-comm">/* long description */</span></span></li>
<li><a name="a1150"></a></span><span class="src-str">                    <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'long_description'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a1151"></a>                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1152"></a></span><span class="src-str">                        <span class="src-var">$long_description</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">processNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">long_description_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1153"></a></span><span class="src-str">                        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$long_description</span> != <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a1154"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1155"></a></span><span class="src-str">                            <span class="src-var">$long_description_id</span> = <span class="src-var">$long_description</span></span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1156"></a>                            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">long_description</span> = '<span class="src-var">$long_description_id</span>' <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1157"></a></span><span class="src-str">                        <span class="src-sym">}</span></span></li>
<li><a name="a1158"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1159"></a></span><span class="src-str">                    <span class="src-key">else</span></span></li>
<li><a name="a1160"></a></span><span class="src-str">                    <span class="src-sym">{</span></span></li>
<li><a name="a1161"></a></span><span class="src-str">                        <span class="src-var">$long_description</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'long_description'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1162"></a>                        <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_long_description_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1163"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">] </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a1164"></a>                        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1165"></a></span><span class="src-str">                            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">long_description</span> = <span class="src-id">NULL</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1166"></a></span><span class="src-str">                            <span class="src-var">$long_description</span></span><span class="src-sym">-&gt;</span><span class="src-id">delete</span><span class="src-sym">(</span><span class="src-var">$errmsg</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1167"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1168"></a></span><span class="src-str">                        <span class="src-key">else</span></span></li>
<li><a name="a1169"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1170"></a></span><span class="src-str">                            <span class="src-var">$long_description</span></span><span class="src-sym">-&gt;</span><span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1171"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1172"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1173"></a>&nbsp;</li>
<li><a name="a1174"></a></span><span class="src-str">                    <span class="src-comm">/* project_info */</span></span></li>
<li><a name="a1175"></a></span><span class="src-str">                    <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'project_info'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a1176"></a>                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1177"></a></span><span class="src-str">                        <span class="src-var">$project_info</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">processNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">project_info_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1178"></a></span><span class="src-str">                        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$project_info</span> != <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a1179"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1180"></a></span><span class="src-str">                            <span class="src-var">$project_info_id</span> = <span class="src-var">$project_info</span></span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1181"></a>                            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">project_info</span> = '<span class="src-var">$project_info_id</span>' <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1182"></a></span><span class="src-str">                        <span class="src-sym">}</span></span></li>
<li><a name="a1183"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1184"></a></span><span class="src-str">                    <span class="src-key">else</span></span></li>
<li><a name="a1185"></a></span><span class="src-str">                    <span class="src-sym">{</span></span></li>
<li><a name="a1186"></a></span><span class="src-str">                        <span class="src-var">$project_info</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'project_info'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1187"></a>                        <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_project_info_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1188"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">] </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a1189"></a>                        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1190"></a></span><span class="src-str">                            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">project_info</span> = <span class="src-id">NULL</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1191"></a></span><span class="src-str">                            <span class="src-var">$project_info</span></span><span class="src-sym">-&gt;</span><span class="src-id">delete</span><span class="src-sym">(</span><span class="src-var">$errmsg</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1192"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1193"></a></span><span class="src-str">                        <span class="src-key">else</span></span></li>
<li><a name="a1194"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1195"></a></span><span class="src-str">                            <span class="src-var">$project_info</span></span><span class="src-sym">-&gt;</span><span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1196"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1197"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1198"></a>&nbsp;</li>
<li><a name="a1199"></a></span><span class="src-str">                    <span class="src-comm">/* sponsor_info */</span></span></li>
<li><a name="a1200"></a></span><span class="src-str">                    <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'sponsor_info'</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a1201"></a>                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1202"></a></span><span class="src-str">                        <span class="src-var">$sponsor_info</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">processNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">sponsor_info_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1203"></a></span><span class="src-str">                        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$sponsor_info</span> != <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a1204"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1205"></a></span><span class="src-str">                            <span class="src-var">$sponsor_info_id</span> = <span class="src-var">$sponsor_info</span></span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1206"></a>                            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">sponsor_info</span> = '<span class="src-var">$sponsor_info_id</span>' <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1207"></a></span><span class="src-str">                        <span class="src-sym">}</span></span></li>
<li><a name="a1208"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1209"></a></span><span class="src-str">                    <span class="src-key">else</span></span></li>
<li><a name="a1210"></a></span><span class="src-str">                    <span class="src-sym">{</span></span></li>
<li><a name="a1211"></a></span><span class="src-str">                        <span class="src-var">$sponsor_info</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'sponsor_info'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1212"></a>                        <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_sponsor_info_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1213"></a>                        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">] </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a1214"></a>                        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1215"></a></span><span class="src-str">                            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">sponsor_info</span> = <span class="src-id">NULL</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">FALSE</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1216"></a></span><span class="src-str">                            <span class="src-var">$sponsor_info</span></span><span class="src-sym">-&gt;</span><span class="src-id">delete</span><span class="src-sym">(</span><span class="src-var">$errmsg</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1217"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1218"></a></span><span class="src-str">                        <span class="src-key">else</span></span></li>
<li><a name="a1219"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1220"></a></span><span class="src-str">                            <span class="src-var">$sponsor_info</span></span><span class="src-sym">-&gt;</span><span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1221"></a>                        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1222"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1223"></a></span><span class="src-str">                    <span class="src-comm">/* content_has_owners */</span></span></li>
<li><a name="a1224"></a></span><span class="src-str">                    <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-id">content_has_owners</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1225"></a></span><span class="src-str">                    <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$content_owner_rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1226"></a>                    <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_owner_rows </span>!= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a1227"></a>                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1228"></a></span><span class="src-str">                        <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$content_owner_rows</span> <span class="src-key">as</span> <span class="src-var">$content_owner_row</span><span class="src-sym">)</span></span></li>
<li><a name="a1229"></a></span><span class="src-str">                        <span class="src-sym">{</span></span></li>
<li><a name="a1230"></a></span><span class="src-str">                            <span class="src-var">$user</span> = <span class="src-id">User</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$content_owner_row</span><span class="src-sym">[</span><span class="src-str">'user_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1231"></a></span><span class="src-str">                            <span class="src-var">$user_id</span> = <span class="src-var">$user</span></span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1232"></a>                            <span class="src-var">$name </span>= <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_owner_&quot;</span>.<span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_remove&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1233"></a>                            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a1234"></a>                            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1235"></a></span><span class="src-str">                                <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methoddeleteOwner">deleteOwner</a><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1236"></a>                            </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1237"></a></span><span class="src-str">                            <span class="src-key">else</span></span></li>
<li><a name="a1238"></a></span><span class="src-str">                            <span class="src-sym">{</span></span></li>
<li><a name="a1239"></a></span><span class="src-str">                                <span class="src-var">$name</span> = <span class="src-str">&quot;content_&quot;</span>.<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_owner_&quot;</span>.<span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_is_author&quot;</span><span class="src-sym">;</span></li>
<li><a name="a1240"></a>                                <span class="src-var">$content_owner_row</span><span class="src-sym">[</span><span class="src-str">'is_author'</span><span class="src-sym">] </span>== <span class="src-str">'t' </span>? <span class="src-var">$is_author </span>= <span class="src-id">true </span>: <span class="src-var">$is_author </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a1241"></a>                                <span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>? <span class="src-var">$should_be_author </span>= <span class="src-id">true </span>: <span class="src-var">$should_be_author </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a1242"></a>                                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$is_author </span>!= <span class="src-var">$should_be_author</span><span class="src-sym">)</span></li>
<li><a name="a1243"></a>                                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1244"></a></span><span class="src-str">                                    <span class="src-var">$should_be_author</span> ? <span class="src-var">$is_author_sql</span> = <span class="src-str">'TRUE'</span> : <span class="src-var">$is_author_sql</span> = <span class="src-str">'FALSE'</span><span class="src-sym">;</span></span></li>
<li><a name="a1245"></a></span><span class="src-str">                                    <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content_has_owners</span> <span class="src-id">SET</span> <span class="src-id">is_author</span>=<span class="src-var">$is_author_sql</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>' <span class="src-id">AND user_id</span>='<span class="src-var">$user_id</span>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1246"></a>&nbsp;</li>
<li><a name="a1247"></a></span><span class="src-str">                                    <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">))</span></li>
<li><a name="a1248"></a>                                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1249"></a></span><span class="src-str">                                        throw <span class="src-key">new</span> <span class="src-id">Exception</span><span class="src-sym">(</span><span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">'Unable to set as author in the database.'</span><span class="src-sym">))</span><span class="src-sym">;</span></span></li>
<li><a name="a1250"></a></span><span class="src-str">                                    <span class="src-sym">}</span></span></li>
<li><a name="a1251"></a>&nbsp;</li>
<li><a name="a1252"></a></span><span class="src-str">                                <span class="src-sym">}</span></span></li>
<li><a name="a1253"></a>&nbsp;</li>
<li><a name="a1254"></a></span><span class="src-str">                            <span class="src-sym">}</span></span></li>
<li><a name="a1255"></a></span><span class="src-str">                        <span class="src-sym">}</span></span></li>
<li><a name="a1256"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a1257"></a></span><span class="src-str">                    <span class="src-var">$user</span> = <span class="src-id">User</span> <span class="src-sym">::</span> <span class="src-id">processSelectUserUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">content_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new_owner</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1258"></a></span><span class="src-str">                    <span class="src-var">$name</span> = <span class="src-str">"</span><span class="src-id">content_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_add_owner_submit</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1259"></a></span><span class="src-str">                    <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span> <span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">)</span> &amp;&amp; <span class="src-var">$user</span> != <span class="src-id">null</span><span class="src-sym">)</span></span></li>
<li><a name="a1260"></a></span><span class="src-str">                    <span class="src-sym">{</span></span></li>
<li><a name="a1261"></a></span><span class="src-str">                        <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodaddOwner">addOwner</a><span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1262"></a>                    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1263"></a>&nbsp;</li>
<li><a name="a1264"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a1265"></a></span><span class="src-str">            <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodrefresh">refresh</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1266"></a>        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1267"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a1268"></a>&nbsp;</li>
<li><a name="a1269"></a></span><span class="src-str">    /**</span></li>
<li><a name="a1270"></a></span><span class="src-str">     * Tell if a given user is already subscribed to this content</span></li>
<li><a name="a1271"></a></span><span class="src-str">     * @param User the given user</span></li>
<li><a name="a1272"></a></span><span class="src-str">     * @return boolean</span></li>
<li><a name="a1273"></a></span><span class="src-str">     */</span></li>
<li><a name="a1274"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">isUserSubscribed</span><span class="src-sym">(</span><span class="src-id">User</span> <span class="src-var">$user</span><span class="src-sym">)</span></span></li>
<li><a name="a1275"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a1276"></a></span><span class="src-str">        <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a1277"></a></span><span class="src-str">        <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">SELECT</span> <span class="src-id">content_id</span> <span class="src-id">FROM</span> <span class="src-id">user_has_content</span> <span class="src-id">WHERE</span> <span class="src-id">user_id</span> = '</span>{<span class="src-var">$user</span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-str"></span><span class="src-sym">}</span>' <span class="src-id">AND</span> <span class="src-id">content_id</span> = '</span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetId">getId</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-str"></span><span class="src-sym">}</span>';<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1278"></a></span><span class="src-str">        <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUniqueRes</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$row</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1279"></a>&nbsp;</li>
<li><a name="a1280"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$row</span><span class="src-sym">)</span></li>
<li><a name="a1281"></a>            <span class="src-key">return </span><span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a1282"></a>        <span class="src-key">else</span></li>
<li><a name="a1283"></a>            <span class="src-key">return </span><span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a1284"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1285"></a>&nbsp;</li>
<li><a name="a1286"></a></span><span class="src-str">    /** Subscribe to the project</span></li>
<li><a name="a1287"></a></span><span class="src-str">     * @return true on success, false on failure */</span></li>
<li><a name="a1288"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">subscribe</span><span class="src-sym">(</span><span class="src-id">User</span> <span class="src-var">$user</span><span class="src-sym">)</span></span></li>
<li><a name="a1289"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a1290"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$user</span></span><span class="src-sym">-&gt;</span><span class="src-id">addContent</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1291"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1292"></a></span><span class="src-str">    /** Unsubscribe to the project</span></li>
<li><a name="a1293"></a></span><span class="src-str">     * @return true on success, false on failure */</span></li>
<li><a name="a1294"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">unsubscribe</span><span class="src-sym">(</span><span class="src-id">User</span> <span class="src-var">$user</span><span class="src-sym">)</span></span></li>
<li><a name="a1295"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a1296"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$user</span></span><span class="src-sym">-&gt;</span><span class="src-id">removeContent</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1297"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1298"></a>&nbsp;</li>
<li><a name="a1299"></a></span><span class="src-str">    /** Persistent (or read-only) content is meant for re-use.  It will not be deleted when the delete() method is called.  When a containing element (ContentGroup, ContentGroupElement) is deleted, it calls delete on all the content it includes.  If the content is persistent, only the association will be removed.</span></li>
<li><a name="a1300"></a></span><span class="src-str">    * @return true or false */</span></li>
<li><a name="a1301"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">isPersistent</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a1302"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a1303"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$content_row">content_row</a><span class="src-sym">[</span><span class="src-str">'is_persistent'</span><span class="src-sym">] </span>== <span class="src-str">'t'</span><span class="src-sym">)</span></li>
<li><a name="a1304"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1305"></a></span><span class="src-str">            <span class="src-var">$retval</span> = <span class="src-id">true</span><span class="src-sym">;</span></span></li>
<li><a name="a1306"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a1307"></a></span><span class="src-str">        <span class="src-key">else</span></span></li>
<li><a name="a1308"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a1309"></a></span><span class="src-str">            <span class="src-var">$retval</span> = <span class="src-id">false</span><span class="src-sym">;</span></span></li>
<li><a name="a1310"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a1311"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$retval</span><span class="src-sym">;</span></span></li>
<li><a name="a1312"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a1313"></a>&nbsp;</li>
<li><a name="a1314"></a></span><span class="src-str">    /** Set if the content group is persistent</span></li>
<li><a name="a1315"></a></span><span class="src-str">     * @param $is_locative_content true or false</span></li>
<li><a name="a1316"></a></span><span class="src-str">     * */</span></li>
<li><a name="a1317"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">setIsPersistent</span><span class="src-sym">(</span><span class="src-var">$is_persistent</span><span class="src-sym">)</span></span></li>
<li><a name="a1318"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a1319"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$is_persistent</span> != <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodisPersistent">isPersistent</a><span class="src-sym">(</span><span class="src-sym">)) </span><span class="src-comm">/* Only update database if there is an actual change */</span></li>
<li><a name="a1320"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1321"></a></span><span class="src-str">            <span class="src-var">$is_persistent</span> ? <span class="src-var">$is_persistent_sql</span> = <span class="src-str">'TRUE'</span> : <span class="src-var">$is_persistent_sql</span> = <span class="src-str">'FALSE'</span><span class="src-sym">;</span></span></li>
<li><a name="a1322"></a>&nbsp;</li>
<li><a name="a1323"></a></span><span class="src-str">            <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a1324"></a></span><span class="src-str">            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str"></span><span class="src-str">"</span><span class="src-id">UPDATE</span> <span class="src-id">content</span> <span class="src-id">SET</span> <span class="src-id">is_persistent</span> = <span class="src-var">$is_persistent_sql</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span> = '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1325"></a></span><span class="src-str">            <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodrefresh">refresh</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1326"></a>        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1327"></a>&nbsp;</li>
<li><a name="a1328"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a1329"></a>&nbsp;</li>
<li><a name="a1330"></a></span><span class="src-str">    /** Reloads the object from the database.  Should normally be called after a set operation.</span></li>
<li><a name="a1331"></a></span><span class="src-str">     * This function is private because calling it from a subclass will call the</span></li>
<li><a name="a1332"></a></span><span class="src-str">     * constructor from the wrong scope */</span></li>
<li><a name="a1333"></a></span><span class="src-str">    <span class="src-key">private</span> <span class="src-key">function</span> <span class="src-id">refresh</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a1334"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a1335"></a></span><span class="src-str">        <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#method__construct">__construct</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1336"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1337"></a>&nbsp;</li>
<li><a name="a1338"></a></span><span class="src-str">    /** @see GenericObject</span></li>
<li><a name="a1339"></a></span><span class="src-str">     * @note Persistent content will not be deleted</span></li>
<li><a name="a1340"></a></span><span class="src-str">    */</span></li>
<li><a name="a1341"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">delete</span><span class="src-sym">(</span><span class="src-sym">&</span> <span class="src-var">$errmsg</span><span class="src-sym">)</span></span></li>
<li><a name="a1342"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a1343"></a></span><span class="src-str">        <span class="src-var">$retval</span> = <span class="src-id">false</span><span class="src-sym">;</span></span></li>
<li><a name="a1344"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodisPersistent">isPersistent</a><span class="src-sym">(</span><span class="src-sym">))</span></li>
<li><a name="a1345"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1346"></a></span><span class="src-str">            <span class="src-var">$errmsg</span> = <span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Content is persistent (you must make it non persistent before you can delete it)&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1347"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a1348"></a></span><span class="src-str">        <span class="src-key">else</span></span></li>
<li><a name="a1349"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a1350"></a></span><span class="src-str">            <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a1351"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodisOwner">isOwner</a><span class="src-sym">(</span><span class="src-id">User </span><span class="src-sym">:: </span><span class="src-id">getCurrentUser</span><span class="src-sym">(</span><span class="src-sym">)) </span>|| <span class="src-id">User </span><span class="src-sym">:: </span><span class="src-id">getCurrentUser</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">-&gt;</span><span class="src-id">isSuperAdmin</span><span class="src-sym">(</span><span class="src-sym">))</span></li>
<li><a name="a1352"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1353"></a></span><span class="src-str">                <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">DELETE</span> <span class="src-id">FROM</span> <span class="src-id">content</span> <span class="src-id">WHERE</span> <span class="src-id">content_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1354"></a></span><span class="src-str">                <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a1355"></a>                <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a1356"></a>            </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1357"></a></span><span class="src-str">            <span class="src-key">else</span></span></li>
<li><a name="a1358"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a1359"></a></span><span class="src-str">                <span class="src-var">$errmsg</span> = <span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Access denied (not owner of content)&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1360"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a1361"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a1362"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$retval</span><span class="src-sym">;</span></span></li>
<li><a name="a1363"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a1364"></a>&nbsp;</li>
<li><a name="a1365"></a></span><span class="src-str"><span class="src-sym">}</span> <span class="src-comm">// End class</span></span></li>
<li><a name="a1366"></a></span><span class="src-str"><span class="src-comm"></span></span></li>
<li><a name="a1367"></a></span><span class="src-str"><span class="src-comm">/* This allows the class to enumerate it's children properly */</span></span></li>
<li><a name="a1368"></a></span><span class="src-str"><span class="src-var">$class_names</span> = <span class="src-id">Content</span> <span class="src-sym">::</span> <span class="src-id">getAvailableContentTypes</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a1369"></a></span><span class="src-str"><span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$class_names</span> <span class="src-key">as</span> <span class="src-var">$class_name</span><span class="src-sym">)</span></span></li>
<li><a name="a1370"></a></span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a1371"></a></span><span class="src-str">    <span class="src-inc">require_once</span> <span class="src-id">BASEPATH</span>.<span class="src-str">"</span><span class="src-id">classes</span>/<span class="src-id">Content</span>/</span>{<span class="src-var">$class_name</span><span class="src-str"></span><span class="src-sym">}</span>/</span>{<span class="src-var">$class_name</span><span class="src-str"></span><span class="src-sym">}</span>.<span class="src-id">php</span><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a1372"></a></span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a1373"></a>&nbsp;</li>
<li><a name="a1374"></a></span><span class="src-str"><span class="src-comm">/*</span></span></li>
<li><a name="a1375"></a></span><span class="src-str"><span class="src-comm"> * Local variables:</span></span></li>
<li><a name="a1376"></a></span><span class="src-str"><span class="src-comm"> * tab-width: 4</span></span></li>
<li><a name="a1377"></a></span><span class="src-str"><span class="src-comm"> * c-basic-offset: 4</span></span></li>
<li><a name="a1378"></a></span><span class="src-str"><span class="src-comm"> * c-hanging-comment-ender-p: nil</span></span></li>
<li><a name="a1379"></a></span><span class="src-str"><span class="src-comm"> * End:</span></span></li>
<li><a name="a1380"></a></span><span class="src-str"><span class="src-comm"> */</span></span></li>
<li><a name="a1381"></a>&nbsp;</li>
</ol></pre>
</div>
	<p class="notes" id="credit">
		Documentation generated on Mon, 26 Dec 2005 19:14:04 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.0RC5</a>
	</p>
	</body>
</html>
