<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>File Source for ContentGroup.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
			<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						
<h1>Source for file ContentGroup.php</h1>
<p>Documentation is available at <a href="../WiFiDogAuthServer/ContentClasses/_wifidog_classes_Content_ContentGroup_ContentGroup_php.html">ContentGroup.php</a></p>
<div class="src-code">
<pre><ol><li><a name="a1"></a><span class="src-php">&lt;?php</span></li>
<li><a name="a2"></a>&nbsp;</li>
<li><a name="a4"></a><span class="src-comm">/* vim: set expandtab tabstop=4 shiftwidth=4 softtabstop=4: */</span></li>
<li><a name="a5"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a6"></a><span class="src-comm">// | WiFiDog Authentication Server                                     |</span></li>
<li><a name="a7"></a><span class="src-comm">// | =============================                                     |</span></li>
<li><a name="a8"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a9"></a><span class="src-comm">// | The WiFiDog Authentication Server is part of the WiFiDog captive  |</span></li>
<li><a name="a10"></a><span class="src-comm">// | portal suite.                                                     |</span></li>
<li><a name="a11"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a12"></a><span class="src-comm">// | PHP version 5 required.                                           |</span></li>
<li><a name="a13"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a14"></a><span class="src-comm">// | Homepage:     http://www.wifidog.org/                             |</span></li>
<li><a name="a15"></a><span class="src-comm">// | Source Forge: http://sourceforge.net/projects/wifidog/            |</span></li>
<li><a name="a16"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a17"></a><span class="src-comm">// | This program is free software; you can redistribute it and/or     |</span></li>
<li><a name="a18"></a><span class="src-comm">// | modify it under the terms of the GNU General Public License as    |</span></li>
<li><a name="a19"></a><span class="src-comm">// | published by the Free Software Foundation; either version 2 of    |</span></li>
<li><a name="a20"></a><span class="src-comm">// | the License, or (at your option) any later version.               |</span></li>
<li><a name="a21"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a22"></a><span class="src-comm">// | This program is distributed in the hope that it will be useful,   |</span></li>
<li><a name="a23"></a><span class="src-comm">// | but WITHOUT ANY WARRANTY; without even the implied warranty of    |</span></li>
<li><a name="a24"></a><span class="src-comm">// | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the     |</span></li>
<li><a name="a25"></a><span class="src-comm">// | GNU General Public License for more details.                      |</span></li>
<li><a name="a26"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a27"></a><span class="src-comm">// | You should have received a copy of the GNU General Public License |</span></li>
<li><a name="a28"></a><span class="src-comm">// | along with this program; if not, contact:                         |</span></li>
<li><a name="a29"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a30"></a><span class="src-comm">// | Free Software Foundation           Voice:  +1-617-542-5942        |</span></li>
<li><a name="a31"></a><span class="src-comm">// | 59 Temple Place - Suite 330        Fax:    +1-617-542-2652        |</span></li>
<li><a name="a32"></a><span class="src-comm">// | Boston, MA  02111-1307,  USA       gnu@gnu.org                    |</span></li>
<li><a name="a33"></a><span class="src-comm">// |                                                                   |</span></li>
<li><a name="a34"></a><span class="src-comm">// +-------------------------------------------------------------------+</span></li>
<li><a name="a35"></a>&nbsp;</li>
<li><a name="a36"></a><span class="src-doc">/**</span></li>
<li><a name="a37"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@package</span><span class="src-doc">    WiFiDogAuthServer</span></li>
<li><a name="a38"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@subpackage</span><span class="src-doc"> ContentClasses</span></li>
<li><a name="a39"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@author</span><span class="src-doc">     Benoit Gregoire &lt;bock@step.polymtl.ca&gt;</span></li>
<li><a name="a40"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@copyright</span><span class="src-doc">  2005 Benoit Gregoire &lt;bock@step.polymtl.ca&gt; - Technologies Coeus</span></li>
<li><a name="a41"></a><span class="src-doc"> *  inc.</span></li>
<li><a name="a42"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@version</span><span class="src-doc">    CVS: $Id: ContentGroup.php,v 1.5 2005/12/26 11:17:18 max-horvath Exp $</span></li>
<li><a name="a43"></a><span class="src-doc"> * </span><span class="src-doc-coretag">@link</span><span class="src-doc">       http://sourceforge.net/projects/wifidog/</span></li>
<li><a name="a44"></a><span class="src-doc"> */</span></li>
<li><a name="a45"></a>&nbsp;</li>
<li><a name="a46"></a><span class="src-inc">require_once </span><span class="src-id">BASEPATH</span>.<span class="src-str">'classes/Content.php'</span><span class="src-sym">;</span></li>
<li><a name="a47"></a><span class="src-inc">require_once </span><span class="src-id">BASEPATH</span>.<span class="src-str">'classes/Content/ContentGroup/ContentGroupElement.php'</span><span class="src-sym">;</span></li>
<li><a name="a48"></a>&nbsp;</li>
<li><a name="a49"></a><span class="src-doc">/** A generic content group */</span></li>
<li><a name="a49"></a>&nbsp;</li>
<li><a name="a50"></a><span class="src-key">class </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html">ContentGroup</a> <span class="src-key">extends </span><a href="../WiFiDogAuthServer/Content.html">Content</a></li>
<li><a name="a51"></a><span class="src-sym">{</span></li>
<li><a name="a52"></a>&nbsp;</li>
<li><a name="a53"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$CONTENT_ORDERING_MODES">$CONTENT_ORDERING_MODES</a> = <span class="src-key">array </span><span class="src-sym">(</span><span class="src-str">'RANDOM' </span>=&gt; <span class="src-str">&quot;Pick content elements randomly&quot;</span><span class="src-sym">, </span><span class="src-str">'SEQUENTIAL' </span>=&gt; <span class="src-str">&quot;Pick content elements in sequential order&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a54"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$CONTENT_CHANGES_ON_MODES">$CONTENT_CHANGES_ON_MODES</a> = <span class="src-key">array </span><span class="src-sym">(</span><span class="src-str">'ALWAYS' </span>=&gt; <span class="src-str">&quot;Content always rotates&quot;</span><span class="src-sym">, </span><span class="src-str">'NEXT_DAY' </span>=&gt; <span class="src-str">&quot;Content rotates once per day&quot;</span><span class="src-sym">, </span><span class="src-str">'NEXT_LOGIN' </span>=&gt; <span class="src-str">&quot;Content rotates once per session&quot;</span><span class="src-sym">, </span><span class="src-str">'NEXT_NODE' </span>=&gt; <span class="src-str">&quot;Content rotates each time you change node&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a55"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$ALLOW_REPEAT_MODES">$ALLOW_REPEAT_MODES</a> = <span class="src-key">array </span><span class="src-sym">(</span><span class="src-str">'YES' </span>=&gt; <span class="src-str">&quot;Content can be shown more than once&quot;</span><span class="src-sym">, </span><span class="src-str">'NO' </span>=&gt; <span class="src-str">&quot;Content can only be shown once&quot;</span><span class="src-sym">, </span><span class="src-str">'ONCE_PER_NODE' </span>=&gt; <span class="src-str">&quot;Content can be shown more than once, but not at the same node&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a56"></a>&nbsp;</li>
<li><a name="a57"></a>    <span class="src-key">protected </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$is_artistic_content">$is_artistic_content</a><span class="src-sym">;</span></li>
<li><a name="a58"></a>    <span class="src-key">protected </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$is_locative_content">$is_locative_content</a><span class="src-sym">;</span></li>
<li><a name="a59"></a>&nbsp;</li>
<li><a name="a60"></a>    <span class="src-comm">// is_expandable is ONLY for internal use, it use normally only set by the constructor</span></li>
<li><a name="a61"></a>        <span class="src-key">private </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$is_expandable">$is_expandable</a> = <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a62"></a>    <span class="src-comm">// this is the actual publicly available status ( so if is_expandable == true it CANNOT be true )</span></li>
<li><a name="a63"></a>        <span class="src-key">private </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$expand_status">$expand_status</a> = <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a64"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$temporary_display_num_elements">$temporary_display_num_elements</a><span class="src-sym">;</span></li>
<li><a name="a65"></a>&nbsp;</li>
<li><a name="a66"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_selection_mode">$content_selection_mode</a><span class="src-sym">;</span></li>
<li><a name="a67"></a>    <span class="src-key">private </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_group_row">$content_group_row</a><span class="src-sym">;</span></li>
<li><a name="a68"></a>&nbsp;</li>
<li><a name="a69"></a>    <span class="src-key">protected </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#method__construct">__construct</a><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span></li>
<li><a name="a70"></a>    <span class="src-sym">{</span></li>
<li><a name="a71"></a>        <span class="src-id">parent </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/Content.html#method__construct">__construct</a><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a72"></a>        <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a73"></a>        <span class="src-var">$content_id </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a74"></a>&nbsp;</li>
<li><a name="a75"></a>        <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-id">content_group</span> <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span>='<span class="src-var">$content_id</span>'</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a76"></a>        <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUniqueRes</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$row</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a77"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$row </span>== <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a78"></a>        <span class="src-sym">{</span></li>
<li><a name="a79"></a>            <span class="src-comm">/*Since the parent Content exists, the necessary data in content_group had not yet been created */</span></li>
<li><a name="a80"></a>            <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">INSERT</span> <span class="src-id">INTO</span> <span class="src-id">content_group</span> (<span class="src-id">content_group_id</span>) <span class="src-id">VALUES</span> ('<span class="src-var">$content_id</span>')</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a81"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a82"></a>            <span class="src-var">$sql </span>= <span class="src-str">&quot;</span><span class="src-str"><span class="src-id">SELECT</span> * <span class="src-id">FROM</span> <span class="src-id">content_group</span> <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span>='<span class="src-var">$content_id</span>'</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a83"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUniqueRes</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$row</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a84"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$row </span>== <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a85"></a>            <span class="src-sym">{</span></li>
<li><a name="a86"></a>                throw <span class="src-key">new </span><span class="src-id">Exception</span><span class="src-sym">(</span><a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;The content with the following id could not be found in the database: &quot;</span><span class="src-sym">)</span>.<span class="src-var">$content_id</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a87"></a>            <span class="src-sym">}</span></li>
<li><a name="a88"></a>&nbsp;</li>
<li><a name="a89"></a>        <span class="src-sym">}</span></li>
<li><a name="a90"></a>&nbsp;</li>
<li><a name="a91"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_group_row">content_group_row</a> = <span class="src-var">$row</span><span class="src-sym">;</span></li>
<li><a name="a92"></a>&nbsp;</li>
<li><a name="a93"></a>        <span class="src-comm">// These are for internal use only ( private and protected methods ) for dealing with expanding content</span></li>
<li><a name="a94"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetTemporaryDisplayNumElements">setTemporaryDisplayNumElements</a><span class="src-sym">(</span><span class="src-id">null</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a95"></a>    <span class="src-sym">}</span></li>
<li><a name="a96"></a>&nbsp;</li>
<li><a name="a97"></a>    <span class="src-doc">/** Is the content group artistic in nature?</span></li>
<li><a name="a98"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">true </span><span class="src-doc">or false */</span></li>
<li><a name="a99"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodisArtisticContent">isArtisticContent</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a100"></a>    <span class="src-sym">{</span></li>
<li><a name="a101"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_group_row">content_group_row</a><span class="src-sym">[</span><span class="src-str">'is_artistic_content'</span><span class="src-sym">] </span>== <span class="src-str">'t'</span><span class="src-sym">)</span></li>
<li><a name="a102"></a>        <span class="src-sym">{</span></li>
<li><a name="a103"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a104"></a>        <span class="src-sym">}</span></li>
<li><a name="a105"></a>        <span class="src-key">else</span></li>
<li><a name="a106"></a>        <span class="src-sym">{</span></li>
<li><a name="a107"></a>            <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a108"></a>        <span class="src-sym">}</span></li>
<li><a name="a109"></a>        <span class="src-key">return </span><span class="src-var">$retval</span><span class="src-sym">;</span></li>
<li><a name="a110"></a>    <span class="src-sym">}</span></li>
<li><a name="a111"></a>&nbsp;</li>
<li><a name="a112"></a>    <span class="src-doc">/** Set if the content group is artistic in nature,</span></li>
<li><a name="a113"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$is_artistic_content </span><span class="src-doc">true or false*/</span></li>
<li><a name="a114"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetIsArtisticContent">setIsArtisticContent</a><span class="src-sym">(</span><span class="src-var">$is_artistic_content</span><span class="src-sym">)</span></li>
<li><a name="a115"></a>    <span class="src-sym">{</span></li>
<li><a name="a116"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$is_artistic_content </span>!= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodisArtisticContent">isArtisticContent</a><span class="src-sym">(</span><span class="src-sym">)) </span><span class="src-comm">/* Only update database if there is an actual change */</span></li>
<li><a name="a117"></a>        <span class="src-sym">{</span></li>
<li><a name="a118"></a>            <span class="src-var">$is_artistic_content </span>? <span class="src-var">$is_artistic_content_sql </span>= <span class="src-str">'TRUE' </span>: <span class="src-var">$is_artistic_content_sql </span>= <span class="src-str">'FALSE'</span><span class="src-sym">;</span></li>
<li><a name="a119"></a>&nbsp;</li>
<li><a name="a120"></a>            <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a121"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">UPDATE</span> <span class="src-id">content_group</span> <span class="src-id">SET</span> <span class="src-id">is_artistic_content</span> = <span class="src-var">$is_artistic_content_sql</span> <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span> = '<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str">&quot;</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a122"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodrefresh">refresh</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a123"></a>        <span class="src-sym">}</span></li>
<li><a name="a124"></a>&nbsp;</li>
<li><a name="a125"></a>    <span class="src-sym">}</span></li>
<li><a name="a126"></a>&nbsp;</li>
<li><a name="a127"></a>    <span class="src-doc">/** Does the content shown or generated by the content group directly related to where it is viewed from?</span></li>
<li><a name="a128"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">true </span><span class="src-doc">or false */</span></li>
<li><a name="a129"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodisLocativeContent">isLocativeContent</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a130"></a>    <span class="src-sym">{</span></li>
<li><a name="a131"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_group_row">content_group_row</a><span class="src-sym">[</span><span class="src-str">'is_locative_content'</span><span class="src-sym">] </span>== <span class="src-str">'t'</span><span class="src-sym">)</span></li>
<li><a name="a132"></a>        <span class="src-sym">{</span></li>
<li><a name="a133"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a134"></a>        <span class="src-sym">}</span></li>
<li><a name="a135"></a>        <span class="src-key">else</span></li>
<li><a name="a136"></a>        <span class="src-sym">{</span></li>
<li><a name="a137"></a>            <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a138"></a>        <span class="src-sym">}</span></li>
<li><a name="a139"></a>        <span class="src-key">return </span><span class="src-var">$retval</span><span class="src-sym">;</span></li>
<li><a name="a140"></a>    <span class="src-sym">}</span></li>
<li><a name="a141"></a>&nbsp;</li>
<li><a name="a142"></a>    <span class="src-doc">/** Set if the content group is locative</span></li>
<li><a name="a143"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$is_locative_content </span><span class="src-doc">true or false</span></li>
<li><a name="a144"></a><span class="src-doc">     *  */</span></li>
<li><a name="a145"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetIsLocativeContent">setIsLocativeContent</a><span class="src-sym">(</span><span class="src-var">$is_locative_content</span><span class="src-sym">)</span></li>
<li><a name="a146"></a>    <span class="src-sym">{</span></li>
<li><a name="a147"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$is_locative_content </span>!= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodisLocativeContent">isLocativeContent</a><span class="src-sym">(</span><span class="src-sym">)) </span><span class="src-comm">/* Only update database if there is an actual change */</span></li>
<li><a name="a148"></a>        <span class="src-sym">{</span></li>
<li><a name="a149"></a>            <span class="src-var">$is_locative_content </span>? <span class="src-var">$is_locative_content_sql </span>= <span class="src-str">'TRUE' </span>: <span class="src-var">$is_locative_content_sql </span>= <span class="src-str">'FALSE'</span><span class="src-sym">;</span></li>
<li><a name="a150"></a>&nbsp;</li>
<li><a name="a151"></a>            <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a152"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">UPDATE</span> <span class="src-id">content_group</span> <span class="src-id">SET</span> <span class="src-id">is_locative_content</span> = <span class="src-var">$is_locative_content_sql</span> <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span> = '<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str">&quot;</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a153"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodrefresh">refresh</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a154"></a>        <span class="src-sym">}</span></li>
<li><a name="a155"></a>&nbsp;</li>
<li><a name="a156"></a>    <span class="src-sym">}</span></li>
<li><a name="a157"></a>&nbsp;</li>
<li><a name="a158"></a>    <span class="src-doc">/** In what order is the content displayed to the user</span></li>
<li><a name="a159"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">string, </span><span class="src-doc">a key of CONTENT_SELECTION_MODES */</span></li>
<li><a name="a160"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetContentOrderingMode">getContentOrderingMode</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a161"></a>    <span class="src-sym">{</span></li>
<li><a name="a162"></a>        <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_group_row">content_group_row</a><span class="src-sym">[</span><span class="src-str">'content_ordering_mode'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a163"></a>    <span class="src-sym">}</span></li>
<li><a name="a164"></a>&nbsp;</li>
<li><a name="a165"></a>    <span class="src-doc">/** In what order is the content displayed to the user</span></li>
<li><a name="a166"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$content_ordering_mode </span><span class="src-doc">One of the CONTENT_ORDERING_MODES constants defined in the class</span></li>
<li><a name="a167"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">true </span><span class="src-doc">if successfull</span></li>
<li><a name="a168"></a><span class="src-doc">     *  */</span></li>
<li><a name="a169"></a>    <span class="src-key">protected </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetContentOrderingMode">setContentOrderingMode</a><span class="src-sym">(</span><span class="src-var">$content_ordering_mode</span><span class="src-sym">, </span><span class="src-sym">&amp; </span><span class="src-var">$errormsg </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a170"></a>    <span class="src-sym">{</span></li>
<li><a name="a171"></a>        <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a172"></a>        <span class="src-key">if </span><span class="src-sym">(</span>isset <span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$CONTENT_ORDERING_MODES">CONTENT_ORDERING_MODES</a><span class="src-sym">[</span><span class="src-var">$content_ordering_mode</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$content_ordering_mode </span>!= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetContentOrderingMode">getContentOrderingMode</a><span class="src-sym">(</span><span class="src-sym">)) </span><span class="src-comm">/* Only update database if the mode is valid and there is an actual change */</span></li>
<li><a name="a173"></a>        <span class="src-sym">{</span></li>
<li><a name="a174"></a>            <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a175"></a>            <span class="src-var">$content_ordering_mode </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content_ordering_mode</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a176"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">UPDATE</span> <span class="src-id">content_group</span> <span class="src-id">SET</span> <span class="src-id">content_ordering_mode</span> = '<span class="src-var">$content_ordering_mode</span>' <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span> = '<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str">&quot;</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a177"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodrefresh">refresh</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a178"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a179"></a>        <span class="src-sym">}</span></li>
<li><a name="a180"></a>        <span class="src-key">elseif </span><span class="src-sym">(</span><span class="src-sym">!</span>isset <span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$CONTENT_ORDERING_MODES">CONTENT_ORDERING_MODES</a><span class="src-sym">[</span><span class="src-var">$content_ordering_mode</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a181"></a>        <span class="src-sym">{</span></li>
<li><a name="a182"></a>            <span class="src-var">$errormsg </span>= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Invalid content selection mode (must be part of CONTENT_ORDERING_MODES)&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a183"></a>            <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a184"></a>        <span class="src-sym">}</span></li>
<li><a name="a185"></a>        <span class="src-key">else</span></li>
<li><a name="a186"></a>        <span class="src-sym">{</span></li>
<li><a name="a187"></a>            <span class="src-comm">/* Successfull, but nothing modified */</span></li>
<li><a name="a188"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a189"></a>        <span class="src-sym">}</span></li>
<li><a name="a190"></a>        <span class="src-key">return </span><span class="src-var">$retval</span><span class="src-sym">;</span></li>
<li><a name="a191"></a>    <span class="src-sym">}</span></li>
<li><a name="a192"></a>&nbsp;</li>
<li><a name="a193"></a>    <span class="src-doc">/** When does the content rotate?</span></li>
<li><a name="a194"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">string, </span><span class="src-doc">a key of CONTENT_SELECTION_MODES */</span></li>
<li><a name="a195"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetContentChangesOnMode">getContentChangesOnMode</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a196"></a>    <span class="src-sym">{</span></li>
<li><a name="a197"></a>        <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_group_row">content_group_row</a><span class="src-sym">[</span><span class="src-str">'content_changes_on_mode'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a198"></a>    <span class="src-sym">}</span></li>
<li><a name="a199"></a>&nbsp;</li>
<li><a name="a200"></a>    <span class="src-doc">/** When does the content rotate?</span></li>
<li><a name="a201"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$content_changes_on_mode </span><span class="src-doc">One of the content_changes_on_modeS constants defined in the class</span></li>
<li><a name="a202"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">true </span><span class="src-doc">if successfull</span></li>
<li><a name="a203"></a><span class="src-doc">     *  */</span></li>
<li><a name="a204"></a>    <span class="src-key">protected </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetContentChangesOnMode">setContentChangesOnMode</a><span class="src-sym">(</span><span class="src-var">$content_changes_on_mode</span><span class="src-sym">, </span><span class="src-sym">&amp; </span><span class="src-var">$errormsg </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a205"></a>    <span class="src-sym">{</span></li>
<li><a name="a206"></a>        <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a207"></a>        <span class="src-key">if </span><span class="src-sym">(</span>isset <span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$CONTENT_CHANGES_ON_MODES">CONTENT_CHANGES_ON_MODES</a><span class="src-sym">[</span><span class="src-var">$content_changes_on_mode</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$content_changes_on_mode </span>!= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetContentChangesOnMode">getContentChangesOnMode</a><span class="src-sym">(</span><span class="src-sym">)) </span><span class="src-comm">/* Only update database if the mode is valid and there is an actual change */</span></li>
<li><a name="a208"></a>        <span class="src-sym">{</span></li>
<li><a name="a209"></a>            <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a210"></a>            <span class="src-var">$content_changes_on_mode </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$content_changes_on_mode</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a211"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">UPDATE</span> <span class="src-id">content_group</span> <span class="src-id">SET</span> <span class="src-id">content_changes_on_mode</span> = '<span class="src-var">$content_changes_on_mode</span>' <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span> = '<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str">&quot;</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a212"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodrefresh">refresh</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a213"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a214"></a>        <span class="src-sym">}</span></li>
<li><a name="a215"></a>        <span class="src-key">elseif </span><span class="src-sym">(</span><span class="src-sym">!</span>isset <span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$CONTENT_CHANGES_ON_MODES">CONTENT_CHANGES_ON_MODES</a><span class="src-sym">[</span><span class="src-var">$content_changes_on_mode</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a216"></a>        <span class="src-sym">{</span></li>
<li><a name="a217"></a>            <span class="src-var">$errormsg </span>= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Invalid content selection mode (must be part of CONTENT_CHANGES_ON_MODES)&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a218"></a>            <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a219"></a>        <span class="src-sym">}</span></li>
<li><a name="a220"></a>        <span class="src-key">else</span></li>
<li><a name="a221"></a>        <span class="src-sym">{</span></li>
<li><a name="a222"></a>            <span class="src-comm">/* Successfull, but nothing modified */</span></li>
<li><a name="a223"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a224"></a>        <span class="src-sym">}</span></li>
<li><a name="a225"></a>        <span class="src-key">return </span><span class="src-var">$retval</span><span class="src-sym">;</span></li>
<li><a name="a226"></a>    <span class="src-sym">}</span></li>
<li><a name="a227"></a>&nbsp;</li>
<li><a name="a228"></a>    <span class="src-doc">/** Can the same content be shown twice</span></li>
<li><a name="a229"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">'YES', </span><span class="src-doc">'NO', 'ONCE_PER_NODE' */</span></li>
<li><a name="a230"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetAllowRepeat">getAllowRepeat</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a231"></a>    <span class="src-sym">{</span></li>
<li><a name="a232"></a>        <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_group_row">content_group_row</a><span class="src-sym">[</span><span class="src-str">'allow_repeat'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a233"></a>    <span class="src-sym">}</span></li>
<li><a name="a234"></a>&nbsp;</li>
<li><a name="a235"></a>    <span class="src-doc">/** When does the content rotate?</span></li>
<li><a name="a236"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$allow_repeat </span><span class="src-doc">One of the allow_repeatS constants defined in the class</span></li>
<li><a name="a237"></a><span class="src-doc">     * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">true </span><span class="src-doc">if successfull</span></li>
<li><a name="a238"></a><span class="src-doc">     *  */</span></li>
<li><a name="a239"></a>    <span class="src-key">protected </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetAllowRepeat">setAllowRepeat</a><span class="src-sym">(</span><span class="src-var">$allow_repeat</span><span class="src-sym">, </span><span class="src-sym">&amp; </span><span class="src-var">$errormsg </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a240"></a>    <span class="src-sym">{</span></li>
<li><a name="a241"></a>        <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a242"></a>        <span class="src-key">if </span><span class="src-sym">(</span>isset <span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$ALLOW_REPEAT_MODES">ALLOW_REPEAT_MODES</a><span class="src-sym">[</span><span class="src-var">$allow_repeat</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$allow_repeat </span>!= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetAllowRepeat">getAllowRepeat</a><span class="src-sym">(</span><span class="src-sym">)) </span><span class="src-comm">/* Only update database if the mode is valid and there is an actual change */</span></li>
<li><a name="a243"></a>        <span class="src-sym">{</span></li>
<li><a name="a244"></a>            <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a245"></a>            <span class="src-var">$allow_repeat </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$allow_repeat</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a246"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">UPDATE</span> <span class="src-id">content_group</span> <span class="src-id">SET</span> <span class="src-id">allow_repeat</span> = '<span class="src-var">$allow_repeat</span>' <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span> = '<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str">&quot;</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a247"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodrefresh">refresh</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a248"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a249"></a>        <span class="src-sym">}</span></li>
<li><a name="a250"></a>        <span class="src-key">elseif </span><span class="src-sym">(</span><span class="src-sym">!</span>isset <span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$ALLOW_REPEAT_MODES">ALLOW_REPEAT_MODES</a><span class="src-sym">[</span><span class="src-var">$allow_repeat</span><span class="src-sym">]</span><span class="src-sym">))</span></li>
<li><a name="a251"></a>        <span class="src-sym">{</span></li>
<li><a name="a252"></a>            <span class="src-var">$errormsg </span>= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Invalid content selection mode (must be part of ALLOW_REPEAT_MODES)&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a253"></a>            <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a254"></a>        <span class="src-sym">}</span></li>
<li><a name="a255"></a>        <span class="src-key">else</span></li>
<li><a name="a256"></a>        <span class="src-sym">{</span></li>
<li><a name="a257"></a>            <span class="src-comm">/* Successfull, but nothing modified */</span></li>
<li><a name="a258"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a259"></a>        <span class="src-sym">}</span></li>
<li><a name="a260"></a>        <span class="src-key">return </span><span class="src-var">$retval</span><span class="src-sym">;</span></li>
<li><a name="a261"></a>    <span class="src-sym">}</span></li>
<li><a name="a262"></a>&nbsp;</li>
<li><a name="a263"></a>    <span class="src-doc">/** How many element should be picked for display at once?</span></li>
<li><a name="a264"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">integer </span><span class="src-doc">*/</span></li>
<li><a name="a265"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetDisplayNumElements">getDisplayNumElements</a><span class="src-sym">(</span><span class="src-sym">)</span></li>
<li><a name="a266"></a>    <span class="src-sym">{</span></li>
<li><a name="a267"></a>        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$temporary_display_num_elements">temporary_display_num_elements</a> == <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a268"></a>            <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$content_group_row">content_group_row</a><span class="src-sym">[</span><span class="src-str">'display_num_elements'</span><span class="src-sym">]</span><span class="src-sym">;</span></li>
<li><a name="a269"></a>        <span class="src-key">else</span></li>
<li><a name="a270"></a>            <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$temporary_display_num_elements">temporary_display_num_elements</a><span class="src-sym">;</span></li>
<li><a name="a271"></a>    <span class="src-sym">}</span></li>
<li><a name="a272"></a>&nbsp;</li>
<li><a name="a273"></a>    <span class="src-doc">/** How many element should be picked for display at once?</span></li>
<li><a name="a274"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@param </span><span class="src-doc-type">$display_num_elements </span><span class="src-doc">integer, must be greater than zero.</span></li>
<li><a name="a275"></a><span class="src-doc">    * </span><span class="src-doc-coretag">@return </span><span class="src-doc-type">true </span><span class="src-doc">if successfull</span></li>
<li><a name="a276"></a><span class="src-doc">    *  */</span></li>
<li><a name="a277"></a>    <span class="src-key">protected </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetDisplayNumElements">setDisplayNumElements</a><span class="src-sym">(</span><span class="src-var">$display_num_elements</span><span class="src-sym">, </span><span class="src-sym">&amp; </span><span class="src-var">$errormsg </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a278"></a>    <span class="src-sym">{</span></li>
<li><a name="a279"></a>        <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a280"></a>        <span class="src-key">if </span><span class="src-sym">((</span><span class="src-var">$display_num_elements </span>&gt; <span class="src-num">0</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$display_num_elements </span>!= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetDisplayNumElements">getDisplayNumElements</a><span class="src-sym">(</span><span class="src-sym">)) </span><span class="src-comm">/* Only update database if the mode is valid and there is an actual change */</span></li>
<li><a name="a281"></a>        <span class="src-sym">{</span></li>
<li><a name="a282"></a>            <span class="src-key">global </span><span class="src-var">$db</span><span class="src-sym">;</span></li>
<li><a name="a283"></a>            <span class="src-var">$allow_repeat </span>= <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">EscapeString</span><span class="src-sym">(</span><span class="src-var">$allow_repeat</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a284"></a>            <span class="src-var">$db</span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUpdate</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">UPDATE</span> <span class="src-id">content_group</span> <span class="src-id">SET</span> <span class="src-id">display_num_elements</span> = '<span class="src-var">$display_num_elements</span>' <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span> = '<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str">&quot;</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a285"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodrefresh">refresh</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a286"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a287"></a>        <span class="src-sym">}</span></li>
<li><a name="a288"></a>        <span class="src-key">elseif </span><span class="src-sym">(</span><span class="src-var">$display_num_elements </span>&lt;= <span class="src-num">0</span><span class="src-sym">)</span></li>
<li><a name="a289"></a>        <span class="src-sym">{</span></li>
<li><a name="a290"></a>            <span class="src-var">$errormsg </span>= <a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;You must display at least one element&quot;</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a291"></a>            <span class="src-var">$retval </span>= <span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a292"></a>        <span class="src-sym">}</span></li>
<li><a name="a293"></a>        <span class="src-key">else</span></li>
<li><a name="a294"></a>        <span class="src-sym">{</span></li>
<li><a name="a295"></a>            <span class="src-comm">/* Successfull, but nothing modified */</span></li>
<li><a name="a296"></a>            <span class="src-var">$retval </span>= <span class="src-id">true</span><span class="src-sym">;</span></li>
<li><a name="a297"></a>        <span class="src-sym">}</span></li>
<li><a name="a298"></a>        <span class="src-key">return </span><span class="src-var">$retval</span><span class="src-sym">;</span></li>
<li><a name="a299"></a>    <span class="src-sym">}</span></li>
<li><a name="a300"></a>&nbsp;</li>
<li><a name="a301"></a>    <span class="src-doc">/**</span></li>
<li><a name="a302"></a><span class="src-doc">     * This will a temporary limit ( NOT ACTUALLY STORED IN DATABASE )</span></li>
<li><a name="a303"></a><span class="src-doc">     * Use getDisplayNumElements to get the number of elements that can be shown</span></li>
<li><a name="a304"></a><span class="src-doc">     * at once</span></li>
<li><a name="a305"></a><span class="src-doc">     */</span></li>
<li><a name="a306"></a>    <span class="src-key">private </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetTemporaryDisplayNumElements">setTemporaryDisplayNumElements</a><span class="src-sym">(</span><span class="src-var">$temporary_num_elements</span><span class="src-sym">)</span></li>
<li><a name="a307"></a>    <span class="src-sym">{</span></li>
<li><a name="a308"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$temporary_display_num_elements">temporary_display_num_elements</a> = <span class="src-var">$temporary_num_elements</span><span class="src-sym">;</span></li>
<li><a name="a309"></a>    <span class="src-sym">}</span></li>
<li><a name="a310"></a>&nbsp;</li>
<li><a name="a311"></a>    <span class="src-key">public </span><span class="src-key">function </span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetAdminUI">getAdminUI</a><span class="src-sym">(</span><span class="src-var">$subclass_admin_interface </span>= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a312"></a>    <span class="src-sym">{</span></li>
<li><a name="a313"></a>        <span class="src-var">$html </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a314"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_class'&gt;ContentGroup (&quot;</span>.<a href="http://www.php.net/get_class">get_class</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">)</span>.<span class="src-str">&quot; instance)&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a315"></a>&nbsp;</li>
<li><a name="a316"></a>        <span class="src-comm">/* is_artistic_content */</span></li>
<li><a name="a317"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a318"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;Is artistic content?: &lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a319"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a320"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_is_artistic_content&quot;</span><span class="src-sym">;</span></li>
<li><a name="a321"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodisArtisticContent">isArtisticContent</a><span class="src-sym">(</span><span class="src-sym">) </span>? <span class="src-var">$checked </span>= <span class="src-str">'CHECKED' </span>: <span class="src-var">$checked </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a322"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">checkbox</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-var">$checked</span>&gt;\n</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a323"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a324"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a325"></a>&nbsp;</li>
<li><a name="a326"></a>        <span class="src-comm">/* is_locative_content */</span></li>
<li><a name="a327"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a328"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>. <span class="src-sym">(</span><span class="src-str">&quot;Is locative content?&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;: &lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a329"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a330"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_is_locative_content&quot;</span><span class="src-sym">;</span></li>
<li><a name="a331"></a>        <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodisLocativeContent">isLocativeContent</a><span class="src-sym">(</span><span class="src-sym">) </span>? <span class="src-var">$checked </span>= <span class="src-str">'CHECKED' </span>: <span class="src-var">$checked </span>= <span class="src-str">''</span><span class="src-sym">;</span></li>
<li><a name="a332"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">checkbox</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-var">$checked</span>&gt;\n</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a333"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a334"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a335"></a>&nbsp;</li>
<li><a name="a336"></a>        <span class="src-comm">/* content_ordering_mode */</span></li>
<li><a name="a337"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a338"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;In what order should the content displayed?&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;: &lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a339"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a340"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_content_ordering_mode&quot;</span><span class="src-sym">;</span></li>
<li><a name="a341"></a>&nbsp;</li>
<li><a name="a342"></a>        <span class="src-var">$i </span>= <span class="src-num">0</span><span class="src-sym">;</span></li>
<li><a name="a343"></a>        <span class="src-var">$tab </span>= <span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a344"></a>        <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$CONTENT_ORDERING_MODES">CONTENT_ORDERING_MODES</a> <span class="src-key">as </span><span class="src-var">$select_mode_id </span>=&gt; <span class="src-var">$select_mode_descr</span><span class="src-sym">)</span></li>
<li><a name="a345"></a>        <span class="src-sym">{</span></li>
<li><a name="a346"></a>            <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">] </span>= <span class="src-var">$select_mode_id</span><span class="src-sym">;</span></li>
<li><a name="a347"></a>            <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">] </span>= <span class="src-var">$select_mode_descr</span><span class="src-sym">;</span></li>
<li><a name="a348"></a>            <span class="src-var">$i </span>++<span class="src-sym">;</span></li>
<li><a name="a349"></a>        <span class="src-sym">}</span></li>
<li><a name="a350"></a>        <span class="src-var">$html </span>.= <span class="src-id"><a href="../WiFiDogAuthServer/FormSelectGenerator.html">FormSelectGenerator</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/FormSelectGenerator.html#methodgenerateFromArray">generateFromArray</a><span class="src-sym">(</span><span class="src-var">$tab</span><span class="src-sym">, </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetContentOrderingMode">getContentOrderingMode</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a351"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a352"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a353"></a>&nbsp;</li>
<li><a name="a354"></a>        <span class="src-comm">/*content_changes_on_mode */</span></li>
<li><a name="a355"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a356"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;When does the content rotate?&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;: &lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a357"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a358"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_content_changes_on_mode&quot;</span><span class="src-sym">;</span></li>
<li><a name="a359"></a>        <span class="src-var">$i </span>= <span class="src-num">0</span><span class="src-sym">;</span></li>
<li><a name="a360"></a>        <span class="src-var">$tab </span>= <span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a361"></a>        <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$CONTENT_CHANGES_ON_MODES">CONTENT_CHANGES_ON_MODES</a> <span class="src-key">as </span><span class="src-var">$select_mode_id </span>=&gt; <span class="src-var">$select_mode_descr</span><span class="src-sym">)</span></li>
<li><a name="a362"></a>        <span class="src-sym">{</span></li>
<li><a name="a363"></a>            <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">] </span>= <span class="src-var">$select_mode_id</span><span class="src-sym">;</span></li>
<li><a name="a364"></a>            <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">] </span>= <span class="src-var">$select_mode_descr</span><span class="src-sym">;</span></li>
<li><a name="a365"></a>            <span class="src-var">$i </span>++<span class="src-sym">;</span></li>
<li><a name="a366"></a>        <span class="src-sym">}</span></li>
<li><a name="a367"></a>        <span class="src-var">$html </span>.= <span class="src-id"><a href="../WiFiDogAuthServer/FormSelectGenerator.html">FormSelectGenerator</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/FormSelectGenerator.html#methodgenerateFromArray">generateFromArray</a><span class="src-sym">(</span><span class="src-var">$tab</span><span class="src-sym">, </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetContentChangesOnMode">getContentChangesOnMode</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a368"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a369"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a370"></a>&nbsp;</li>
<li><a name="a371"></a>        <span class="src-comm">/* allow_repeat*/</span></li>
<li><a name="a372"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a373"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Can content be shown more than once to the same user?&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;: &lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a374"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a375"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_allow_repeat&quot;</span><span class="src-sym">;</span></li>
<li><a name="a376"></a>        <span class="src-var">$i </span>= <span class="src-num">0</span><span class="src-sym">;</span></li>
<li><a name="a377"></a>        <span class="src-var">$tab </span>= <span class="src-id">null</span><span class="src-sym">;</span></li>
<li><a name="a378"></a>        <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$ALLOW_REPEAT_MODES">ALLOW_REPEAT_MODES</a> <span class="src-key">as </span><span class="src-var">$select_mode_id </span>=&gt; <span class="src-var">$select_mode_descr</span><span class="src-sym">)</span></li>
<li><a name="a379"></a>        <span class="src-sym">{</span></li>
<li><a name="a380"></a>            <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">] </span>= <span class="src-var">$select_mode_id</span><span class="src-sym">;</span></li>
<li><a name="a381"></a>            <span class="src-var">$tab</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">] </span>= <span class="src-var">$select_mode_descr</span><span class="src-sym">;</span></li>
<li><a name="a382"></a>            <span class="src-var">$i </span>++<span class="src-sym">;</span></li>
<li><a name="a383"></a>        <span class="src-sym">}</span></li>
<li><a name="a384"></a>        <span class="src-var">$html </span>.= <span class="src-id"><a href="../WiFiDogAuthServer/FormSelectGenerator.html">FormSelectGenerator</a> </span><span class="src-sym">:: </span><a href="../WiFiDogAuthServer/FormSelectGenerator.html#methodgenerateFromArray">generateFromArray</a><span class="src-sym">(</span><span class="src-var">$tab</span><span class="src-sym">, </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetAllowRepeat">getAllowRepeat</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">, </span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a385"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a386"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a387"></a>&nbsp;</li>
<li><a name="a388"></a>        <span class="src-comm">/*display_num_elements*/</span></li>
<li><a name="a389"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a390"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>. <span class="src-sym">(</span><span class="src-str">&quot;Pick how many elements for each display?&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;: &lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a391"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a392"></a>        <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_display_num_elements&quot;</span><span class="src-sym">;</span></li>
<li><a name="a393"></a>        <span class="src-var">$value </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetDisplayNumElements">getDisplayNumElements</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a394"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">text</span>' <span class="src-id">size</span>='2' <span class="src-id">value</span>='<span class="src-var">$value</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>'&gt;\n</span><span class="src-str">&quot;</span><span class="src-sym">;</span></li>
<li><a name="a395"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a396"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a397"></a>&nbsp;</li>
<li><a name="a398"></a>        <span class="src-comm">/* content_group_element (table)*/</span></li>
<li><a name="a399"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_container'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a400"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_title'&gt;&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Content group elements:&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a401"></a>&nbsp;</li>
<li><a name="a402"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;ul class='admin_section_list'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a403"></a>        <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetElements">getElements</a><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-key">as </span><span class="src-var">$element</span><span class="src-sym">)</span></li>
<li><a name="a404"></a>        <span class="src-sym">{</span></li>
<li><a name="a405"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;li class='admin_section_list_item'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a406"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_data'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a407"></a>            <span class="src-var">$html </span>.= <span class="src-var">$element</span><span class="src-sym">-&gt;</span><span class="src-id">getAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a408"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a409"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;div class='admin_section_tools'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a410"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_element_&quot;</span>.<span class="src-var">$element</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a411"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-var">$name</span>' <span class="src-id">value</span>='</span><span class="src-str">&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Delete&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a412"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a413"></a>            <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;/li&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a414"></a>        <span class="src-sym">}</span></li>
<li><a name="a415"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;li class='admin_section_list_item'&gt;\n&quot;</span><span class="src-sym">;</span></li>
<li><a name="a416"></a>        <span class="src-var">$html </span>.= <span class="src-str">&quot;&lt;b&gt;&quot;</span>.<a href="../WiFiDogAuthServer/_wifidog_classes_Locale_php.html#function_">_</a><span class="src-sym">(</span><span class="src-str">&quot;Add a new content OR select previously created content&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/b&gt;&lt;br&gt;&quot;</span><span class="src-sym">;</span></li>
<li><a name="a417"></a>        <span class="src-var">$html </span>.= <span class="src-id">self </span><span class="src-sym">:: </span><span class="src-id">getNewContentUI</span><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-id">content_group_</span>{<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new_element</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;br&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a418"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getSelectContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">content_group_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_existing_element</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-str">"</span><span class="src-id">AND</span> <span class="src-id">content_id</span> != '<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>'</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a419"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">"</span>&lt;<span class="src-id">input</span> <span class="src-id">type</span>='<span class="src-id">submit</span>' <span class="src-id">name</span>='<span class="src-id">content_group_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_existing_element_add</span>' <span class="src-id">value</span>='</span><span class="src-str"><span class="src-str">"</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Add&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;'&gt;&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a420"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/li&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a421"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/ul&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a422"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a423"></a>&nbsp;</li>
<li><a name="a424"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-var">$subclass_admin_interface</span><span class="src-sym">;</span></span></li>
<li><a name="a425"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-id">parent</span> <span class="src-sym">::</span> <span class="src-id">getAdminUI</span><span class="src-sym">(</span><span class="src-var">$html</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a426"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a427"></a>&nbsp;</li>
<li><a name="a428"></a></span><span class="src-str">    <span class="src-key">function</span> <span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a429"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a430"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodisOwner">isOwner</a><span class="src-sym">(</span><span class="src-id">User </span><span class="src-sym">:: </span><span class="src-id">getCurrentUser</span><span class="src-sym">(</span><span class="src-sym">)) </span>|| <span class="src-id">User </span><span class="src-sym">:: </span><span class="src-id">getCurrentUser</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">-&gt;</span><span class="src-id">isSuperAdmin</span><span class="src-sym">(</span><span class="src-sym">))</span></li>
<li><a name="a431"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a432"></a></span><span class="src-str">            <span class="src-id">parent</span> <span class="src-sym">::</span> <span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a433"></a>&nbsp;</li>
<li><a name="a434"></a></span><span class="src-str">            <span class="src-comm">/* is_artistic_content */</span></span></li>
<li><a name="a435"></a></span><span class="src-str">            <span class="src-var">$name</span> = <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_is_artistic_content&quot;</span><span class="src-sym">;</span></li>
<li><a name="a436"></a>            <span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>? <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetIsArtisticContent">setIsArtisticContent</a><span class="src-sym">(</span><span class="src-id">true</span><span class="src-sym">) </span>: <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetIsArtisticContent">setIsArtisticContent</a><span class="src-sym">(</span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a437"></a>&nbsp;</li>
<li><a name="a438"></a>            <span class="src-comm">/* is_locative_content */</span></li>
<li><a name="a439"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_is_locative_content&quot;</span><span class="src-sym">;</span></li>
<li><a name="a440"></a>            <span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>? <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetIsLocativeContent">setIsLocativeContent</a><span class="src-sym">(</span><span class="src-id">true</span><span class="src-sym">) </span>: <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetIsLocativeContent">setIsLocativeContent</a><span class="src-sym">(</span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a441"></a>&nbsp;</li>
<li><a name="a442"></a>            <span class="src-comm">/* content_ordering_mode */</span></li>
<li><a name="a443"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_content_ordering_mode&quot;</span><span class="src-sym">;</span></li>
<li><a name="a444"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetContentOrderingMode">setContentOrderingMode</a><span class="src-sym">(</span><span class="src-id">FormSelectGenerator </span><span class="src-sym">:: </span><span class="src-id">getResult</span><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a445"></a>&nbsp;</li>
<li><a name="a446"></a>            <span class="src-comm">/*content_changes_on_mode */</span></li>
<li><a name="a447"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_content_changes_on_mode&quot;</span><span class="src-sym">;</span></li>
<li><a name="a448"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetContentChangesOnMode">setContentChangesOnMode</a><span class="src-sym">(</span><span class="src-id">FormSelectGenerator </span><span class="src-sym">:: </span><span class="src-id">getResult</span><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a449"></a>&nbsp;</li>
<li><a name="a450"></a>            <span class="src-comm">/* allow_repeat*/</span></li>
<li><a name="a451"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_allow_repeat&quot;</span><span class="src-sym">;</span></li>
<li><a name="a452"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetAllowRepeat">setAllowRepeat</a><span class="src-sym">(</span><span class="src-id">FormSelectGenerator </span><span class="src-sym">:: </span><span class="src-id">getResult</span><span class="src-sym">(</span><span class="src-var">$name</span><span class="src-sym">, </span><span class="src-id">null</span><span class="src-sym">))</span><span class="src-sym">;</span></li>
<li><a name="a453"></a>&nbsp;</li>
<li><a name="a454"></a>            <span class="src-comm">/*display_num_elements*/</span></li>
<li><a name="a455"></a>            <span class="src-var">$name </span>= <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_display_num_elements&quot;</span><span class="src-sym">;</span></li>
<li><a name="a456"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetDisplayNumElements">setDisplayNumElements</a><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a457"></a>&nbsp;</li>
<li><a name="a458"></a>            <span class="src-comm">/* content_group_element */</span></li>
<li><a name="a459"></a>            <span class="src-key">foreach </span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetElements">getElements</a><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-key">as </span><span class="src-var">$element</span><span class="src-sym">)</span></li>
<li><a name="a460"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a461"></a></span><span class="src-str">                <span class="src-var">$name</span> = <span class="src-str">&quot;content_group_&quot;</span>.<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>.<span class="src-str">&quot;_element_&quot;</span>.<span class="src-var">$element</span><span class="src-sym">-&gt;</span><span class="src-id">GetId</span><span class="src-sym">(</span><span class="src-sym">)</span>.<span class="src-str">&quot;_erase&quot;</span><span class="src-sym">;</span></li>
<li><a name="a462"></a>                <span class="src-key">if </span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty </span><span class="src-sym">(</span><span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">]</span><span class="src-sym">) </span>&amp;&amp; <span class="src-var">$_REQUEST</span><span class="src-sym">[</span><span class="src-var">$name</span><span class="src-sym">] </span>== <span class="src-id">true</span><span class="src-sym">)</span></li>
<li><a name="a463"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a464"></a></span><span class="src-str">                    <span class="src-var">$element</span></span><span class="src-sym">-&gt;</span><span class="src-id">delete</span><span class="src-sym">(</span><span class="src-var">$errmsg</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a465"></a>                </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a466"></a></span><span class="src-str">                <span class="src-key">else</span></span></li>
<li><a name="a467"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a468"></a></span><span class="src-str">                    <span class="src-var">$element</span></span><span class="src-sym">-&gt;</span><span class="src-id">processAdminUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a469"></a>                </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a470"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a471"></a>&nbsp;</li>
<li><a name="a472"></a></span><span class="src-str">            <span class="src-comm">// The two following calls will either add a new element or add an existing one ( depending on what button the user clicked</span></span></li>
<li><a name="a473"></a></span><span class="src-str"><span class="src-comm"></span>            <span class="src-comm">/* We explicitely call the ContentGroupElement version of processNewContentUI */</span></span></li>
<li><a name="a474"></a></span><span class="src-str">            <span class="src-id">ContentGroupElement</span> <span class="src-sym">::</span> <span class="src-id">processNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">content_group_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_new_element</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-var">$this</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a475"></a></span><span class="src-str">            <span class="src-comm">// Last parameters allows for existing content ( if any was selected )</span></span></li>
<li><a name="a476"></a></span><span class="src-str"><span class="src-comm"></span>            <span class="src-id">ContentGroupElement</span> <span class="src-sym">::</span> <span class="src-id">processNewContentUI</span><span class="src-sym">(</span><span class="src-str">"</span><span class="src-id">content_group_</span></span>{<span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">}</span><span class="src-id">_existing_element</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">,</span> <span class="src-var">$this</span><span class="src-sym">,</span> <span class="src-id">true</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a477"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a478"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a479"></a>&nbsp;</li>
<li><a name="a480"></a></span><span class="src-str">    /** Is this Content element displayable at this hotspot</span></li>
<li><a name="a481"></a></span><span class="src-str">     * @param $node Node, optionnal</span></li>
<li><a name="a482"></a></span><span class="src-str">     * @return true or false */</span></li>
<li><a name="a483"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">isDisplayableAt</span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">)</span></span></li>
<li><a name="a484"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a485"></a></span><span class="src-str">        <span class="src-var">$old_curent_node</span> = <span class="src-id">Node</span><span class="src-sym">::</span><span class="src-id">getCurrentNode</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a486"></a></span><span class="src-str">        <span class="src-id">Node</span><span class="src-sym">::</span><span class="src-id">setCurrentNode</span><span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a487"></a>&nbsp;</li>
<li><a name="a488"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-id">count</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetDisplayElements">getDisplayElements</a><span class="src-sym">(</span><span class="src-sym">))</span>&gt;<span class="src-num">0</span><span class="src-sym">) </span><span class="src-str"></span><span class="src-sym">{</span></span></li>
<li><a name="a489"></a></span><span class="src-str">            <span class="src-var">$retval</span> = <span class="src-id">true</span><span class="src-sym">;</span></span></li>
<li><a name="a490"></a></span><span class="src-str">        <span class="src-sym">}</span> <span class="src-key">else</span> <span class="src-sym">{</span></span></li>
<li><a name="a491"></a></span><span class="src-str">            <span class="src-var">$retval</span> = <span class="src-id">false</span><span class="src-sym">;</span></span></li>
<li><a name="a492"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a493"></a>&nbsp;</li>
<li><a name="a494"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$old_curent_node</span> != <span class="src-id">null</span><span class="src-sym">)</span> <span class="src-sym">{</span></span></li>
<li><a name="a495"></a></span><span class="src-str">            <span class="src-id">Node</span><span class="src-sym">::</span><span class="src-id">setCurrentNode</span><span class="src-sym">(</span><span class="src-var">$old_curent_node</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a496"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a497"></a>&nbsp;</li>
<li><a name="a498"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$retval</span><span class="src-sym">;</span></span></li>
<li><a name="a499"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a500"></a>&nbsp;</li>
<li><a name="a501"></a>&nbsp;</li>
<li><a name="a502"></a></span><span class="src-str">    <span class="src-comm">/**Get the next element or elements to be displayed, depending on the display mode</span></span></li>
<li><a name="a503"></a></span><span class="src-str"><span class="src-comm">    * @return an array of ContentGroupElement or an empty arrray */</span></span></li>
<li><a name="a504"></a></span><span class="src-str">    <span class="src-key">function</span> <span class="src-id">getDisplayElements</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a505"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a506"></a></span><span class="src-str">        <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a507"></a></span><span class="src-str">        <span class="src-var">$retval</span> = <span class="src-key">array</span> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a508"></a></span><span class="src-str">        <span class="src-var">$user</span> = <span class="src-id">User</span> <span class="src-sym">::</span> <span class="src-id">getCurrentUser</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a509"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$user</span><span class="src-sym">)</span></span></li>
<li><a name="a510"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a511"></a></span><span class="src-str">            <span class="src-var">$user_id</span> = <span class="src-var">$user</span></span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a512"></a>        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a513"></a></span><span class="src-str">        <span class="src-key">else</span></span></li>
<li><a name="a514"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a515"></a></span><span class="src-str">            <span class="src-var">$user_id</span> = <span class="src-str">''</span><span class="src-sym">;</span></span></li>
<li><a name="a516"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a517"></a></span><span class="src-str">        <span class="src-var">$node</span> = <span class="src-id">Node</span> <span class="src-sym">::</span> <span class="src-id">getCurrentNode</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a518"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$node</span><span class="src-sym">)</span></span></li>
<li><a name="a519"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a520"></a></span><span class="src-str">            <span class="src-var">$node_id</span> = <span class="src-var">$node</span></span><span class="src-sym">-&gt;</span><span class="src-id">getId</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a521"></a>        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a522"></a></span><span class="src-str">        <span class="src-key">else</span></span></li>
<li><a name="a523"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a524"></a></span><span class="src-str">            <span class="src-var">$node_id</span> = <span class="src-str">''</span><span class="src-sym">;</span></span></li>
<li><a name="a525"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a526"></a></span><span class="src-str">        <span class="src-var">$display_num_elements</span> = <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetDisplayNumElements">getDisplayNumElements</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a527"></a>&nbsp;</li>
<li><a name="a528"></a>        /** First, find if we have content to display again because we haven't passed the rotation period */</li>
<li><a name="a529"></a>        <span class="src-comm">/*  'ALWAYS' =&gt; &quot;Content always rotates&quot;</span></li>
<li><a name="a530"></a><span class="src-comm">         *  'NEXT_DAY' =&gt; &quot;Content rotates once per day&quot;</span></li>
<li><a name="a531"></a><span class="src-comm">         *  'NEXT_LOGIN' =&gt; &quot;Content rotates once per session&quot;</span></li>
<li><a name="a532"></a><span class="src-comm">         *  'NEXT_NODE' =&gt; &quot;Content rotates each time you change node&quot;*/</span></li>
<li><a name="a533"></a>        <span class="src-var">$content_changes_on_mode </span>= <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetContentChangesOnMode">getContentChangesOnMode</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a534"></a>&nbsp;</li>
<li><a name="a535"></a>        <span class="src-var">$redisplay_objects </span>= <span class="src-key">array </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a536"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_changes_on_mode </span>!= <span class="src-str">'ALWAYS'</span><span class="src-sym">)</span></li>
<li><a name="a537"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a538"></a></span><span class="src-str">            <span class="src-var">$sql</span> = <span class="src-str">&quot;SELECT content_group_element_id FROM content_group_element \n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a539"></a></span><span class="src-str">            <span class="src-var">$sql</span> .= <span class="src-str">&quot;JOIN content_display_log ON (content_group_element_id=content_id) \n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a540"></a></span><span class="src-str">            <span class="src-var">$sql</span> .= <span class="src-str">"</span> <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>' \n</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a541"></a>&nbsp;</li>
<li><a name="a542"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$content_changes_on_mode</span> == <span class="src-str">'NEXT_DAY'</span><span class="src-sym">)</span></span></li>
<li><a name="a543"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a544"></a></span><span class="src-str">                <span class="src-var">$sql</span> .= <span class="src-str">&quot;AND date_trunc('day', last_display_timestamp) = date_trunc('day', CURRENT_DATE) \n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a545"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a546"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$content_changes_on_mode</span> == <span class="src-str">'NEXT_LOGIN'</span><span class="src-sym">)</span></span></li>
<li><a name="a547"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a548"></a></span><span class="src-str">                <span class="src-comm">/**@todo Must fix, this will fail if the user never really connected from a hotspot... */</span></span></li>
<li><a name="a549"></a></span><span class="src-str">                <span class="src-var">$sql</span> .= <span class="src-str">"</span><span class="src-id">AND</span> <span class="src-id">last_display_timestamp</span> &gt; (<span class="src-id">SELECT</span> <span class="src-id">timestamp_in</span> <span class="src-id">FROM</span> <span class="src-id">connections</span> <span class="src-id">WHERE</span> <span class="src-id">user_id</span>='<span class="src-var">$user_id</span>' <span class="src-id">ORDER</span> <span class="src-id">BY</span> <span class="src-id">timestamp_in</span> <span class="src-id">DESC</span> <span class="src-id">LIMIT</span> 1) \n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a550"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a551"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$content_changes_on_mode</span> == <span class="src-str">'NEXT_NODE'</span><span class="src-sym">)</span></span></li>
<li><a name="a552"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a553"></a></span><span class="src-str">                /** We find the close time of the last connection from another node */</span></li>
<li><a name="a554"></a></span><span class="src-str">                <span class="src-var">$sql</span> .= <span class="src-str">"</span><span class="src-id">AND</span> <span class="src-id">last_display_timestamp</span> &gt; (<span class="src-id">SELECT</span> <span class="src-id">timestamp_out</span> <span class="src-id">FROM</span> <span class="src-id">connections</span> <span class="src-id">WHERE</span> <span class="src-id">user_id</span>='<span class="src-var">$user_id</span>' <span class="src-id">AND</span> <span class="src-id">node_id</span> != '<span class="src-var">$node_id</span>' <span class="src-id">ORDER</span> <span class="src-id">BY</span> <span class="src-id">timestamp_in</span> <span class="src-id">DESC</span> <span class="src-id">LIMIT</span> 1) \n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a555"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a556"></a></span><span class="src-str">            <span class="src-comm">/* There usually won't be more than one, but if there is, we want the most recents */</span></span></li>
<li><a name="a557"></a></span><span class="src-str">            <span class="src-var">$sql</span> .= <span class="src-str">&quot; ORDER BY last_display_timestamp DESC &quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a558"></a></span><span class="src-str">            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$redisplay_rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a559"></a>            <span class="src-var">$redisplay_objects </span>= <span class="src-key">array </span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a560"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$redisplay_rows </span>!= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a561"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a562"></a></span><span class="src-str">                <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$redisplay_rows</span> <span class="src-key">as</span> <span class="src-var">$redisplay_row</span><span class="src-sym">)</span></span></li>
<li><a name="a563"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a564"></a></span><span class="src-str">                    <span class="src-var">$object</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$redisplay_row</span><span class="src-sym">[</span><span class="src-str">'content_group_element_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a565"></a></span><span class="src-str">                    <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$object</span></span><span class="src-sym">-&gt;</span><span class="src-id">isDisplayableAt</span><span class="src-sym">(</span><span class="src-id">Node </span><span class="src-sym">:: </span><span class="src-id">GetCurrentNode</span><span class="src-sym">(</span><span class="src-sym">)) </span>== <span class="src-id">true</span><span class="src-sym">) </span>/** Only content available at this hotspot are considered */</li>
<li><a name="a566"></a>                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a567"></a></span><span class="src-str">                        <span class="src-var">$redisplay_objects</span><span class="src-sym">[</span><span class="src-sym">]</span> = <span class="src-var">$object</span><span class="src-sym">;</span></span></li>
<li><a name="a568"></a></span><span class="src-str">                    <span class="src-sym">}</span></span></li>
<li><a name="a569"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a570"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a571"></a></span><span class="src-str">            <span class="src-comm">/* Pick the proper number of elements to be re-displayed */</span></span></li>
<li><a name="a572"></a></span><span class="src-str">            <span class="src-var">$redisplay_objects</span> = <span class="src-id">array_slice</span><span class="src-sym">(</span><span class="src-var">$redisplay_objects</span><span class="src-sym">,</span> <span class="src-num">0</span><span class="src-sym">,</span> <span class="src-var">$display_num_elements</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a573"></a>&nbsp;</li>
<li><a name="a574"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a575"></a>&nbsp;</li>
<li><a name="a576"></a></span><span class="src-str">        <span class="src-var">$new_objects</span> = <span class="src-key">array</span> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a577"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-id">count</span><span class="src-sym">(</span><span class="src-var">$redisplay_objects</span><span class="src-sym">)</span> < <span class="src-var">$display_num_elements</span><span class="src-sym">)</span></span></li>
<li><a name="a578"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a579"></a></span><span class="src-str">            <span class="src-comm">/* We need new content */</span></span></li>
<li><a name="a580"></a>&nbsp;</li>
<li><a name="a581"></a></span><span class="src-str">            <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">SELECT</span> <span class="src-id">content_group_element_id</span> <span class="src-id">FROM</span> <span class="src-id">content_group_element</span> <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>' \n</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a582"></a>&nbsp;</li>
<li><a name="a583"></a></span><span class="src-str">            <span class="src-comm">/*'YES' =&gt; &quot;Content can be shown more than once&quot;, 'NO' =&gt; &quot;Content can only be shown once&quot;, 'ONCE_PER_NODE' =&gt; &quot;Content can be shown more than once, but not at the same node&quot;*/</span></span></li>
<li><a name="a584"></a></span><span class="src-str">            <span class="src-var">$allow_repeat</span> = <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetAllowRepeat">getAllowRepeat</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a585"></a>&nbsp;</li>
<li><a name="a586"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$allow_repeat </span>== <span class="src-str">'NO'</span><span class="src-sym">)</span></li>
<li><a name="a587"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a588"></a></span><span class="src-str">                <span class="src-var">$sql</span> .= <span class="src-str">"</span><span class="src-id">AND</span> <span class="src-id">content_group_element_id</span> <span class="src-id">NOT</span> <span class="src-id">IN</span> (<span class="src-id">SELECT</span> <span class="src-id">content_id</span> <span class="src-id">FROM</span> <span class="src-id">content_display_log</span> <span class="src-id">WHERE</span> <span class="src-id">user_id</span> = '<span class="src-var">$user_id</span>') \n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a589"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a590"></a></span><span class="src-str">            <span class="src-key">elseif</span> <span class="src-sym">(</span><span class="src-var">$allow_repeat</span> == <span class="src-str">'ONCE_PER_NODE'</span><span class="src-sym">)</span></span></li>
<li><a name="a591"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a592"></a></span><span class="src-str">                <span class="src-var">$sql</span> .= <span class="src-str">"</span><span class="src-id">AND</span> <span class="src-id">content_group_element_id</span> <span class="src-id">NOT</span> <span class="src-id">IN</span> (<span class="src-id">SELECT</span> <span class="src-id">content_id</span> <span class="src-id">FROM</span> <span class="src-id">content_display_log</span> <span class="src-id">WHERE</span> <span class="src-id">user_id</span> = '<span class="src-var">$user_id</span>' <span class="src-id">AND</span>  <span class="src-id">node_id</span> = '<span class="src-var">$node_id</span>') \n<span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a593"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a594"></a>&nbsp;</li>
<li><a name="a595"></a></span><span class="src-str">            <span class="src-comm">/* 'RANDOM' =&gt; &quot;Pick content elements randomly&quot;,'SEQUENTIAL' =&gt; &quot;Pick content elements in sequential order&quot; */</span></span></li>
<li><a name="a596"></a></span><span class="src-str">            <span class="src-var">$content_ordering_mode</span> = <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetContentOrderingMode">getContentOrderingMode</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a597"></a>&nbsp;</li>
<li><a name="a598"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$content_ordering_mode </span>== <span class="src-str">'SEQUENTIAL'</span><span class="src-sym">)</span></li>
<li><a name="a599"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a600"></a></span><span class="src-str">                <span class="src-var">$order_by</span> = <span class="src-str">' ORDER BY display_order '</span><span class="src-sym">;</span></span></li>
<li><a name="a601"></a></span><span class="src-str">            <span class="src-var">$sql_last_order</span> = <span class="src-str">&quot;SELECT display_order FROM content_group_element \n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a602"></a></span><span class="src-str">            <span class="src-var">$sql_last_order</span> .= <span class="src-str">&quot;JOIN content_display_log ON (content_group_element_id=content_id) \n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a603"></a></span><span class="src-str">            <span class="src-var">$sql_last_order</span> .= <span class="src-str">"</span> <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>' \n</span><span class="src-str"><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a604"></a></span><span class="src-str">            <span class="src-var">$sql_last_order</span> .= <span class="src-str">&quot; ORDER BY last_display_timestamp DESC LIMIT 1&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a605"></a></span><span class="src-str">            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSqlUniqueRes</span><span class="src-sym">(</span><span class="src-var">$sql_last_order</span><span class="src-sym">, </span><span class="src-var">$last_order_row</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a606"></a>            <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$last_order_row</span><span class="src-sym">[</span><span class="src-str">'display_order'</span><span class="src-sym">]</span>!=<span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a607"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a608"></a></span><span class="src-str">            <span class="src-var">$last_order</span>=<span class="src-var">$last_order_row</span><span class="src-sym">[</span><span class="src-str">'display_order'</span><span class="src-sym">]</span><span class="src-sym">;</span></span></li>
<li><a name="a609"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a610"></a></span><span class="src-str">            <span class="src-key">else</span></span></li>
<li><a name="a611"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a612"></a></span><span class="src-str">            <span class="src-var">$last_order</span>=<span class="src-num">0</span><span class="src-sym">;</span></span></li>
<li><a name="a613"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a614"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a615"></a></span><span class="src-str">            <span class="src-key">else</span></span></li>
<li><a name="a616"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a617"></a></span><span class="src-str">                <span class="src-var">$order_by</span> = <span class="src-str">' '</span><span class="src-sym">;</span></span></li>
<li><a name="a618"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a619"></a></span><span class="src-str">            <span class="src-var">$sql</span> .= <span class="src-var">$order_by</span><span class="src-sym">;</span></span></li>
<li><a name="a620"></a>&nbsp;</li>
<li><a name="a621"></a></span><span class="src-str">            <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$element_rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a622"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$element_rows </span>== <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a623"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a624"></a></span><span class="src-str">                <span class="src-var">$element_rows</span> = <span class="src-key">array</span> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a625"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a626"></a></span><span class="src-str">            <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$element_rows</span> <span class="src-key">as</span> <span class="src-var">$element_row</span><span class="src-sym">)</span></span></li>
<li><a name="a627"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a628"></a></span><span class="src-str">                <span class="src-var">$object</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$element_row</span><span class="src-sym">[</span><span class="src-str">'content_group_element_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a629"></a></span><span class="src-str">                <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$object</span></span><span class="src-sym">-&gt;</span><span class="src-id">isDisplayableAt</span><span class="src-sym">(</span><span class="src-id">Node </span><span class="src-sym">:: </span><span class="src-id">GetCurrentNode</span><span class="src-sym">(</span><span class="src-sym">)) </span>== <span class="src-id">true</span><span class="src-sym">) </span>/** Only content available at this hotspot are considered */</li>
<li><a name="a630"></a>                </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a631"></a></span><span class="src-str">                    <span class="src-var">$new_objects</span><span class="src-sym">[</span><span class="src-sym">]</span> = <span class="src-var">$object</span><span class="src-sym">;</span></span></li>
<li><a name="a632"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a633"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a634"></a>&nbsp;</li>
<li><a name="a635"></a></span><span class="src-str">            <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$content_ordering_mode</span> == <span class="src-str">'RANDOM'</span><span class="src-sym">)</span></span></li>
<li><a name="a636"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a637"></a></span><span class="src-str">                <span class="src-id">shuffle</span><span class="src-sym">(</span><span class="src-var">$new_objects</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a638"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a639"></a></span><span class="src-str">            <span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$content_ordering_mode</span> == <span class="src-str">'SEQUENTIAL'</span><span class="src-sym">)</span></span></li>
<li><a name="a640"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a641"></a></span><span class="src-str">                <span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$new_objects</span> <span class="src-key">as</span> <span class="src-var">$object</span><span class="src-sym">)</span></span></li>
<li><a name="a642"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a643"></a></span><span class="src-str">                    <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$object</span></span><span class="src-sym">-&gt;</span><span class="src-id">getDisplayOrder</span><span class="src-sym">(</span><span class="src-sym">)</span>&lt;=<span class="src-var">$last_order</span><span class="src-sym">)</span></li>
<li><a name="a644"></a>                    </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a645"></a></span><span class="src-str">                        <span class="src-id">array_push</span> <span class="src-sym">(</span> <span class="src-var">$new_objects</span><span class="src-sym">,</span> <span class="src-id">array_shift</span> <span class="src-sym">(</span> <span class="src-var">$new_objects</span> <span class="src-sym">))</span><span class="src-sym">;</span></span></li>
<li><a name="a646"></a></span><span class="src-str">                        <span class="src-comm">//echo &quot; Pushed &quot;.$object-&gt;getDisplayOrder();</span></span></li>
<li><a name="a647"></a></span><span class="src-str"><span class="src-comm"></span>                    <span class="src-sym">}</span></span></li>
<li><a name="a648"></a></span><span class="src-str">                <span class="src-sym">}</span></span></li>
<li><a name="a649"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a650"></a>&nbsp;</li>
<li><a name="a651"></a></span><span class="src-str">            /** Pick the proper number of elements */</span></li>
<li><a name="a652"></a></span><span class="src-str">            <span class="src-var">$num_to_pick</span> = <span class="src-var">$display_num_elements</span> - <span class="src-id">count</span><span class="src-sym">(</span><span class="src-var">$redisplay_objects</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a653"></a></span><span class="src-str">            <span class="src-var">$new_objects</span> = <span class="src-id">array_slice</span><span class="src-sym">(</span><span class="src-var">$new_objects</span><span class="src-sym">,</span> <span class="src-num">0</span><span class="src-sym">,</span> <span class="src-var">$num_to_pick</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a654"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a655"></a></span><span class="src-str">        <span class="src-comm">/*</span></span></li>
<li><a name="a656"></a></span><span class="src-str"><span class="src-comm">        echo &quot;&lt;pre&gt;Redisplay: &quot;;</span></span></li>
<li><a name="a657"></a></span><span class="src-str"><span class="src-comm">        print_r($redisplay_objects);</span></span></li>
<li><a name="a658"></a></span><span class="src-str"><span class="src-comm">        echo &quot;New objects: &quot;;</span></span></li>
<li><a name="a659"></a></span><span class="src-str"><span class="src-comm">        print_r($new_objects);</span></span></li>
<li><a name="a660"></a></span><span class="src-str"><span class="src-comm">        echo &quot;&lt;/pre&gt;&quot;;</span></span></li>
<li><a name="a661"></a></span><span class="src-str"><span class="src-comm">*/</span></span></li>
<li><a name="a662"></a></span><span class="src-str">        <span class="src-var">$retval</span> = <span class="src-id">array_merge</span><span class="src-sym">(</span><span class="src-var">$new_objects</span><span class="src-sym">,</span> <span class="src-var">$redisplay_objects</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a663"></a></span><span class="src-str">        <span class="src-comm">//echo count($retval).' returned &lt;br&gt;';</span></span></li>
<li><a name="a664"></a></span><span class="src-str"><span class="src-comm"></span>        <span class="src-key">return</span> <span class="src-var">$retval</span><span class="src-sym">;</span></span></li>
<li><a name="a665"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a666"></a>&nbsp;</li>
<li><a name="a667"></a></span><span class="src-str">    /**</span></li>
<li><a name="a668"></a></span><span class="src-str">     * This attribute is for internal use ( to tell if a certain class could be</span></li>
<li><a name="a669"></a></span><span class="src-str">     * expanded )</span></li>
<li><a name="a670"></a></span><span class="src-str">     * @param $status boolean</span></li>
<li><a name="a671"></a></span><span class="src-str">     */</span></li>
<li><a name="a672"></a></span><span class="src-str">    <span class="src-key">protected</span> <span class="src-key">function</span> <span class="src-id">setIsExpandable</span><span class="src-sym">(</span><span class="src-var">$status</span><span class="src-sym">)</span></span></li>
<li><a name="a673"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a674"></a></span><span class="src-str">        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-id">is_bool</span><span class="src-sym">(</span><span class="src-var">$status</span><span class="src-sym">))</span></span></li>
<li><a name="a675"></a></span><span class="src-str">            <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$is_expandable">is_expandable</a> = <span class="src-var">$status</span><span class="src-sym">;</span></li>
<li><a name="a676"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a677"></a>&nbsp;</li>
<li><a name="a678"></a></span><span class="src-str">    /**</span></li>
<li><a name="a679"></a></span><span class="src-str">     * Tells if this object could be expanded</span></li>
<li><a name="a680"></a></span><span class="src-str">     */</span></li>
<li><a name="a681"></a></span><span class="src-str">    <span class="src-key">protected</span> <span class="src-key">function</span> <span class="src-id">isExpandable</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a682"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a683"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$is_expandable">is_expandable</a><span class="src-sym">;</span></li>
<li><a name="a684"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a685"></a>&nbsp;</li>
<li><a name="a686"></a></span><span class="src-str">    /**</span></li>
<li><a name="a687"></a></span><span class="src-str">     * Will expand content ONLY if allowed by isExpandable (which is protected)</span></li>
<li><a name="a688"></a></span><span class="src-str">     * @param $status boolean</span></li>
<li><a name="a689"></a></span><span class="src-str">     */</span></li>
<li><a name="a690"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">setExpandStatus</span><span class="src-sym">(</span><span class="src-var">$status</span><span class="src-sym">)</span></span></li>
<li><a name="a691"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a692"></a></span><span class="src-str">        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodisExpandable">isExpandable</a><span class="src-sym">(</span><span class="src-sym">) </span>&amp;&amp; <span class="src-id">is_bool</span><span class="src-sym">(</span><span class="src-var">$status</span><span class="src-sym">))</span></li>
<li><a name="a693"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a694"></a></span><span class="src-str">            <span class="src-comm">//TODO: Try to find a better solution to this problem...</span></span></li>
<li><a name="a695"></a></span><span class="src-str"><span class="src-comm"></span>            <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$status</span> == <span class="src-id">true</span><span class="src-sym">)</span></span></li>
<li><a name="a696"></a></span><span class="src-str">                <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetTemporaryDisplayNumElements">setTemporaryDisplayNumElements</a><span class="src-sym">(</span><span class="src-num">3000</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a697"></a>            <span class="src-key">else</span></li>
<li><a name="a698"></a>                <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodsetTemporaryDisplayNumElements">setTemporaryDisplayNumElements</a><span class="src-sym">(</span><span class="src-id">null</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a699"></a>            <span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$expand_status">expand_status</a> = <span class="src-var">$status</span><span class="src-sym">;</span></li>
<li><a name="a700"></a>        </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a701"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a702"></a>&nbsp;</li>
<li><a name="a703"></a></span><span class="src-str">    /**</span></li>
<li><a name="a704"></a></span><span class="src-str">     * Get the expand status</span></li>
<li><a name="a705"></a></span><span class="src-str">     *</span></li>
<li><a name="a706"></a></span><span class="src-str">     * WARNING</span></li>
<li><a name="a707"></a></span><span class="src-str">     * NON expandable contents ie PatternLanguage will NEVER return true</span></li>
<li><a name="a708"></a></span><span class="src-str">     */</span></li>
<li><a name="a709"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">getExpandStatus</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a710"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a711"></a></span><span class="src-str">        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$expand_status">expand_status</a> == <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a712"></a>            <span class="src-key">return </span><span class="src-id">false</span><span class="src-sym">;</span></li>
<li><a name="a713"></a>        <span class="src-key">return </span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#var$expand_status">expand_status</a><span class="src-sym">;</span></li>
<li><a name="a714"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a715"></a>&nbsp;</li>
<li><a name="a716"></a></span><span class="src-str">    /** Retreives the user interface of this object.  Anything that overrides this method should call the parent method with it's output at the END of processing.</span></li>
<li><a name="a717"></a></span><span class="src-str">     * @param $subclass_admin_interface Html content of the interface element of a children</span></li>
<li><a name="a718"></a></span><span class="src-str">     * @param boolean $hide_elements allows the child class ( for example</span></li>
<li><a name="a719"></a></span><span class="src-str">     * Pattern Language) to tell the content group not to display elements ) for</span></li>
<li><a name="a720"></a></span><span class="src-str">     * elements that need to be hidden before subscription</span></li>
<li><a name="a721"></a></span><span class="src-str">     * @return The HTML fragment for this interface */</span></li>
<li><a name="a722"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">getUserUI</span><span class="src-sym">(</span><span class="src-var">$subclass_user_interface</span> = <span class="src-id">null</span><span class="src-sym">,</span> <span class="src-var">$hide_elements</span> = <span class="src-id">false</span><span class="src-sym">)</span></span></li>
<li><a name="a723"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a724"></a></span><span class="src-str">        <span class="src-var">$html</span> = <span class="src-str">''</span><span class="src-sym">;</span></span></li>
<li><a name="a725"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_container'&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a726"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;div class='user_ui_object_class'&gt;ContentGroup (&quot;</span>.<span class="src-id">get_class</span><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">)</span>.<span class="src-str">&quot; instance)&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a727"></a>&nbsp;</li>
<li><a name="a728"></a></span><span class="src-str">        <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$hide_elements</span> == <span class="src-id">false</span><span class="src-sym">)</span></span></li>
<li><a name="a729"></a></span><span class="src-str">        <span class="src-sym">{</span></span></li>
<li><a name="a730"></a></span><span class="src-str">            <span class="src-var">$display_elements</span> = <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetDisplayElements">getDisplayElements</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a731"></a>            <span class="src-key">if </span><span class="src-sym">(</span><span class="src-id">count</span><span class="src-sym">(</span><span class="src-var">$display_elements</span><span class="src-sym">) </span>&gt; <span class="src-num">0</span><span class="src-sym">)</span></li>
<li><a name="a732"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a733"></a></span><span class="src-str">                <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$display_elements</span> <span class="src-key">as</span> <span class="src-var">$display_element</span><span class="src-sym">)</span></span></li>
<li><a name="a734"></a></span><span class="src-str">                <span class="src-sym">{</span></span></li>
<li><a name="a735"></a></span><span class="src-str">                    <span class="src-comm">// If the content group logging is disabled, all the children will inherit this property temporarly</span></span></li>
<li><a name="a736"></a></span><span class="src-str"><span class="src-comm"></span>                    <span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodgetLoggingStatus">getLoggingStatus</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a737"></a>                        <span class="src-var">$display_element</span><span class="src-sym">-&gt;</span><span class="src-id">setLoggingStatus</span><span class="src-sym">(</span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a738"></a>                    <span class="src-var">$html </span>.= <span class="src-var">$display_element</span><span class="src-sym">-&gt;</span><span class="src-id">getUserUI</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a739"></a>                </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a740"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a741"></a></span><span class="src-str">            <span class="src-key">else</span></span></li>
<li><a name="a742"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a743"></a></span><span class="src-str">                <span class="src-var">$html</span> .= <span class="src-str">'&lt;p class=&quot;warningmsg&quot;&gt;'</span>.<span class="src-id">_</span><span class="src-sym">(</span><span class="src-str">&quot;Sorry, no elements available at this hotspot or all elements of the content group have already been shown&quot;</span><span class="src-sym">)</span>.<span class="src-str">&quot;&lt;/p&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a744"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a745"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a746"></a>&nbsp;</li>
<li><a name="a747"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-var">$subclass_user_interface</span><span class="src-sym">;</span></span></li>
<li><a name="a748"></a></span><span class="src-str">        <span class="src-var">$html</span> .= <span class="src-str">&quot;&lt;/div&gt;\n&quot;</span><span class="src-sym">;</span></span></li>
<li><a name="a749"></a>&nbsp;</li>
<li><a name="a750"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-id">parent</span> <span class="src-sym">::</span> <span class="src-id">getUserUI</span><span class="src-sym">(</span><span class="src-var">$html</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a751"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a752"></a>&nbsp;</li>
<li><a name="a753"></a></span><span class="src-str">    <span class="src-comm">/**Get all elements</span></span></li>
<li><a name="a754"></a></span><span class="src-str"><span class="src-comm">     * @return an array of ContentGroupElement or an empty arrray */</span></span></li>
<li><a name="a755"></a></span><span class="src-str">    <span class="src-key">function</span> <span class="src-id">getElements</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a756"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a757"></a></span><span class="src-str">        <span class="src-key">global</span> <span class="src-var">$db</span><span class="src-sym">;</span></span></li>
<li><a name="a758"></a></span><span class="src-str">        <span class="src-var">$retval</span> = <span class="src-key">array</span> <span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a759"></a></span><span class="src-str">        <span class="src-var">$sql</span> = <span class="src-str">"</span><span class="src-id">SELECT</span> <span class="src-id">content_group_element_id</span> <span class="src-id">FROM</span> <span class="src-id">content_group_element</span> <span class="src-id">WHERE</span> <span class="src-id">content_group_id</span>='<span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a>' <span class="src-id">ORDER BY display_order</span><span class="src-str"></span><span class="src-str">"</span><span class="src-sym">;</span></span></li>
<li><a name="a760"></a></span><span class="src-str">        <span class="src-var">$db</span></span><span class="src-sym">-&gt;</span><span class="src-id">ExecSql</span><span class="src-sym">(</span><span class="src-var">$sql</span><span class="src-sym">, </span><span class="src-var">$element_rows</span><span class="src-sym">, </span><span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a761"></a>        <span class="src-key">if </span><span class="src-sym">(</span><span class="src-var">$element_rows </span>!= <span class="src-id">null</span><span class="src-sym">)</span></li>
<li><a name="a762"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a763"></a></span><span class="src-str">            <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$element_rows</span> <span class="src-key">as</span> <span class="src-var">$element_row</span><span class="src-sym">)</span></span></li>
<li><a name="a764"></a></span><span class="src-str">            <span class="src-sym">{</span></span></li>
<li><a name="a765"></a></span><span class="src-str">                <span class="src-var">$retval</span><span class="src-sym">[</span><span class="src-sym">]</span> = <span class="src-id">self</span> <span class="src-sym">::</span> <span class="src-id">getObject</span><span class="src-sym">(</span><span class="src-var">$element_row</span><span class="src-sym">[</span><span class="src-str">'content_group_element_id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a766"></a></span><span class="src-str">            <span class="src-sym">}</span></span></li>
<li><a name="a767"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a768"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-var">$retval</span><span class="src-sym">;</span></span></li>
<li><a name="a769"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a770"></a>&nbsp;</li>
<li><a name="a771"></a></span><span class="src-str">    /** Delete this Content from the database</span></li>
<li><a name="a772"></a></span><span class="src-str">    */</span></li>
<li><a name="a773"></a></span><span class="src-str">    <span class="src-key">public</span> <span class="src-key">function</span> <span class="src-id">delete</span><span class="src-sym">(</span><span class="src-sym">&</span> <span class="src-var">$errmsg</span><span class="src-sym">)</span></span></li>
<li><a name="a774"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a775"></a></span><span class="src-str">        <span class="src-key">if</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#methodisPersistent">isPersistent</a><span class="src-sym">(</span><span class="src-sym">) </span>== <span class="src-id">false</span><span class="src-sym">)</span></li>
<li><a name="a776"></a>        </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a777"></a></span><span class="src-str">            <span class="src-key">foreach</span> <span class="src-sym">(</span><span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#methodgetElements">getElements</a><span class="src-sym">(</span><span class="src-sym">) </span><span class="src-key">as </span><span class="src-var">$element</span><span class="src-sym">)</span></li>
<li><a name="a778"></a>            </span><span class="src-str"><span class="src-sym">{</span></span></li>
<li><a name="a779"></a></span><span class="src-str">                <span class="src-var">$element</span></span><span class="src-sym">-&gt;</span><span class="src-id">delete</span><span class="src-sym">(</span><span class="src-var">$errmsg</span><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a780"></a>            </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a781"></a></span><span class="src-str">        <span class="src-sym">}</span></span></li>
<li><a name="a782"></a></span><span class="src-str">        <span class="src-key">return</span> <span class="src-id">parent</span> <span class="src-sym">::</span> <span class="src-id">delete</span><span class="src-sym">(</span><span class="src-var">$errmsg</span><span class="src-sym">)</span><span class="src-sym">;</span></span></li>
<li><a name="a783"></a></span><span class="src-str">    <span class="src-sym">}</span></span></li>
<li><a name="a784"></a></span><span class="src-str">        /** Reloads the object from the database.  Should normally be called after a set operation.</span></li>
<li><a name="a785"></a></span><span class="src-str">     * This function is private because calling it from a subclass will call the</span></li>
<li><a name="a786"></a></span><span class="src-str">     * constructor from the wrong scope */</span></li>
<li><a name="a787"></a></span><span class="src-str">    <span class="src-key">private</span> <span class="src-key">function</span> <span class="src-id">refresh</span><span class="src-sym">(</span><span class="src-sym">)</span></span></li>
<li><a name="a788"></a></span><span class="src-str">    <span class="src-sym">{</span></span></li>
<li><a name="a789"></a></span><span class="src-str">        <span class="src-var">$this</span></span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/ContentClasses/ContentGroup.html#method__construct">__construct</a><span class="src-sym">(</span><span class="src-var">$this</span><span class="src-sym">-&gt;</span><a href="../WiFiDogAuthServer/Content.html#var$id">id</a><span class="src-sym">)</span><span class="src-sym">;</span></li>
<li><a name="a790"></a>    </span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a791"></a>&nbsp;</li>
<li><a name="a792"></a></span><span class="src-str"><span class="src-sym">}</span></span></li>
<li><a name="a793"></a>&nbsp;</li>
<li><a name="a794"></a></span><span class="src-str"><span class="src-comm">/*</span></span></li>
<li><a name="a795"></a></span><span class="src-str"><span class="src-comm"> * Local variables:</span></span></li>
<li><a name="a796"></a></span><span class="src-str"><span class="src-comm"> * tab-width: 4</span></span></li>
<li><a name="a797"></a></span><span class="src-str"><span class="src-comm"> * c-basic-offset: 4</span></span></li>
<li><a name="a798"></a></span><span class="src-str"><span class="src-comm"> * c-hanging-comment-ender-p: nil</span></span></li>
<li><a name="a799"></a></span><span class="src-str"><span class="src-comm"> * End:</span></span></li>
<li><a name="a800"></a></span><span class="src-str"><span class="src-comm"> */</span></span></li>
<li><a name="a801"></a>&nbsp;</li>
</ol></pre>
</div>
	<p class="notes" id="credit">
		Documentation generated on Mon, 26 Dec 2005 12:22:02 +0100 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.3.0RC5</a>
	</p>
	</body>
</html>
